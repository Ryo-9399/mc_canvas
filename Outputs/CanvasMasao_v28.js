var CanvasMasao=function(){function CharacterObject(){this.c=0,this.x=0,this.y=0,this.vx=0,this.vy=0,this.wx=0,this.wy=0,this.c1=0,this.c2=0,this.c3=0,this.c4=0,this.c5=0,this.pt=0,this.pth=0,this.img=null,this.zs_x=0,this.zs_y=0,this.ac=0,this.level=0,this.jimen_f=!1,this.muki=0,this.direction=0,this.score=0,this.ss=0,this.gf=!1}CharacterObject.prototype.init=function(){this.c=0,this.x=0,this.y=0,this.vx=0,this.vy=0,this.wx=0,this.wy=0,this.c1=0,this.c2=0,this.c3=0,this.c4=0,this.c5=0,this.pt=0,this.pth=0,this.img=null,this.zs_x=0,this.zs_y=0,this.ac=0,this.level=0,this.jimen_f=!1,this.muki=0,this.direction=0,this.score=0,this.ss=0,this.gf=!1},CharacterObject.prototype.setPattern=function(paramString){};function GameGraphics(applet){this.spt_kazu_x=10,this.spt_kazu_y=25,this.spt_h_kijyun=3,this.spt_kazu=250,this.li=new Array(10),this.spt_img=createNDimensionArray(2,this.spt_kazu),this.ap=applet,this.di=new function(width,height){this.width=width,this.height=height}(512,320),this.backcolor=Color.black,this.os_img=this.ap.createImage(this.di.width,this.di.height),this.os_g=this.os_img.getGraphics(),this.os2_img=this.ap.createImage(this.di.width+96,this.di.height+96),this.os2_g=this.os2_img.getGraphics(),this.mt=[],str=this.ap.getParameter("filename_pattern"),this.apt_img=this.ap.getImage(str)}GameGraphics.prototype.cut=function(){var j,n,m,localG;for(n=0;n<=this.spt_kazu_y-1;n++)for(m=0;m<=this.spt_kazu_x-1;m++)j=10*n+m,this.spt_img[0][j]=new ImageBuff(32,32),(localG=this.spt_img[0][j].getGraphics()).drawImage(this.apt_img,32*m,32*n,32,32,0,0,32,32,null),n>=this.spt_h_kijyun?(this.spt_img[1][j]=new ImageBuff(32,32),(localG=this.spt_img[1][j].getGraphics()).scale(-1,1),localG.drawImage(this.apt_img,32*m,32*n,32,32,-32,0,32,32,null)):this.spt_img[1][j]=this.spt_img[0][j];this.hi=this.spt_img[0]},GameGraphics.prototype.addListImage=function(i,s){this.li[i]=this.ap.getImage(s),this.mt.push(this.li[i])},GameGraphics.prototype.loadImage=function(){},GameGraphics.prototype.copyOS=function(g){g.drawImage(this.os_img,0,0,this.ap)},GameGraphics.prototype.fill=function(){this.os_g.setColor(this.backcolor),this.os_g.fillRect(0,0,this.di.width,this.di.height)},GameGraphics.prototype.fill2=function(){this.os2_g.setColor(this.backcolor),this.os2_g.fillRect(0,0,this.di.width+96,this.di.height+96)},GameGraphics.prototype.setBackcolor=function(color){this.backcolor=color},GameGraphics.prototype.drawPT=function(i,j,k,l){this.os_g.drawImage(this.spt_img[l][k],i,j,this.ap)},GameGraphics.prototype.drawPT2=function(i,j,k){this.os2_g.drawImage(this.hi[k],i,j,this.ap)},GameGraphics.prototype.drawBG2=function(i,j,k){this.os2_g.setColor(this.backcolor),this.os2_g.fillRect(i,j,32,32),this.os2_g.drawImage(this.hi[k],i,j,this.ap)},GameGraphics.prototype.drawBG3=function(i,j,k,color){this.os2_g.setColor(color),this.os2_g.fillRect(i,j,32,32),this.os2_g.drawImage(this.hi[k],i,j,this.ap)},GameGraphics.prototype.drawListImage=function(i,j,k){this.os_g.drawImage(this.li[k],i,j,this.ap)};function GameKey(){this.key_code=0,this.up_f=!1,this.down_f=!1,this.left_f=!1,this.right_f=!1,this.tr1_f=!1,this.tr2_f=!1,this.tr3_f=!1,this.start_f=!1,this.x_f=!1,this.z_f=!1,this.space_f=!1,this.left_c=0,this.right_c=0,this.up_c=0,this.down_c=0,this.tr1_c=0,this.codekey_f=new Array(256),this.left_right_lock=!1}GameKey.prototype.init=function(){this.key_code=0,this.up_f=!1,this.down_f=!1,this.left_f=!1,this.right_f=!1,this.tr1_f=!1,this.tr2_f=!1,this.tr3_f=!1,this.start_f=!1,this.x_f=!1,this.z_f=!1,this.space_f=!1,this.left_c=0,this.right_c=0,this.up_c=0,this.down_c=0,this.tr1_c=0,this.left_right_lock=!1;for(var i=0;i<=255;i++)this.codekey_f[i]=!1},GameKey.prototype.keyPressed=function(paramKeyEvent){switch(this.key_code=paramKeyEvent.keyCode,this.key_char=paramKeyEvent.keyCode,this.key_code>=0&&this.key_code<=255&&(this.codekey_f[this.key_code]=!0),this.key_code){case 38:paramKeyEvent.preventDefault(),this.up_f=!0;break;case 40:paramKeyEvent.preventDefault(),this.down_f=!0,this.tr2_f=!0;break;case 37:paramKeyEvent.preventDefault(),this.left_right_lock||(this.left_f=!0);break;case 39:paramKeyEvent.preventDefault(),this.left_right_lock||(this.right_f=!0);break;case 104:paramKeyEvent.preventDefault(),this.up_f=!0;break;case 98:paramKeyEvent.preventDefault(),this.down_f=!0,this.tr2_f=!0;break;case 100:paramKeyEvent.preventDefault(),this.left_right_lock||(this.left_f=!0);break;case 102:paramKeyEvent.preventDefault(),this.left_right_lock||(this.right_f=!0);break;case 90:paramKeyEvent.preventDefault(),this.tr1_f=!0,this.z_f=!0;break;case 88:paramKeyEvent.preventDefault(),this.tr2_f=!0,this.x_f=!0;break;case 67:paramKeyEvent.preventDefault(),this.tr3_f=!0;break;case 32:paramKeyEvent.preventDefault(),this.tr1_f=!0,this.space_f=!0,this.tr1_c=0;break;case 83:paramKeyEvent.preventDefault(),this.start_f=!0}},GameKey.prototype.keyReleased=function(paramKeyEvent){var i=paramKeyEvent.keyCode;switch(i>=0&&i<=255&&(this.codekey_f[i]=!1),i){case 38:this.up_f=!1;break;case 40:this.down_f=!1,this.tr2_f=!1;break;case 37:this.left_right_lock||(this.left_f=!1,this.left_c=0);break;case 39:this.left_right_lock||(this.right_f=!1,this.right_c=0);break;case 104:this.up_f=!1;break;case 98:this.down_f=!1,this.tr2_f=!1;break;case 100:this.left_right_lock||(this.left_f=!1,this.left_c=0);break;case 102:this.left_right_lock||(this.right_f=!1,this.right_c=0);break;case 90:this.tr1_f=!1,this.z_f=!1,this.tr1_c=0;break;case 88:this.tr2_f=!1,this.x_f=!1;break;case 67:this.tr3_f=!1;break;case 32:this.tr1_f=!1,this.space_f=!1,this.tr1_c=0;break;case 83:this.start_f=!1}},GameKey.prototype.getKeyCode=function(){return this.key_code};function GameMouse(){this.button_f=!1,this.click_x=0,this.click_y=0,this.init=function(){this.button_f=!1,this.click_x=0,this.click_y=0}}GameMouse.prototype.mousePressed=function(paramMouseEvent){var target=paramMouseEvent.target,rect=target.getBoundingClientRect();this.button_f=!0,this.click_x=(paramMouseEvent.clientX-rect.left)/rect.width*target.width,this.click_y=(paramMouseEvent.clientY-rect.top)/rect.height*target.height},GameMouse.prototype.mouseReleased=function(paramMouseEvent){this.button_f=!1};function Game(params,id,options){var randomID=makeRandomString();if((options=options||{}).width=options.width||512,options.height=options.height||320,options.extensions=options.extensions||[],id?this.__boxID=id:(this.__boxID="__mcdiv"+randomID,document.write("<div id='"+this.__boxID+"'></div>")),this.__canvasID="__mccanvas"+randomID,this.__padDivID="__mcpaddiv"+randomID,this.__box=document.getElementById(this.__boxID),this.__resourceList=[],this.__canvas=document.createElement("canvas"),this.__canvas.id=this.__canvasID,this.__canvas.width=options.width,this.__canvas.height=options.height,this.__canvas.textContent="※お使いのブラウザはHTML5に対応していないため表示できません。",this.__box.appendChild(this.__canvas),this.__padDiv=document.createElement("div"),this.__padDiv.id=this.__padDivID,this.__box.appendChild(this.__padDiv),this.__canvas&&this.__canvas.getContext){if(this.__pad_before=new Array(8),this.__pad_after=new Array(8),this.__pad_touches=[],this.__pad_coords=[[410,30,490,30,490,170,410,170],[320,30,400,30,400,170,320,170],[250,30,290,30,290,70,250,70],[200,30,240,30,240,70,200,70],[5,60,87,60,87,140,5,140],[175,60,93,60,93,140,175,140],[30,5,30,80,150,80,150,5],[30,195,30,120,150,120,150,195]],this.__pad_chars=["X","Z","T","P","←","→","↑","↓"],window.TouchEvent){var ss,__pad_btn=document.createElement("input");__pad_btn.type="button",__pad_btn.value="バーチャル操作パッド 表示 / 非表示",(ss=__pad_btn.style).width="24em",ss.height="2.5em",__pad_btn.onclick=function(){"inline"==__pad.style.display?__pad.style.display="none":Game.padAccessor.show(__pad)},this.__padDiv.appendChild(__pad_btn),this.__padDiv.appendChild(document.createElement("br"));var __pad=this.__pad=document.createElement("canvas");__pad.width=500,__pad.height=200;var __pad_event=function(e){this.__pad_event(e)}.bind(this);__pad.addEventListener("touchstart",__pad_event,!1),__pad.addEventListener("touchmove",__pad_event,!1),__pad.addEventListener("touchend",__pad_event,!1),__pad.addEventListener("touchcancel",__pad_event,!1),__pad.style.display="none",this.__padDiv.appendChild(__pad),(ss=__pad.style).position="fixed",ss.bottom="0px",ss.left="0px";var __interval_id=setInterval(function(){var w=innerWidth,h=innerHeight,rw=w<h?w:h;__pad.style.width=w+"px",__pad.style.height=.4*rw+"px"},500);this.__resourceList.push({type:"setInterval",value:__interval_id}),Game.padAccessor.append(__pad),this.__pad_off=document.createElement("canvas"),this.__pad_off.width=500,this.__pad_off.height=200;var ctx=this.__pad_off.getContext("2d");ctx.font="24px monospace",ctx.textAlign="center",ctx.textBaseline="middle",ctx.lineWidth=2,ctx.lineCap="round",ctx.lineJoin="round";for(var i=0;i<8;i++)this.__pad_before[i]=!1,this.__pad_after[i]=!1;this.__pad_update()}this.__mc=new MasaoConstruction(params,this.__canvas,this,options||{});for(i=0;i<options.extensions.length;i++)options.extensions[i].inject(this.__mc,options);this.__mc.start();var __st=this.__st=this.__mc.getParameter("game_speed");__st?(__st=parseInt(__st),isNaN(__st)?__st=70:__st<10?__st=10:__st>300&&(__st=300)):__st=70,this.__pt=0;var __loop=new Loop(this,!!options["bc-loop-setinterval"]);__loop.start(__st,this.__loop.bind(this)),this.__resourceList.push({type:"Loop",value:__loop})}}Game.replaceAll=function(options){"complete"==document.readyState?onload():window.addEventListener("load",onload);function onload(){for(var applets=document.getElementsByTagName("applet"),appletArray=[],i=0;i<applets.length;i++)appletArray.push(applets[i]);for(i=0;i<appletArray.length;i++){var applet=appletArray[i];(applet.getAttribute("code")||"").match(/masaoconstruction/i)&&Game.replaceByDom(applet,options)}var objects=document.getElementsByTagName("object"),objectArray=[];for(i=0;i<objects.length;i++)objectArray.push(objects[i]);for(i=0;i<objectArray;i++){var object=objectArray[i],param=object.getElementsByName("code")[0];param.tagName.match(/param/i)&&param.value.match(/masaoconstruction/i)&&Game.replaceByDom(object,options)}}},Game.replace=function(id,options){"complete"==document.readyState?onload():window.addEventListener("load",onload);function onload(){Game.replaceByDom(document.getElementById(id),options)}},Game.replaceByDom=function(paramScope,options){var paramTags=paramScope.getElementsByTagName("param"),paramLength=paramTags.length,params={};for(i=0;i<paramLength;i++)params[paramTags[i].name]=paramTags[i].value;var newDiv=document.createElement("div"),id=paramScope.id||makeRandomString();newDiv.id=id,paramScope.parentNode.replaceChild(newDiv,paramScope),new Game(params,id,options)},Game.focus=function(){var focusedObject;return document.addEventListener("mousedown",function(){focusedObject=null}),{focus:function(obj){focusedObject=obj},hasFocus:function(obj){return focusedObject===obj}}}(),Game.padAccessor=function(){var padArray=[];return{append:function(pad){padArray.push(pad)},show:function(pad){for(var i=0;i<padArray.length;i++)pad!==padArray[i]?padArray[i].style.display="none":pad.style.display="inline"}}}(),Game.prototype.kill=function(){this.__mc.stop();for(var rl=this.__resourceList,i=0,l=rl.length;i<l;i++)"setInterval"===rl[i].type?clearInterval(rl[i].value):"eventListener"===rl[i].type?rl[i].target.removeEventListener(rl[i].name,rl[i].value):"Loop"===rl[i].type&&rl[i].value.stop();for(this.__resourceList=[];this.__box.hasChildNodes();)this.__box.removeChild(this.__box.firstChild)},Game.prototype.__loop=function(){var pt=(new Date).getTime();if(!(pt-this.__pt<this.__st)){if(this.__pt=pt-10,this.__testCanvas){var ctx=this.__testCanvas.getContext("2d");ctx.fillStyle="rgb(128,0,128)",ctx.fillRect(0,0,700,700),ctx.strokeStyle="#f00";var i;if(this.__mc.gg)for(ctx.save(),ctx.scale(.5,.5),ctx.drawImage(this.__mc.gg.os_img._dat,0,0),ctx.drawImage(this.__mc.gg.os2_img._dat,576,0),ctx.restore(),ctx.beginPath(),i=0;i<700;i+=32)ctx.moveTo(0,i),ctx.lineTo(700,i),ctx.moveTo(i,0),ctx.lineTo(i,700);ctx.stroke()}if(this.__testDiv&&this.__mc.mp){var prop,type,mp=this.__mc.mp,str="<div style='text-align:left'>";for(prop in mp)"[object Array]"!=(type=Object.prototype.toString.call(mp[prop]))&&"[object Function]"!=type&&(prop in this.__teo?this.__teo[prop].t>0?(str+="<span style='background-color:rgba(255,255,255,"+this.__teo[prop].t/6+")'>"+prop+": "+mp[prop]+"</span> ",this.__teo[prop].t--):str+=prop+": "+mp[prop]+" ":this.__teo[prop]={val:mp[prop],t:0},this.__teo[prop].val!=mp[prop]&&(this.__teo[prop].val=mp[prop],this.__teo[prop].t=6));this.__testDiv.innerHTML=str+"</div>"}this.__mc.run()}},Game.prototype.__pad_update=function(){var j,k,tmp,sx,sy,r=this.__pad.getBoundingClientRect(),dx=r.left,dy=r.top,c=this.__pad_off.getContext("2d");for(c.clearRect(0,0,500,200),c.fillStyle="rgba(128, 128, 128, 0.5)",i=0;i<8;i++){for(c.beginPath(),k=(tmp=this.__pad_coords[i]).length>>1,c.moveTo(tmp[0],tmp[1]),j=0;j<k;j++)c.lineTo(tmp[j<<1],tmp[1+(j<<1)]);c.closePath(),c.fill()}for(i=0;i<8;i++)this.__pad_after[i]=!1;for(c.fillStyle="rgba(0, 0, 0, 0.5)",i=0;i<8;i++){for(c.beginPath(),k=(tmp=this.__pad_coords[i]).length>>1,c.moveTo(tmp[0],tmp[1]),j=0;j<k;j++)c.lineTo(tmp[j<<1],tmp[1+(j<<1)]);c.closePath();for(j in this.__pad_touches)sx=this.__pad_touches[j].clientX-dx,sy=this.__pad_touches[j].clientY-dy,this.__pad_after[i]|=c.isPointInPath(sx/r.width*500,sy/r.height*200);this.__pad_after[i]&&c.fill()}for(c.strokeStyle="black",c.fillStyle="black",i=0;i<8;i++){for(c.beginPath(),k=(tmp=this.__pad_coords[i]).length>>1,c.moveTo(tmp[0],tmp[1]),sx=tmp[0],sy=tmp[1],j=1;j<k;j++)c.lineTo(tmp[j<<1],tmp[1+(j<<1)]),sx+=tmp[j<<1],sy+=tmp[1+(j<<1)];c.closePath(),c.stroke(),c.fillText(this.__pad_chars[i],sx/k,sy/k)}c.stroke(),(c=this.__pad.getContext("2d")).clearRect(0,0,500,200),c.drawImage(this.__pad_off,0,0);for(var i=0;i<8;i++)this.__pad_before[i]!=this.__pad_after[i]&&(this.__pad_before[i]=this.__pad_after[i],this.__pad_after[i]?this.__pad_pressed(i):this.__pad_released(i))},Game.prototype.__pad_pressed=function(ch){if(this.__mc.gk){var co=this.__get_code(ch);this.__mc.gk.keyPressed({keyCode:co,preventDefault:function(){}})}},Game.prototype.__pad_released=function(ch){if(this.__mc.gk){var co=this.__get_code(ch);this.__mc.gk.keyReleased({keyCode:co,preventDefault:function(){}})}},Game.prototype.__get_code=function(ch){switch(ch){case 4:return 37;case 6:return 38;case 5:return 39;case 7:return 40;case 1:return 90;case 0:return 88;case 2:return 84;case 3:return 80}},Game.prototype.__pad_event=function(e){e.preventDefault(),this.__pad_touches=[];for(var i=0;i<e.touches.length;i++)this.__pad_touches.push(e.touches[i]);this.__pad_update()};function AudioClip(url){this._dat=new Audio,this._dat.preload="auto",this._dat.src=url}AudioClip.prototype._oncanplaythrough=function(){};AudioClip.prototype._onerror=function(){};AudioClip.prototype.play=function(){try{this._dat.loop=!1,this._dat.currentTime=0,this._dat.play()}catch(e){return!1}return!0},AudioClip.prototype.loop=function(){try{this._dat.loop=!0,this._dat.currentTime=0,this._dat.play()}catch(e){return!1}return!0},AudioClip.prototype.stop=function(){try{this._dat.pause()}catch(e){return!1}return!0};function createNDimensionArray(){if(0==arguments.length)return null;for(var a=new Array(arguments.length),i=0;i<arguments.length;i++)a[i]=arguments[i];return function(an){var ary=new Array(an[0]);if(1==an.length)return ary;for(var an2=an.slice(1),i=0;i<an[0];i++)ary[i]=arguments.callee(an2);return ary}(a)}function rounddown(val){return val>=0?Math.floor(val):-Math.floor(-val)}function makeRandomString(){return Math.random().toString(36).slice(2)}function Loop(game,forceSetInterval){this.game=game,this.forceSetInterval=forceSetInterval,this.running=!1,this.interval=null,this.callback=null,this.mode=0,this.prevTime=null,this.timerid=null,this._loop=this._loop.bind(this)}Loop.prototype.start=function(interval,callback){this.running=!0,this.interval=interval,this.callback=callback;var now=timestamp();this.targetTime=now+interval,this.prevTime=now,window.requestAnimationFrame&&!this.forceSetInterval?this.mode=1:this.mode=0,0===this.mode&&(this.timerid=setInterval(this._loop,interval)),this._next()},Loop.prototype.stop=function(){this.running&&(this.running=!1,1===this.mode?cancelAnimationFrame(this.timerid):clearInterval(this.timerid))},Loop.prototype._next=function(){1===this.mode&&(this.timerid=requestAnimationFrame(this._loop))},Loop.prototype._loop=function(){if(this.running){var n=timestamp();n-this.prevTime>=500&&(this.targetTime=n-1);var loop_count=Math.ceil((n-this.targetTime)/this.interval);for(this.targetTime+=this.interval*loop_count;loop_count>0&&(this.callback(),loop_count--,!(timestamp()-n>2)););if(loop_count>0){var _this=this;idle(function cb(deadline){for(;loop_count>0&&deadline.timeRemaining()>0;)_this.callback(),loop_count--;loop_count>0&&!deadline.didTimeout&&idle(cb,{timeout:1e3})},{timeout:1e3})}this._next(),this.prevTime=n}};var timestamp=window.performance&&performance.now?performance.now.bind(performance):Date.now?Date.now.bind(Date):function(){return 1e3*(new Date).getTime()},idle="function"==typeof requestIdleCallback?requestIdleCallback:"function"==typeof setImmediate?function(cb){setImmediate(function(){var n=timestamp();cb({didTimeout:!1,timeRemaining:function(){return 50+n-timestamp()}})})}:function(cb){setTimeout(function(){var n=timestamp();cb({didTimeout:!1,timeRemaining:function(){return 50+n-timestamp()}})},1)};function IdouGamen(gamegraphics,gamekey,keyboardmenu,mainprogram){this.zure_x=16,this.zure_y=24,this.co_j=new CharacterObject,this.map_string=new Array(9),this.map_bg=createNDimensionArray(15,9),this.stage_c=new Array(10),this.stage_x=new Array(10),this.stage_y=new Array(10),this.stage_cf=new Array(10),this.ie_c=new Array(16),this.ie_x=new Array(16),this.ie_y=new Array(16),this.mp_mode=0,this.cc_p1_x=new Array(17),this.cc_p1_y=new Array(17),this.cc_p2_x=new Array(17),this.cc_p2_y=new Array(17),this.gg=gamegraphics,this.gk=gamekey,this.km=keyboardmenu,this.mp=mainprogram,this.cc_p1_x[13]=-200,this.cc_p1_y[13]=160,this.cc_p1_x[14]=-200,this.cc_p1_y[14]=520,this.cc_p1_x[15]=712,this.cc_p1_y[15]=520,this.cc_p1_x[16]=712,this.cc_p1_y[16]=160,this.cc_p2_x[13]=712,this.cc_p2_y[13]=160,this.cc_p2_x[14]=712,this.cc_p2_y[14]=-200,this.cc_p2_x[15]=-200,this.cc_p2_y[15]=-200,this.cc_p2_x[16]=-200,this.cc_p2_y[16]=160}IdouGamen.prototype.worldInit=function(){for(var i=0;i<=9;i++)this.stage_c[i]=0,this.stage_cf[i]=!1;this.stage_kcID=0,this.door_koID=0,this.dokan_khID=0,this.door_score_open=0;for(var j=0;j<=15;j++)this.ie_c[j]=0;this.co_j.x=0,this.co_j.y=0,this.co_j.vx=0,this.co_j.vy=0,this.co_j.muki=1,this.co_j.ac=0,this.mp.tr1_c=2,this.shop_kattaitem=-1,this.mp_mode=0,this.km.initAll(),this.km.mode=100;for(var l=0;l<=8;l++){var s=this.gg.ap.getParameter("chizu-"+l);s+="...............",this.map_string[l]=s}for(var i1=0;i1<=8;i1++)for(var k=0;k<=14;k++){var c=this.map_string[i1].charAt(k);"A"==c?(this.co_j.x=32*k,this.co_j.y=32*i1,this.map_bg[k][i1]=220):"B"==c?(this.map_bg[k][i1]=216,this.ie_c[3]=100,this.ie_x[3]=32*k,this.ie_y[3]=32*i1):"C"==c?(this.map_bg[k][i1]=217,this.ie_c[4]=100,this.ie_x[4]=32*k,this.ie_y[4]=32*i1):"D"==c?(this.map_bg[k][i1]=218,this.ie_c[10]=100,this.ie_x[10]=32*k,this.ie_y[10]=32*i1):"E"==c?(this.map_bg[k][i1]=219,this.ie_c[11]=100,this.ie_x[11]=32*k,this.ie_y[11]=32*i1):"a"==c?0==this.stage_c[0]?(this.map_bg[k][i1]=223,this.stage_c[0]=100,this.stage_x[0]=32*k,this.stage_y[0]=32*i1):this.map_bg[k][i1]=220:"b"==c?0==this.stage_c[1]?(this.map_bg[k][i1]=224,this.stage_c[1]=100,this.stage_x[1]=32*k,this.stage_y[1]=32*i1):this.map_bg[k][i1]=220:"c"==c?0==this.stage_c[2]?(this.map_bg[k][i1]=225,this.stage_c[2]=100,this.stage_x[2]=32*k,this.stage_y[2]=32*i1):this.map_bg[k][i1]=220:"d"==c?0==this.stage_c[3]?(this.map_bg[k][i1]=226,this.stage_c[3]=100,this.stage_x[3]=32*k,this.stage_y[3]=32*i1):this.map_bg[k][i1]=220:"e"==c?(this.map_bg[k][i1]=213,this.ie_c[0]=100,this.ie_x[0]=32*k,this.ie_y[0]=32*i1):"f"==c?(this.map_bg[k][i1]=214,this.ie_c[1]=100,this.ie_x[1]=32*k,this.ie_y[1]=32*i1):"g"==c?(this.map_bg[k][i1]=215,this.ie_c[2]=100,this.ie_x[2]=32*k,this.ie_y[2]=32*i1):"h"==c?(this.map_bg[k][i1]=212,this.ie_c[9]=100,this.ie_x[9]=32*k,this.ie_y[9]=32*i1):"i"==c?(this.map_bg[k][i1]=206,this.ie_c[5]=100,this.ie_x[5]=32*k,this.ie_y[5]=32*i1):"j"==c?(this.map_bg[k][i1]=207,this.ie_c[6]=100,this.ie_x[6]=32*k,this.ie_y[6]=32*i1):"k"==c?(this.map_bg[k][i1]=208,this.ie_c[7]=100,this.ie_x[7]=32*k,this.ie_y[7]=32*i1):"l"==c?(this.map_bg[k][i1]=209,this.ie_c[8]=100,this.ie_x[8]=32*k,this.ie_y[8]=32*i1):this.map_bg[k][i1]="1"==c?220:"2"==c?221:"3"==c?222:0}this.co_j.x+16>256&&(this.co_j.muki=0),this.drawOs2()},IdouGamen.prototype.worldInit2=function(){this.co_j.vx=0,this.co_j.vy=0,this.co_j.muki=1,this.co_j.ac=0,this.mp.tr1_c=2,this.mp_mode=200,this.cc_hankei=12,this.stage_kcID=0,this.door_koID=0,this.shop_kattaitem=-1,this.door_score_open=0,100==this.ie_c[9]&&this.mp.score>=this.mp.door_score&&(this.ie_c[9]=50,this.door_score_open=1),this.km.initAll(),this.km.mode=100,this.drawOs2()},IdouGamen.prototype.worldInit3=function(){this.stage_kcID=this.checkStage(),this.stage_cf[this.stage_kcID-1]=!0,this.stage_c[this.stage_kcID-1]=50;for(var i=0,j=0;j<=2;j++)this.stage_cf[j]&&i++;this.door_koID=0,i>=1&&100==this.ie_c[i-1]&&(this.ie_c[i-1]=50,this.door_koID=i),this.door_score_open=0,100==this.ie_c[9]&&this.mp.score>=this.mp.door_score&&(this.ie_c[9]=50,this.door_score_open=1),this.co_j.vx=0,this.co_j.vy=0,this.co_j.muki=1,this.co_j.ac=0,this.mp.tr1_c=2,this.co_j.pt=0,this.shop_kattaitem=-1,this.mp_mode=200,this.cc_hankei=12,this.km.initAll(),this.km.mode=100,this.drawOs2()},IdouGamen.prototype.drawOs2=function(){this.gg.setBackcolor(new Color(0,127,0)),this.gg.fill2(),this.gg.os2_g.drawImage(this.gg.li[3],0,0,this.gg.ap);for(var i1=0;i1<=8;i1++)for(var k=0;k<=14;k++){var i=this.map_bg[k][i1];221==i?(this.gg.drawPT2(32*k+16,32*i1+24-16,221),this.gg.drawPT2(32*k+16,32*i1+24+16,221)):222==i&&(this.gg.drawPT2(32*k+16-16,32*i1+24,222),this.gg.drawPT2(32*k+16+16,32*i1+24,222))}for(var j1=0;j1<=8;j1++)for(var l=0;l<=14;l++){var j=this.map_bg[l][j1];61!=j&&62!=j&&256!=j&&(j>=216&&j<=219?this.gg.drawPT2(32*l+16,32*j1+24-7,j):j>=206&&j<=209?this.gg.drawPT2(32*l+16,32*j1+24-7,j):j>=212&&j<=215?(this.gg.drawPT2(32*l+16-16,32*j1+24,222),this.gg.drawPT2(32*l+16+16,32*j1+24,222),this.gg.drawPT2(32*l+16,32*j1+24-7,j)):this.gg.drawPT2(32*l+16,32*j1+24,j))}},IdouGamen.prototype.drawMap=function(){this.gg.os_g.drawImage(this.gg.os2_img,0,0,this.gg.ap)},IdouGamen.prototype.getBGZ=function(i,j){if(i<0||i>479||j<0||j>287)return 0;var k=i>>5,l=j>>5;return this.map_bg[k][l]},IdouGamen.prototype.checkStage=function(){for(var j=-1,i=0;i<=9;i++)if(100==this.stage_c[i]&&this.co_j.x==this.stage_x[i]&&this.co_j.y==this.stage_y[i]){j=i+1;break}return j},IdouGamen.prototype.mainProgram=function(){if(this.gk.tr1_f?this.mp.tr1_c<2&&this.mp.tr1_c++:this.mp.tr1_c=0,0==this.mp_mode){if(100==this.km.mode)this.jMove();else if(200==this.km.mode)1==this.km.cancel_c?(this.km.off(3),this.km.off(4),this.km.mode=100):1==this.km.kettei_c&&(this.km.init1(3),this.km.setMessage(3,this.mp.mes1_name),this.mp.addSerifu(3,2,3),this.km.activeSerifu(3,120,150,272,Color.cyan),this.km.mode=210);else if(210==this.km.mode)1!=this.km.cancel_c&&1!=this.km.kettei_c||(this.km.off(3),this.km.off(4),this.km.mode=100);else if(300==this.km.mode)1==this.km.cancel_c?(this.km.off(3),this.km.off(4),this.km.mode=100):1==this.km.kettei_c&&(this.km.init1(3),this.km.setMessage(3,this.mp.mes2_name),this.mp.addSerifu(3,4,3),this.km.activeSerifu(3,120,150,272,Color.cyan),this.km.mode=210);else if(400==this.km.mode){if(1==this.km.cancel_c)this.km.off(3),this.km.off(4),this.km.mode=100;else if(1==this.km.kettei_c){this.km.off(3),this.km.list_kazu=0,this.km.init1(6),this.km.setMessage(6,this.gg.ap.getParameter("shop_serifu1"));for(var i=0;i<=8;i++)this.mp.shop_item_teika[i]>0&&(this.km.addItem2(6,this.mp.shop_item_name[i],this.mp.shop_item_teika[i]),this.km.list_IDlist[this.km.list_kazu]=i,this.km.list_kazu++);this.km.list_kazu>=1?(this.km.activeKaimono(6,296,76,184),this.km.mode=410):(this.km.init1(6),this.km.init1(3),this.km.setMessage(3,"Error"),this.km.addItem(3,"Please set any item on shop menu."),this.km.activeSerifu(3,120,150,216,Color.red),this.km.mode=210)}}else 410==this.km.mode?1==this.km.cancel_c?(this.km.off(4),this.km.off(6),this.km.mode=100):1==this.km.kettei_c&&(this.km.list_s=this.km.list_IDlist[this.km.selectedIndex[6]],this.km.init1(7),this.km.setMessage(7,this.mp.shop_item_name[this.km.list_s]+this.gg.ap.getParameter("shop_serifu2")),this.km.addItem(7,this.gg.ap.getParameter("shop_serifu3")),this.km.addItem(7,this.gg.ap.getParameter("shop_serifu4")),this.km.activeSerifutuki(7,48,150,236,this.mp.shop_name),this.km.mode=420):420==this.km.mode?1==this.km.cancel_c?(this.km.offActivewindow(7,6),this.km.mode=410):1==this.km.kettei_c&&(0==this.km.selectedIndex[7]?this.mp.score>=this.mp.shop_item_teika[this.km.list_s]?(this.km.init1(3),this.km.addItem(3,this.mp.shop_item_name[this.km.list_s]+this.gg.ap.getParameter("shop_serifu5")),this.km.activeIchigyou(3,48,240,236),this.mp.score-=this.mp.shop_item_teika[this.km.list_s],this.shop_kattaitem=this.km.list_s,7==this.shop_kattaitem&&this.mp.j_left++,this.km.mode=430):(this.km.init1(3),this.km.addItem(3,this.gg.ap.getParameter("shop_serifu6")),this.km.activeIchigyou(3,48,240,236),this.km.mode=430):(this.km.off(4),this.km.off(6),this.km.off(7),this.km.mode=100)):430==this.km.mode?1!=this.km.cancel_c&&1!=this.km.kettei_c||(this.km.off(3),this.km.off(4),this.km.off(6),this.km.off(7),this.km.mode=100):500==this.km.mode?1==this.km.cancel_c?(this.km.off(4),this.km.off(3),this.km.mode=100):1==this.km.kettei_c&&(this.km.off(3),this.km.init1(2),this.km.setMessage(2,this.gg.ap.getParameter("setumei_menu1")),this.km.addItem(2,this.gg.ap.getParameter("setumei_menu2")),this.km.addItem(2,this.gg.ap.getParameter("setumei_menu3")),this.km.addItem(2,this.gg.ap.getParameter("setumei_menu4")),this.km.activeSerifutuki(2,120,150,224,this.mp.setumei_name),this.km.mode=510):510==this.km.mode?1==this.km.cancel_c?(this.km.off(2),this.km.off(4),this.km.mode=100):1==this.km.kettei_c&&(this.km.init1(3),this.km.setMessage(3,this.mp.setumei_name),1==this.km.selectedIndex[2]?this.mp.addSerifu(3,11,3):2==this.km.selectedIndex[2]?this.mp.addSerifu(3,12,3):this.mp.addSerifu(3,10,3),this.km.activeSerifu(3,200,191,272,Color.cyan),this.km.mode=520):520==this.km.mode&&(1==this.km.cancel_c?(this.km.offActivewindow(3,2),this.km.mode=510):1==this.km.kettei_c&&(this.km.off(2),this.km.off(3),this.km.off(4),this.km.mode=100));this.km.move()}if(1e3==this.co_j.pt?this.gg.drawPT(this.co_j.x+16,this.co_j.y+24-12-6,100,this.co_j.muki):1010==this.co_j.pt?this.gg.drawPT(this.co_j.x+16,this.co_j.y+24-12+5,100,this.co_j.muki):this.co_j.pt>=202&&this.co_j.pt<=205?this.gg.drawPT(this.co_j.x+16,this.co_j.y+24-12,this.co_j.pt,0):this.gg.drawPT(this.co_j.x+16,this.co_j.y+24-12,this.co_j.pt,this.co_j.muki),this.km.drawMenus(),100==this.mp_mode)this.circleCLS(this.cc_hankei),this.cc_hankei-=12,this.cc_hankei<0&&(this.cc_hankei=0,this.mp_mode=110);else if(110==this.mp_mode)this.circleCLS(this.cc_hankei);else if(200==this.mp_mode){if(this.circleCLS(this.cc_hankei),this.cc_hankei+=12,this.cc_hankei>312)if(this.stage_kcID>=1){this.mp_mode=300,this.cc_hankei=0;var j=this.stage_y[this.stage_kcID-1]>>5;this.map_bg[this.stage_x[this.stage_kcID-1]>>5][j]=227,this.door_koID>=1&&(this.map_bg[this.ie_x[this.door_koID-1]>>5][this.ie_y[this.door_koID-1]>>5]=222),1==this.door_score_open&&(this.map_bg[this.ie_x[9]>>5][this.ie_y[9]>>5]=222),this.drawOs2()}else this.mp_mode=0,1==this.door_score_open&&(this.mp_mode=400,this.cc_hankei=0,this.map_bg[this.ie_x[9]>>5][this.ie_y[9]>>5]=222,this.drawOs2())}else if(300==this.mp_mode){this.cc_hankei++;var k;this.cc_hankei<=3?k=0:this.cc_hankei<=6?k=1:this.cc_hankei<=9?k=0:this.cc_hankei<=12?k=1:this.cc_hankei<=15?k=0:this.cc_hankei<=18?k=1:this.cc_hankei<=21?k=0:this.cc_hankei<=24?k=1:this.cc_hankei<=26?k=0:(k=0,this.mp_mode=0),k>0&&this.gg.drawPT(this.stage_x[this.stage_kcID-1]+16,this.stage_y[this.stage_kcID-1]+24,222+this.stage_kcID,0),k>0&&this.door_koID>=1&&this.gg.drawPT(this.ie_x[this.door_koID-1]+16,this.ie_y[this.door_koID-1]+24-7,212+this.door_koID,0),k>0&&1==this.door_score_open&&this.gg.drawPT(this.ie_x[9]+16,this.ie_y[9]+24-7,212,0)}else if(400==this.mp_mode){this.cc_hankei++;var l;this.cc_hankei<=3?l=0:this.cc_hankei<=6?l=1:this.cc_hankei<=9?l=0:this.cc_hankei<=12?l=1:this.cc_hankei<=15?l=0:this.cc_hankei<=18?l=1:this.cc_hankei<=21?l=0:this.cc_hankei<=24?l=1:this.cc_hankei<=26?l=0:(l=0,this.mp_mode=0),l>0&&this.gg.drawPT(this.ie_x[9]+16,this.ie_y[9]+24-7,212,0)}},IdouGamen.prototype.jMove=function(){var l=this.co_j.x,i1=this.co_j.y;if(this.co_j.pt=100,0==this.co_j.vx&&0==this.co_j.vy){if(this.co_j.ac++,this.co_j.ac>7&&(this.co_j.ac=0),this.co_j.ac>3){this.co_j.pt=1e3;var i=this.getBGZ(l,i1);(i>=216&&i<=219||i>=206&&i<=209)&&(this.co_j.pt=1010)}if(1==this.mp.tr1_c)if(this.checkStage()>=1)this.mp_mode=100,this.cc_hankei=312,this.co_j.ac=0,this.dokan_khID=0,this.co_j.pt=100;else if(this.getBGZ(l,i1)>=206&&this.getBGZ(l,i1)<=209)if(2==this.mp.dokan_mode)for(var flag=!1,k1=0;k1<=8;k1++){for(var j1=0;j1<=14;j1++)if(32*j1!=l||32*k1!=i1){if(this.map_bg[j1][k1]==this.getBGZ(l,i1)){l=32*j1,i1=32*k1,this.co_j.ac=0,this.co_j.pt=1010,flag=!0;break}}if(flag)break}else this.mp_mode=100,this.cc_hankei=312,this.co_j.ac=0,this.dokan_khID=this.getBGZ(l,i1)-205,this.co_j.pt=1010;else 216==this.getBGZ(l,i1)?(this.km.init1(4),this.km.onKao(4,120,42,272,230),this.km.init1(3),this.km.setMessage(3,this.mp.mes1_name),this.mp.addSerifu(3,1,3),this.km.activeSerifu(3,120,150,272,Color.cyan),this.km.mode=200,this.co_j.pt=1010,this.co_j.ac=0):217==this.getBGZ(l,i1)?(this.km.init1(4),this.km.onKao(4,120,42,272,232),this.km.init1(3),this.km.setMessage(3,this.mp.mes2_name),this.mp.addSerifu(3,3,3),this.km.activeSerifu(3,120,150,272,Color.cyan),this.km.mode=300,this.co_j.pt=1010,this.co_j.ac=0):218==this.getBGZ(l,i1)?(this.km.init1(4),this.km.onKao(4,120,42,216,234),this.shop_kattaitem<0?(this.km.init1(3),this.km.setMessage(3,this.mp.shop_name),this.mp.addSerifu(3,5,3),this.km.activeSerifu(3,120,150,216,Color.cyan),this.km.mode=400):(this.km.init1(3),this.km.setMessage(3,this.mp.shop_name),this.mp.addSerifu(3,8,3),this.km.activeSerifu(3,120,150,216,Color.cyan),this.km.mode=210),this.co_j.pt=1010,this.co_j.ac=0):219==this.getBGZ(l,i1)&&(this.km.init1(4),this.km.onKao(4,120,42,272,236),this.km.init1(3),this.km.setMessage(3,this.mp.setumei_name),this.mp.addSerifu(3,9,3),this.km.activeSerifu(3,120,150,272,Color.cyan),this.km.mode=500,this.co_j.pt=1010,this.co_j.ac=0);else this.gk.up_f?221==this.getBGZ(l,i1-32)&&(this.co_j.vy=-4,this.co_j.ac=-1):this.gk.down_f?221==this.getBGZ(l,i1+32)&&(this.co_j.vy=4,this.co_j.ac=-1):this.gk.left_f?(this.co_j.muki=0,222==this.getBGZ(l-32,i1)&&(this.co_j.vx=-4,this.co_j.ac=-1),this.getBGZ(l+32,i1)>=212&&this.getBGZ(l+32,i1)<=215&&(this.co_j.vx=-4,this.co_j.ac=-1)):this.gk.right_f&&(this.co_j.muki=1,222==this.getBGZ(l+32,i1)&&(this.co_j.vx=4,this.co_j.ac=-1),this.getBGZ(l-32,i1)>=212&&this.getBGZ(l-32,i1)<=215&&(this.co_j.vx=4,this.co_j.ac=-1))}if(0!=this.co_j.vx||0!=this.co_j.vy){if(this.co_j.ac++,this.co_j.ac>3&&(this.co_j.ac=0),l+=this.co_j.vx,i1+=this.co_j.vy,0!=this.co_j.vx?this.co_j.ac<=1?this.co_j.pt=103:this.co_j.pt=104:this.co_j.vy>=0?this.co_j.ac<=1?this.co_j.pt=202:this.co_j.pt=203:this.co_j.ac<=1?this.co_j.pt=204:this.co_j.pt=205,l%32==0&&i1%32==0){var j=this.getBGZ(l,i1);(220==j||j>=223&&j<=227||j>=216&&j<=219||j>=206&&j<=209)&&(this.co_j.vx=0,this.co_j.vy=0,this.co_j.ac=0),j=0,this.co_j.vx>0?j=this.getBGZ(l+32,i1):this.co_j.vx<0&&(j=this.getBGZ(l-32,i1)),j>=212&&j<=215&&(this.co_j.vx=0,this.co_j.vy=0,this.co_j.pt=100,this.co_j.ac=0)}l<=-32?(l=-32,this.co_j.vx=0,this.co_j.vy=0,this.co_j.ac=0):l>=480&&(l=480,this.co_j.vx=0,this.co_j.vy=0,this.co_j.ac=0),i1<=-32?(i1=-32,this.co_j.vx=0,this.co_j.vy=0,this.co_j.ac=0):i1>=288&&(i1=288,this.co_j.vx=0,this.co_j.vy=0,this.co_j.ac=0)}this.co_j.x=l,this.co_j.y=i1},IdouGamen.prototype.circleCLS=function(i){for(var j=0;j<=12;j++){var d=Math.sin(.2617992*j);this.cc_p1_y[j]=160+Math.floor(d*i);var d1=Math.cos(.2617992*j);this.cc_p1_x[j]=256+Math.floor(d1*i),this.cc_p2_y[j]=160-Math.floor(d*i),this.cc_p2_x[j]=256-Math.floor(d1*i)}this.gg.os_g.setColor(Color.black),this.gg.os_g.fillPolygon(this.cc_p1_x,this.cc_p1_y,17),this.gg.os_g.fillPolygon(this.cc_p2_x,this.cc_p2_y,17)},IdouGamen.prototype.squareCLS=function(i,j){var d=.017453292519943295;this.cc_p1_x[0]=Math.floor(Math.cos((this.cc_kakudo+0)*d)*i)+256,this.cc_p1_y[0]=Math.floor(Math.sin((this.cc_kakudo+0)*d)*i)+160,this.cc_p1_x[1]=Math.floor(Math.cos((this.cc_kakudo+90)*d)*i)+256,this.cc_p1_y[1]=Math.floor(Math.sin((this.cc_kakudo+90)*d)*i)+160,this.cc_p1_x[2]=Math.floor(Math.cos((this.cc_kakudo+180)*d)*i)+256,this.cc_p1_y[2]=Math.floor(Math.sin((this.cc_kakudo+180)*d)*i)+160,this.cc_p1_x[3]=Math.floor(500*Math.cos((this.cc_kakudo+180)*d))+256,this.cc_p1_y[3]=Math.floor(500*Math.sin((this.cc_kakudo+180)*d))+160,this.cc_p1_x[4]=Math.floor(700*Math.cos((this.cc_kakudo+135)*d))+256,this.cc_p1_y[4]=Math.floor(700*Math.sin((this.cc_kakudo+135)*d))+160,this.cc_p1_x[5]=Math.floor(700*Math.cos((this.cc_kakudo+45)*d))+256,this.cc_p1_y[5]=Math.floor(700*Math.sin((this.cc_kakudo+45)*d))+160,this.cc_p1_x[6]=Math.floor(500*Math.cos((this.cc_kakudo+0)*d))+256,this.cc_p1_y[6]=Math.floor(500*Math.sin((this.cc_kakudo+0)*d))+160,this.cc_p2_x[0]=Math.floor(Math.cos((this.cc_kakudo+180)*d)*i)+256,this.cc_p2_y[0]=Math.floor(Math.sin((this.cc_kakudo+180)*d)*i)+160,this.cc_p2_x[1]=Math.floor(Math.cos((this.cc_kakudo+270)*d)*i)+256,this.cc_p2_y[1]=Math.floor(Math.sin((this.cc_kakudo+270)*d)*i)+160,this.cc_p2_x[2]=Math.floor(Math.cos((this.cc_kakudo+360)*d)*i)+256,this.cc_p2_y[2]=Math.floor(Math.sin((this.cc_kakudo+360)*d)*i)+160,this.cc_p2_x[3]=Math.floor(500*Math.cos((this.cc_kakudo+360)*d))+256,this.cc_p2_y[3]=Math.floor(500*Math.sin((this.cc_kakudo+360)*d))+160,this.cc_p2_x[4]=Math.floor(700*Math.cos((this.cc_kakudo+315)*d))+256,this.cc_p2_y[4]=Math.floor(700*Math.sin((this.cc_kakudo+315)*d))+160,this.cc_p2_x[5]=Math.floor(700*Math.cos((this.cc_kakudo+225)*d))+256,this.cc_p2_y[5]=Math.floor(700*Math.sin((this.cc_kakudo+225)*d))+160,this.cc_p2_x[6]=Math.floor(500*Math.cos((this.cc_kakudo+180)*d))+256,this.cc_p2_y[6]=Math.floor(500*Math.sin((this.cc_kakudo+180)*d))+160,this.gg.os_g.setColor(Color.black),this.gg.os_g.fillPolygon(this.cc_p1_x,this.cc_p1_y,7),this.gg.os_g.fillPolygon(this.cc_p2_x,this.cc_p2_y,7)};function ImageBuff(w,h){if(2==arguments.length){this._dat=document.createElement("canvas"),this._dat.width=w,this._dat.height=h,this._width=w,this._height=h;var ctx=this._dat.getContext("2d");ctx.lineWidth=1.6,ctx.lineCap="round",ctx.save()}else this._dat=null,this._width=-1,this._height=-1;this._loaded=!1,this._error=!1,this._g=null}ImageBuff.prototype.load=function(url){this._loaded=!1,this._error=!1,this._width=-1,this._height=-1,this._dat=new Image;var _this=this;this._dat.onload=function(){_this.onload()},this._dat.onerror=function(){ImageBuff_onerror(_this)},this._dat.onabort=function(){ImageBuff_onerror(_this)},this._dat.ontimeout=function(){ImageBuff_onerror(_this)},this._dat.src=url,this._dat.complete&&this.onload()},ImageBuff.prototype.onload=function(){this._loaded=!0,this._width=this._dat.naturalWidth,this._height=this._dat.naturalHeight};ImageBuff.prototype.onerror=function(){this._error=!0,this._dat=null};function ImageBuff_onerror(obj){obj.onerror()}ImageBuff.prototype.getGraphics=function(){return this._width<0?null:(this._g=new Graphics(this),this._g)},ImageBuff.prototype.createGraphics=function(){return this.getGraphics()};function Graphics(img){this._ctx=img._dat.getContext("2d"),this._ctx&&(this._ctx.restore(),this._ctx.save()),this._color=Color.black,this._font=new Font(Font.DIALOG,Font.PLAIN,10)}Graphics.prototype.drawLine=function(x1,y1,x2,y2){return null!=this._ctx&&(this._ctx.beginPath(),this._ctx.moveTo(x1,y1),this._ctx.lineTo(x2,y2),this._ctx.stroke(),!0)},Graphics.prototype.drawImage=function(img,a1,a2,a3,a4,a5,a6,a7,a8,a9){if(null==img._dat)return!1;if(null==this._ctx)return!1;try{if(arguments.length<=4)return this._ctx.drawImage(img._dat,a1,a2),!0;if(arguments.length<=6)return this._ctx.drawImage(img._dat,a1,a2,a3,a4),!0;if(arguments.length<=10)return this._ctx.drawImage(img._dat,a1,a2,a3,a4,a5,a6,a7,a8),!0}catch(e){}return!1},Graphics.prototype.drawRect=function(x,y,w,h){return null!=this._ctx&&(this._ctx.strokeRect(x,y,w,h),!0)},Graphics.prototype.fillRect=function(x,y,w,h){return null!=this._ctx&&(this._ctx.fillRect(x,y,w,h),!0)},Graphics.prototype.drawPolygon=function(xa,ya,pn){if(null==this._ctx)return!1;this._ctx.beginPath(),this._ctx.moveTo(xa[0],ya[0]);for(var i=1;i<pn;i++)this._ctx.lineTo(xa[i],ya[i]);return this._ctx.closePath(),this._ctx.stroke(),!0},Graphics.prototype.fillPolygon=function(xa,ya,pn){if(null==this._ctx)return!1;this._ctx.beginPath(),this._ctx.moveTo(xa[0],ya[0]);for(var i=1;i<pn;i++)this._ctx.lineTo(xa[i],ya[i]);return this._ctx.closePath(),this._ctx.fill(),!0},Graphics.prototype.drawOval=function(x,y,w,h){return null!=this._ctx&&(this.drawArc(x,y,w,h,0,2*Math.PI),!0)},Graphics.prototype.fillOval=function(x,y,w,h){return null!=this._ctx&&(this.fillArc(x,y,w,h,0,2*Math.PI),!0)},Graphics.prototype.drawArc=function(x,y,w,h,angle,theta){if(null==this._ctx)return!1;var sc=h/w;return this._ctx.save(),this._ctx.beginPath(),this._ctx.scale(1,sc),this._ctx.arc(x+w/2,(y+h/2)/sc,w/2,angle,angle+theta,theta<0),this._ctx.stroke(),this._ctx.restore(),!0},Graphics.prototype.fillArc=function(x,y,w,h,angle,theta){if(null==this._ctx)return!1;var sc=h/w;return this._ctx.save(),this._ctx.beginPath(),this._ctx.scale(1,sc),this._ctx.arc(x+w/2,(y+h/2)/sc,w/2,angle,angle+theta,theta<0),this._ctx.lineTo(x+w/2,(y+h/2)/sc),this._ctx.closePath(),this._ctx.fill(),this._ctx.restore(),!0},Graphics.prototype.setGlobalAlpha=function(a){return null!=this._ctx&&(a<0&&(a=0),a>255&&(a=255),this._ctx.globalAlpha=a/255,!0)},Graphics.prototype.setColor=function(color){if(null==this._ctx)return!1;this._color=new Color(color.r,color.g,color.b,color.a);var val="rgba("+color.r+", "+color.g+", "+color.b+", "+color.a/255+")";return this._ctx.strokeStyle=val,this._ctx.fillStyle=val,!0},Graphics.prototype.setFont=function(font){if(null==this._ctx)return!1;var str="";return font._style&Font.ITALIC&&(str+="italic "),font._style&Font.BOLD&&(str+="bold "),str+=font._size+"px ",font._name==Font.SERIF?str+="serif":font._name==Font.SANS_SERIF?str+="sans-serif":font._name==Font.MONOSPACED?str+="monospace":font._name==Font.DIALOG?str+="'Helvetica','Arial','ＭＳ ゴシック','HG ゴシックB Sun','HG ゴシックB',monospace":str+='"'+font._name+'"',this._ctx.font=str,this._font=font,!0},Graphics.prototype.drawString=function(str,x,y){return null!=this._ctx&&(this._ctx.fillText(str,x,y),!0)},Graphics.prototype.translate=function(x,y){return null!=this._ctx&&(this._ctx.translate(x,y),!0)},Graphics.prototype.rotate=function(angle,x,y){return null!=this._ctx&&(1==arguments.length?this._ctx.rotate(angle):(this._ctx.translate(x,y),this._ctx.rotate(angle),this._ctx.translate(-x,-y)),!0)},Graphics.prototype.scale=function(x,y){return null!=this._ctx&&(this._ctx.scale(x,y),!0)},Graphics.prototype.setClip=function(pattern){if(null==this._ctx)return!1;if("ellipse"==pattern){var sc=arguments[4]/arguments[3];return this._ctx.beginPath(),this._ctx.save(),this._ctx.scale(1,sc),this._ctx.arc(arguments[1]+arguments[3]/2,(arguments[2]+arguments[4]/2)/sc,arguments[3]/2,0,2*Math.PI,!1),this._ctx.restore(),this._ctx.clip(),!0}if("rect"==pattern)return this._ctx.beginPath(),this._ctx.rect(arguments[1],arguments[2],arguments[3],arguments[4]),this._ctx.clip(),!0;if("polygon"==pattern){this._ctx.beginPath(),this._ctx.moveTo(arguments[1][0],arguments[2][0]);for(var i=1;i<arguments[3];i++)this._ctx.lineTo(arguments[1][i],arguments[2][i]);return this._ctx.closePath(),this._ctx.clip(),!0}return!1},Graphics.prototype.copyArea=function(x,y,width,height,dx,dy){return null!=this._ctx&&(this._ctx.drawImage(this._ctx.canvas,x,y,width,height,x+dx,y+dy,width,height),!0)},Graphics.prototype.dispose=function(){this._ctx.restore(),this._ctx.save()};function Color(r,g,b,a){this.r=r>255?255:r<0?0:r,this.g=g>255?255:g<0?0:g,this.b=b>255?255:b<0?0:b,4==arguments.length?this.a=a>255?255:a<0?0:a:this.a=255}Color.prototype.getRed=function(){return this.r},Color.prototype.getGreen=function(){return this.g},Color.prototype.getBlue=function(){return this.b},Color.white=new Color(255,255,255),Color.WHITE=Color.white,Color.lightGray=new Color(192,192,192),Color.LIGHT_GRAY=Color.lightGray,Color.gray=new Color(128,128,128),Color.GRAY=Color.gray,Color.darkGray=new Color(64,64,64),Color.DARK_GRAY=Color.darkGray,Color.black=new Color(0,0,0),Color.BLACK=Color.black,Color.red=new Color(255,0,0),Color.RED=Color.red,Color.pink=new Color(255,175,175),Color.PINK=Color.pink,Color.orange=new Color(255,200,0),Color.ORANGE=Color.orange,Color.yellow=new Color(255,255,0),Color.YELLOW=Color.yellow,Color.green=new Color(0,255,0),Color.GREEN=Color.green,Color.magenta=new Color(255,0,255),Color.MAGENTA=Color.magenta,Color.cyan=new Color(0,255,255),Color.CYAN=Color.cyan,Color.blue=new Color(0,0,255),Color.BLUE=Color.blue;function Font(name,style,size){this._name=name,this._style=style,this._size=size}Font.DIALOG="Dialog",Font.DIALOG_INPUT="DialogInput",Font.MONOSPACED="Monospaced",Font.SANS_SERIF="SansSerif",Font.SERIF="Serif",Font.PLAIN=0,Font.BOLD=1,Font.ITALIC=2;function KeyboardMenu(gamegraphics,gamekey,s){this.c=new Array(16),this.x=new Array(16),this.y=new Array(16),this.width=new Array(16),this.selectedIndex=new Array(16),this.item_kazu=new Array(16),this.message=new Array(16),this.item=createNDimensionArray(16,16),this.item_int=createNDimensionArray(16,16),this.item_color=new Array(16),this.list_IDlist=new Array(16),this.aw=-1,this.mode=0,this.kettei_c=0,this.cancel_c=0,this.gg=gamegraphics,this.gk=gamekey,this.name_crys=s,this.hi=this.gg.spt_img[0],this.hih=this.gg.spt_img,this.hg=this.gg.os_g,this.ap=this.gg.ap,this.initAll()}KeyboardMenu.prototype.initAll=function(){for(var i=0;i<=15;i++)this.init1(i);this.c_fc=0,this.gk.up_c=0,this.gk.down_c=0,this.aw=-1,this.kettei_c=2,this.cancel_c=2;for(var j=0;j<=15;j++)this.list_IDlist[j]=0;this.list_kazu=0,this.list_s=0},KeyboardMenu.prototype.init1=function(i){this.c[i]=0,this.x[i]=0,this.y[i]=0,this.width[i]=180,this.selectedIndex[i]=0,this.item_kazu[i]=0,this.message[i]="どうしますか？";for(var j=0;j<=15;j++)this.item[i][j]="";for(var k=0;k<=15;k++)this.item_int[i][k]=0},KeyboardMenu.prototype.setMessage=function(i,s){this.message[i]=s},KeyboardMenu.prototype.addItem=function(i,s){this.item[i][this.item_kazu[i]]=s,this.item_kazu[i]++},KeyboardMenu.prototype.addIntitem=function(i,j){this.item_int[i][this.item_kazu[i]]=j,this.item_kazu[i]++},KeyboardMenu.prototype.addItem2=function(i,s,j){this.item[i][this.item_kazu[i]]=s,this.item_int[i][this.item_kazu[i]]=j,this.item_kazu[i]++},KeyboardMenu.prototype.active=function(i,j,k,l){this.c[i]=100,this.x[i]=j,this.y[i]=k,this.width[i]=void 0!==l?l:180,this.c_fc=-1,this.gk.up_c=0,this.gk.down_c=0,this.aw=i,this.kettei_c=2,this.cancel_c=2},KeyboardMenu.prototype.activeSerifutuki=function(i,j,k,l,s){this.c[i]=700,this.x[i]=j,this.y[i]=k,this.width[i]=l,this.c_fc=-1,this.gk.up_c=0,this.gk.down_c=0,this.aw=i,this.kettei_c=2,this.cancel_c=2,this.item[i][15]=s},KeyboardMenu.prototype.activeKaimono=function(i,j,k,l){this.c[i]=900,this.x[i]=j,this.y[i]=k,this.width[i]=l,this.c_fc=-1,this.gk.up_c=0,this.gk.down_c=0,this.aw=i,this.kettei_c=2,this.cancel_c=2},KeyboardMenu.prototype.activeIchigyou=function(i,j,k,l){this.c[i]=300,this.x[i]=j,this.y[i]=k,this.width[i]=l,this.c_fc=-1,this.gk.up_c=0,this.gk.down_c=0,this.aw=i,this.kettei_c=2,this.cancel_c=2},KeyboardMenu.prototype.activeNigyou=function(i,j,k,l,color){this.c[i]=310,this.x[i]=j,this.y[i]=k,this.width[i]=l,this.item_color[i]=color,this.c_fc=-1,this.gk.up_c=0,this.gk.down_c=0,this.aw=i,this.kettei_c=2,this.cancel_c=2},KeyboardMenu.prototype.activeYongyou=function(i,j,k,l){this.c[i]=320,this.x[i]=j,this.y[i]=k,this.width[i]=l,this.c_fc=-1,this.gk.up_c=0,this.gk.down_c=0,this.aw=i,this.kettei_c=2,this.cancel_c=2},KeyboardMenu.prototype.activeYongyou2=function(i,j,k,l){this.c[i]=321,this.x[i]=j,this.y[i]=k,this.width[i]=l,this.c_fc=-1,this.gk.up_c=0,this.gk.down_c=0,this.aw=i,this.kettei_c=2,this.cancel_c=2},KeyboardMenu.prototype.activeSerifu=function(i,j,k,l,color){this.c[i]=330,this.x[i]=j,this.y[i]=k,this.width[i]=l,this.item_color[i]=color,this.c_fc=-1,this.gk.up_c=0,this.gk.down_c=0,this.aw=i,this.kettei_c=2,this.cancel_c=2},KeyboardMenu.prototype.activeYasumu=function(i,j,k){this.c[i]=1e3,this.x[i]=j,this.y[i]=k,this.width[i]=272,this.c_fc=-1,this.gk.up_c=0,this.gk.down_c=0,this.aw=i,this.kettei_c=2,this.cancel_c=2},KeyboardMenu.prototype.onKao=function(i,j,k,l,i1){this.c[i]=600,this.x[i]=j,this.y[i]=k,this.width[i]=l,this.item_int[i][0]=i1},KeyboardMenu.prototype.onMituketa=function(i,j,k){this.c[i]=610,this.x[i]=j,this.y[i]=k,this.width[i]=200},KeyboardMenu.prototype.onOkozukai=function(i,j,k,l,i1){this.c[i]=800,this.x[i]=j,this.y[i]=k,this.width[i]=l,this.item_int[i][0]=i1},KeyboardMenu.prototype.activeIchigyouTime=function(i,j,k,l){this.c[i]=350,this.x[i]=j,this.y[i]=k,this.width[i]=l,this.item_int[i][0]=100},KeyboardMenu.prototype.activeNigyouTime=function(i,j,k,l,color){this.c[i]=360,this.x[i]=j,this.y[i]=k,this.width[i]=l,this.item_color[i]=color,this.item_int[i][0]=100},KeyboardMenu.prototype.activeJibun=function(i,j,k,l,i1,j1,k1,l1){this.c[i]=400,this.x[i]=j,this.y[i]=k,this.item_int[14][0]=i1,this.item_int[14][1]=j1,this.item_int[14][2]=k1,this.item_int[14][3]=l1,this.width[i]=l,this.c_fc=-1,this.gk.up_c=0,this.gk.down_c=0,this.aw=i,this.kettei_c=2,this.cancel_c=2},KeyboardMenu.prototype.activeToujou=function(i,j,k,l,i1,s){this.c[i]=420,this.x[i]=j,this.y[i]=k,this.item_int[i][2]=i1,this.item[i][0]=s,this.width[i]=l,this.c_fc=-1,this.gk.up_c=0,this.gk.down_c=0,this.aw=i,this.kettei_c=2,this.cancel_c=2},KeyboardMenu.prototype.initCS=function(){this.item_kazu[0]=8,this.selectedIndex[0]=0},KeyboardMenu.prototype.activeCS=function(){this.c[0]=500,this.x[0]=0,this.y[0]=0,this.width[0]=0,this.c_fc=-1,this.gk.up_c=0,this.gk.down_c=0,this.aw=0,this.kettei_c=2},KeyboardMenu.prototype.off=function(i){this.c[i]=0},KeyboardMenu.prototype.offActivewindow=function(i,j){this.c[i]=0,this.c_fc=-1,this.gk.up_c=0,this.gk.down_c=0,this.aw=j,this.kettei_c=2,this.cancel_c=2},KeyboardMenu.prototype.move=function(){this.c_fc++,this.c_fc>6&&(this.c_fc=0),this.aw>=0&&(this.gk.up_f?(this.gk.up_c++,this.gk.up_c>3&&(this.gk.up_c=1)):this.gk.up_c=0,this.gk.down_f?(this.gk.down_c++,this.gk.down_c>3&&(this.gk.down_c=1)):this.gk.down_c=0,1==this.gk.up_c?(this.selectedIndex[this.aw]--,this.c_fc=-1,this.selectedIndex[this.aw]<0&&(this.selectedIndex[this.aw]=this.item_kazu[this.aw]-1)):1==this.gk.down_c&&(this.selectedIndex[this.aw]++,this.c_fc=-1,this.selectedIndex[this.aw]>this.item_kazu[this.aw]-1&&(this.selectedIndex[this.aw]=0))),this.gk.tr1_f?0==this.kettei_c&&(this.kettei_c=1):this.kettei_c=0,this.gk.x_f?0==this.cancel_c&&(this.cancel_c=1):this.cancel_c=0},KeyboardMenu.prototype.drawMenus=function(){this.hg.setFont(new Font("Dialog",0,12));for(var i=0;i<=15;i++){var l1=this.c[i];if(0!=l1)switch(l1){default:break;case 100:if(this.drawWindowbox(this.x[i],this.y[i],this.width[i],30+14*this.item_kazu[i]),this.hg.setColor(Color.white),this.hg.drawString(this.message[i],this.x[i]+24,this.y[i]+6+12),this.item_kazu[i]>=1)for(var j=0;j<=this.item_kazu[i]-1;j++)this.hg.drawString(this.item[i][j],this.x[i]+24,this.y[i]+6+18+14*j+12);i==this.aw?this.c_fc<=3&&this.hg.drawImage(this.hi[70],this.x[i]+6,this.y[i]+24+14*this.selectedIndex[i],this.ap):this.hg.drawImage(this.hi[70],this.x[i]+6,this.y[i]+24+14*this.selectedIndex[i],this.ap);break;case 200:this.hg.setColor(Color.white),this.hg.fillRect(12,12,128,58),this.hg.setColor(Color.black),this.hg.fillRect(14,14,124,54),this.hg.setColor(Color.cyan),this.hg.drawString(this.item[14][0],18,30),(this.item_int[14][0]<=0||this.item_int[14][2]<=0)&&(this.hg.setColor(Color.red),this.hg.drawString("戦闘不能",82,30)),this.hg.setColor(Color.white),this.hg.drawString("HP  "+this.item_int[14][0]+" / "+this.item_int[14][1],18,48),this.hg.drawString("PP  "+this.item_int[14][2]+" / "+this.item_int[14][3],18,62);break;case 210:this.hg.setColor(Color.white),this.hg.fillRect(160,12,128,58),this.hg.setColor(Color.black),this.hg.fillRect(162,14,124,54),this.hg.setColor(Color.green),this.hg.drawString(this.item[15][0],166,30),this.item_int[15][0]<=0&&(this.hg.setColor(Color.red),this.hg.drawString("戦闘不能",230,30)),this.hg.setColor(Color.white),this.hg.drawString("HP  "+this.item_int[15][0]+" / "+this.item_int[15][1],166,48),this.hg.drawString("PP  "+this.item_int[15][2]+" / "+this.item_int[15][3],166,62);break;case 220:this.hg.setColor(Color.white),this.hg.fillRect(372,12,128,58),this.hg.setColor(Color.black),this.hg.fillRect(374,14,124,54),this.hg.setColor(Color.cyan),this.hg.drawString(this.item[15][0],378,30),(this.item_int[15][0]<=0||this.item_int[15][2]<=0)&&(this.hg.setColor(Color.red),this.hg.drawString("戦闘不能",442,30)),this.hg.setColor(Color.white),this.hg.drawString("HP  "+this.item_int[15][0]+" / "+this.item_int[15][1],378,48),this.hg.drawString("PP  "+this.item_int[15][2]+" / "+this.item_int[15][3],378,62);break;case 300:this.drawWindowbox(this.x[i],this.y[i],this.width[i],40),this.hg.setColor(Color.white),this.hg.drawString(this.item[i][0],this.x[i]+6,this.y[i]+6+12),this.c_fc<=3&&this.gg.drawPT(this.x[i]+(this.width[i]-14>>1),this.y[i]+6+14+0+2,201,0);break;case 310:this.drawWindowbox(this.x[i],this.y[i],this.width[i],58),this.hg.setColor(this.item_color[i]),this.hg.drawString(this.item[i][0],this.x[i]+6,this.y[i]+6+12),this.hg.setColor(Color.white),this.hg.drawString(this.item[i][1],this.x[i]+6,this.y[i]+6+18+12),this.c_fc<=3&&this.gg.drawPT(this.x[i]+(this.width[i]-14>>1),this.y[i]+6+18+14+2,71,0);break;case 320:this.drawWindowbox(this.x[i],this.y[i],this.width[i],66+14*(this.item_kazu[i]-3)+14),this.hg.setColor(Color.magenta),this.hg.drawString(this.item[i][0],this.x[i]+6,this.y[i]+6+12),this.hg.setColor(Color.white),this.hg.drawString(this.item[i][1],this.x[i]+6,this.y[i]+6+18+12),this.hg.setColor(Color.cyan),this.hg.drawString(this.item[i][2],this.x[i]+6,this.y[i]+6+36+12),this.hg.setColor(Color.white);for(var k=0;k<=this.item_kazu[3]-4;k++)this.hg.drawString(this.item[3][k+3],this.x[3]+6,this.y[3]+6+54+14*k+12);this.c_fc<=3&&this.gg.drawPT(this.x[i]+(this.width[i]-14>>1),this.y[i]+6+18+36+14*(this.item_kazu[i]-3)+2,71,0);break;case 321:this.drawWindowbox(this.x[i],this.y[i],this.width[i],108),this.hg.setColor(Color.cyan),this.hg.drawString(this.item[i][0],this.x[i]+6,this.y[i]+6+12),this.hg.setColor(Color.white),this.hg.drawString(this.item[i][1],this.x[i]+6,this.y[i]+6+18+12),this.hg.setColor(Color.magenta),this.hg.drawString(this.item[i][2],this.x[i]+6,this.y[i]+6+36+12),this.hg.setColor(Color.white),this.hg.drawString(this.item[i][3],this.x[i]+6,this.y[i]+6+54+12),this.hg.setColor(Color.white),this.hg.drawString(this.item[i][4],this.x[i]+6,this.y[i]+6+54+14+12),this.c_fc<=3&&this.gg.drawPT(this.x[i]+(this.width[i]-14>>1),this.y[i]+6+18+36+14+14+2,71,0);break;case 330:if(this.drawWindowbox(this.x[i],this.y[i],this.width[i],30+14*(this.item_kazu[i]+1)),this.hg.setColor(this.item_color[i]),this.hg.drawString(this.message[i],this.x[i]+6,this.y[i]+6+12),this.hg.setColor(Color.white),this.item_kazu[i]>=1)for(var l=0;l<=this.item_kazu[i]-1;l++)this.hg.drawString(this.item[i][l],this.x[i]+6,this.y[i]+6+18+14*l+12);i==this.aw?this.c_fc<=3&&this.gg.drawPT(this.x[i]+(this.width[i]-14>>1),this.y[i]+6+18+14*this.item_kazu[i]+2,201,0):this.gg.drawPT(this.x[i]+(this.width[i]-14>>1),this.y[i]+6+18+14*this.item_kazu[i]+2,201,0);break;case 350:if(100==this.item_int[i][0]){this.item_int[i][0]=55;break}this.drawWindowbox(this.x[i],this.y[i],this.width[i],26),this.hg.setColor(Color.white),this.hg.drawString(this.item[i][0],this.x[i]+6,this.y[i]+6+12),this.item_int[i][0]--,this.item_int[i][0]<=0&&this.off(i);break;case 360:if(200==this.item_int[i][0]){this.drawWindowbox(this.x[i],this.y[i],this.width[i],44),this.hg.setColor(this.item_color[i]),this.hg.drawString(this.item[i][0],this.x[i]+6,this.y[i]+6+12),this.hg.setColor(Color.white),this.hg.drawString(this.item[i][1],this.x[i]+6,this.y[i]+6+18+12);break}if(100==this.item_int[i][0]){this.item_int[i][0]=55;break}this.drawWindowbox(this.x[i],this.y[i],this.width[i],44),this.hg.setColor(this.item_color[i]),this.hg.drawString(this.item[i][0],this.x[i]+6,this.y[i]+6+12),this.hg.setColor(Color.white),this.hg.drawString(this.item[i][1],this.x[i]+6,this.y[i]+6+18+12),this.item_int[i][0]--,this.item_int[i][0]<=0&&this.off(i);break;case 400:this.drawWindowbox(this.x[i],this.y[i],this.width[i],128),this.hg.setColor(Color.yellow),this.hg.drawString(this.name_crys+"のステータス",this.x[i]+6,this.y[i]+6+12),this.hg.setColor(Color.white),this.hg.drawString("HP  "+this.item_int[14][0]+" / "+this.item_int[14][1],this.x[i]+6,this.y[i]+6+18+0+12),this.hg.drawString("おこづかい  ",this.x[i]+6,this.y[i]+6+18+28+12),this.hg.drawString(this.item_int[14][2]+"円",this.x[i]+6+72,this.y[i]+6+18+42+12),this.hg.drawString("得点",this.x[i]+6,this.y[i]+6+18+56+12),this.hg.drawString(this.item_int[14][3]+"点",this.x[i]+6+72,this.y[i]+6+18+70+12),this.c_fc<=3&&this.gg.drawPT(this.x[i]+(this.width[i]-14>>1),this.y[i]+6+18+84+2,71,0);break;case 420:this.drawWindowbox(this.x[i],this.y[i],this.width[i],116),this.hg.setColor(new Color(96,96,96)),this.hg.fillRect(this.x[i]+12,this.y[i]+12,this.width[i]-24,48),this.gg.drawPT(this.x[i]+12+(this.width[i]-24-32>>1),this.y[i]+12+8,this.item_int[i][2],0),this.hg.setColor(Color.cyan),this.hg.drawString(this.item[i][0],this.x[i]+12,this.y[i]+64+12),this.hg.setColor(Color.white),this.hg.drawString("これからも、よろしくね！",this.x[i]+12,this.y[i]+68+14+12),this.c_fc<=3&&this.gg.drawPT(this.x[i]+(this.width[i]-14>>1),this.y[i]+68+28+2,71,0);break;case 410:if(-2==this.item_int[i][0]){this.drawWindowbox(this.x[i],this.y[i],this.width[i],116),this.hg.setColor(new Color(96,96,96)),this.hg.fillRect(this.x[i]+12,this.y[i]+12,this.width[i]-24,48),this.gg.drawPT(this.x[i]+12+(this.width[i]-24-32>>1),this.y[i]+12+8,this.item_int[i][2],0),this.hg.setColor(Color.yellow),this.hg.drawString(this.item[i][0],this.x[i]+12,this.y[i]+64+12),this.hg.setColor(Color.white),this.hg.drawString("捕獲不可能",this.x[i]+12,this.y[i]+68+14+12),this.c_fc<=3&&this.gg.drawPT(this.x[i]+(this.width[i]-14>>1),this.y[i]+68+28+2,71,0);break}if(this.item_int[i][0]<0){this.drawWindowbox(this.x[i],this.y[i],this.width[i],116),this.hg.setColor(new Color(96,96,96)),this.hg.fillRect(this.x[i]+12,this.y[i]+12,this.width[i]-24,48),this.gg.drawPT(this.x[i]+12+(this.width[i]-24-32>>1),this.y[i]+12+8,this.item_int[i][2],0),this.hg.setColor(Color.yellow),this.hg.drawString(this.item[i][0],this.x[i]+12,this.y[i]+64+12),this.hg.setColor(Color.white),this.hg.drawString("現在調査中",this.x[i]+12,this.y[i]+68+14+12),this.c_fc<=3&&this.gg.drawPT(this.x[i]+(this.width[i]-14>>1),this.y[i]+68+28+2,71,0);break}this.drawWindowbox(this.x[i],this.y[i],this.width[i],158),this.hg.setColor(new Color(96,96,96)),this.hg.fillRect(this.x[i]+12,this.y[i]+12,this.width[i]-24,48),this.gg.drawPT(this.x[i]+12+(this.width[i]-24-32>>1),this.y[i]+12+8,this.item_int[i][2],0),this.hg.setColor(Color.yellow),this.hg.drawString(this.item[i][0],this.x[i]+12,this.y[i]+64+12),this.hg.setColor(Color.white),this.hg.drawString("最大HP",this.x[i]+12,this.y[i]+68+14+12),this.hg.drawString(""+this.item_int[i][0],this.x[i]+56,this.y[i]+68+28+12),this.hg.drawString("最大PP",this.x[i]+12,this.y[i]+68+42+12),this.hg.drawString(""+this.item_int[i][1],this.x[i]+56,this.y[i]+68+56+12),this.c_fc<=3&&this.gg.drawPT(this.x[i]+(this.width[i]-14>>1),this.y[i]+68+70+2,71,0);break;case 500:this.c_fc<=3||0!=this.aw?this.hg.drawImage(this.hi[72],12+28*this.selectedIndex[i],288,this.ap):this.hg.drawImage(this.hi[73],12+28*this.selectedIndex[i],288,this.ap);break;case 600:this.drawWindowbox(this.x[i],this.y[i],this.width[i],96);var i2=this.item_int[i][0],j2=this.x[i]+(this.width[i]-64>>1),k2=this.y[i]+16;this.gg.drawPT(j2,k2,i2,0),this.gg.drawPT(j2+32,k2,i2+1,0),this.gg.drawPT(j2,k2+32,i2+10,0),this.gg.drawPT(j2+32,k2+32,i2+11,0);break;case 610:this.drawWindowbox(this.x[i],this.y[i],this.width[i],30+14*this.item_kazu[i]),this.hg.setColor(Color.yellow),this.hg.drawString("モンスターずかん",this.x[i]+6,this.y[i]+6+12),this.hg.setColor(Color.white),this.hg.drawString("見つけた数  "+this.item_int[i][0],this.x[i]+6,this.y[i]+6+18+0+12),this.hg.drawString("捕まえた数  "+this.item_int[i][1],this.x[i]+6,this.y[i]+6+18+14+12);break;case 700:if(this.drawWindowbox(this.x[i],this.y[i],this.width[i],30+14*this.item_kazu[i]+18),this.hg.setColor(Color.cyan),this.hg.drawString(this.item[i][15],this.x[i]+24,this.y[i]+6+12),this.hg.setColor(Color.white),this.hg.drawString(this.message[i],this.x[i]+24,this.y[i]+6+12+18),this.item_kazu[i]>=1)for(var i1=0;i1<=this.item_kazu[i]-1;i1++)this.hg.drawString(this.item[i][i1],this.x[i]+24,this.y[i]+6+18+14*i1+12+18);i==this.aw?this.c_fc<=3&&this.gg.drawPT(this.x[i]+6,this.y[i]+6+18+14*this.selectedIndex[i]+18,200,0):this.gg.drawPT(this.x[i]+6,this.y[i]+6+18+14*this.selectedIndex[i]+18,200,0);break;case 800:this.drawWindowbox(this.x[i],this.y[i],this.width[i],44),this.hg.setColor(Color.yellow),this.hg.drawString("おこづかい",this.x[i]+6,this.y[i]+6+12),this.hg.setColor(Color.white),this.hg.drawString(this.item_int[i][0]+"円",this.x[i]+6,this.y[i]+6+18+12);break;case 900:if(this.drawWindowbox(this.x[i],this.y[i],this.width[i],30+14*this.item_kazu[i]),this.hg.setColor(Color.white),this.hg.drawString(this.message[i],this.x[i]+24,this.y[i]+6+12),this.item_kazu[i]>=1)for(var j1=0;j1<=this.item_kazu[i]-1;j1++)this.hg.drawString(this.item[i][j1],this.x[i]+24,this.y[i]+6+18+14*j1+12),this.hg.drawString(""+this.item_int[i][j1],this.x[i]+24+116,this.y[i]+6+18+14*j1+12);i==this.aw?this.c_fc<=3&&this.gg.drawPT(this.x[i]+6,this.y[i]+6+18+14*this.selectedIndex[i],200,0):this.gg.drawPT(this.x[i]+6,this.y[i]+6+18+14*this.selectedIndex[i],200,0);break;case 1e3:this.drawWindowbox(this.x[i],this.y[i],this.width[i],98),this.hg.setColor(new Color(96,96,96)),this.hg.fillRect(this.x[i]+12,this.y[i]+12,248,48);for(var k1=0;k1<=5;k1++)this.item_int[i][k1]>0&&this.gg.drawPT(this.x[i]+12+8+40*k1,this.y[i]+12+8,this.item_int[i][k1],0);this.hg.setColor(Color.white),this.hg.drawString("みんな、元気になった。",this.x[i]+12,this.y[i]+64+12),this.c_fc<=3&&this.gg.drawPT(this.x[i]+(this.width[i]-14>>1),this.y[i]+64+14+2,71,0)}}},KeyboardMenu.prototype.drawWindowbox=function(i,j,k,l){this.hg.setColor(Color.white),this.hg.fillRect(i,j,k,l),this.hg.setColor(Color.black),this.hg.fillRect(i+2,j+2,k-4,l-4)};function MainProgram(gamegraphics,gamemouse,gamekey){this.ran_seed=void 0,this.ml_mode=0,this.ml_mode_c=0,this.score=0,this.highscore=0,this.score_1up_1=0,this.score_1up_2=0,this.score_1up_1_para=0,this.score_1up_2_para=0,this.score_v=!0,this.stage=1,this.stage_cc=0,this.stage_max=1,this.stage_kaishi=1,this.g_c1=0,this.g_c2=0,this.g_c3=0,this.g_ac=0,this.g_ac2=0,this.tr1_c=0,this.tr2_c=0,this.left_dcc=0,this.right_dcc=0,this.co_t=new Array(130),this.co_m=new Array(24),this.co_a=new Array(32),this.co_h=new Array(64),this.co_jm=new Array(2),this.vo_x=createNDimensionArray(32,4),this.vo_y=createNDimensionArray(32,4),this.j_zan_x=new Array(6),this.j_zan_y=new Array(6),this.j_zan_pt=new Array(6),this.j_zan_pth=new Array(6),this.vo_pa_x=new Array(6),this.vo_pa_y=new Array(6),this.stage_1up_f=new Array(3),this.shop_item_name=new Array(16),this.shop_item_teika=new Array(16),this.door_score=10,this.gg=gamegraphics,this.gm=gamemouse,this.gk=gamekey,this.maps=new MapSystem(200,100,this.gg,this),this.km=new KeyboardMenu(this.gg,this.gk,"まさお"),this.co_j=new CharacterObject;for(var i=0;i<=129;i++)this.co_t[i]=new CharacterObject;for(var j=0;j<=23;j++)this.co_m[j]=new CharacterObject;for(var k=0;k<=31;k++)this.co_a[k]=new CharacterObject;for(var l=0;l<=63;l++)this.co_h[l]=new CharacterObject;for(var i1=0;i1<=1;i1++)this.co_jm[i1]=new CharacterObject;this.co_b=new CharacterObject;2==this.paraInt("stage_select")?(this.stage_select=2,this.stage_max=4):this.stage_select=1,this.ig=new IdouGamen(this.gg,this.gk,this.km,this),this.ranInit(),this.hi=this.gg.spt_img[0],this.hih=this.gg.spt_img,this.hg=this.gg.os_g,this.ap=this.gg.ap,this.init1()}MainProgram.prototype.start=function(){this.ml_mode=50},MainProgram.prototype.paraInt=function(s){var i,s1=this.gg.ap.getParameter(s);return i=parseInt(s1),isNaN(i)&&(i=-1),i},MainProgram.prototype.addHighscoreEvent=function(highscoreeventhandler){return this.heh=highscoreeventhandler,!0},MainProgram.prototype.sendHighscore=function(){if("[object Function]"==Object.prototype.toString.call(this.heh)){var i=this.highscore;i<this.score&&(i=this.score),this.heh(i)}},MainProgram.prototype.moveGameCounter=function(){switch(this.g_c3){case 0:this.g_c3=1,this.g_c1=1,this.g_c2=1,this.g_ac=0,this.g_ac2=0;break;case 1:this.g_c3=2,this.g_c1=0,this.g_c2=2,this.g_ac=1,this.g_ac2=1;break;case 2:this.g_c3=3,this.g_c1=1,this.g_c2=3,this.g_ac=1,this.g_ac2=1;break;case 3:this.g_c3=4,this.g_c1=0,this.g_c2=0,this.g_ac=0,this.g_ac2=2;break;case 4:this.g_c3=5,this.g_c1=1,this.g_c2=1,this.g_ac=0,this.g_ac2=2;break;case 5:this.g_c3=6,this.g_c1=0,this.g_c2=2,this.g_ac=1,this.g_ac2=3;break;case 6:this.g_c3=7,this.g_c1=1,this.g_c2=3,this.g_ac=1,this.g_ac2=3;break;case 7:this.g_c3=0,this.g_c1=0,this.g_c2=0,this.g_ac=0,this.g_ac2=0}},MainProgram.prototype.ranInit=function(){this.ran_seed=4294967296*Math.random()|0},MainProgram.prototype.ranInt=function(i){var ran_seed=this.ran_seed;return ran_seed=((ran_seed=(ran_seed^ran_seed<<9)>>>0)^ran_seed>>>11)>>>0,this.ran_seed=ran_seed=(ran_seed^ran_seed<<19)>>>0,2.3283064365386963e-10*ran_seed*i|0},MainProgram.prototype.drawScore=function(){if(this.score_v)if(this.time_max>0){var j=rounddown(this.time/1e3),i1=14+this.moji_size;this.gg.os_g.setColor(this.gamecolor_score),this.gg.os_g.setFont(new Font("Dialog",1,this.moji_size));var s2;s2=this.j_left_shoki<=0&&this.j_left<=0?this.moji_score+" "+this.score+"    "+this.moji_highscore+" "+this.highscore+this.moji_time+j:(s2=this.moji_score+" "+this.score+"    "+this.moji_highscore+" "+this.highscore+this.moji_left+this.j_left)+this.moji_time+j,this.gg.os_g.drawString(s2,40,i1)}else{var j1=14+this.moji_size;this.gg.os_g.setColor(this.gamecolor_score),this.gg.os_g.setFont(new Font("Dialog",1,this.moji_size));var s3;s3=this.j_left_shoki<=0&&this.j_left<=0?this.moji_score+" "+this.score+"    "+this.moji_highscore+" "+this.highscore:this.moji_score+" "+this.score+"    "+this.moji_highscore+" "+this.highscore+this.moji_left+this.j_left,this.gg.os_g.drawString(s3,40,j1)}else if(this.time_max>0){var i=rounddown(this.time/1e3),k=14+this.moji_size;this.gg.os_g.setColor(this.gamecolor_score),this.gg.os_g.setFont(new Font("Dialog",1,this.moji_size));var s;s=this.j_left_shoki<=0&&this.j_left<=0?this.moji_time+i:(s=this.moji_left+this.j_left)+this.moji_time+i,this.gg.os_g.drawString(s,40,k)}else{var l=14+this.moji_size;this.gg.os_g.setColor(this.gamecolor_score),this.gg.os_g.setFont(new Font("Dialog",1,this.moji_size));var s1;s1=this.j_left_shoki<=0&&this.j_left<=0?"":this.moji_left+this.j_left,this.gg.os_g.drawString(s1,40,l)}},MainProgram.prototype.drawScore2=function(){if(this.score_v){var j=14+this.moji_size;this.gg.os_g.setColor(this.gamecolor_score),this.gg.os_g.setFont(new Font("Dialog",1,this.moji_size));var s1;s1=this.j_left_shoki<=0&&this.j_left<=0?this.moji_score+" "+this.score+"    "+this.moji_highscore+" "+this.highscore:this.moji_score+" "+this.score+"    "+this.moji_highscore+" "+this.highscore+this.moji_left+this.j_left,this.gg.os_g.drawString(s1,40,j)}else{var i=14+this.moji_size;this.gg.os_g.setColor(this.gamecolor_score),this.gg.os_g.setFont(new Font("Dialog",1,this.moji_size));var s;s=this.j_left_shoki<=0&&this.j_left<=0?"":this.moji_left+this.j_left,this.gg.os_g.drawString(s,40,i)}},MainProgram.prototype.addScore=function(i){this.score+=i,this.score_1up_1>0&&this.score>=this.score_1up_1&&(this.j_left++,this.score_1up_1=0),this.score_1up_2>0&&this.score>=this.score_1up_2&&(this.j_left++,this.score_1up_2=0)},MainProgram.prototype.addSerifu=function(i,j,k){for(var l=1;l<=k;l++){var i1,s=this.gg.ap.getParameter("serifu"+j+"-"+l);i1=parseInt(s),isNaN(i1)&&(i1=-1),0!=i1&&this.km.addItem(i,s)}},MainProgram.prototype.mL100=function(){if(this.moveGameCounter(),this.aMove(),100==this.co_j.c?this.jM100():this.jMove(),this.sl_step>0&&(10==this.sl_step||11==this.sl_step?(this.ks_wx+=this.sl_speed,this.ks_wx>this.maps.wx_max&&(this.ks_wx=this.maps.wx_max),this.maps.wx=this.ks_wx,this.maps.wy=this.ks_wy,300!=this.co_j.c&&310!=this.co_j.c&&(this.co_j.x<this.ks_wx-16?(this.co_j.x=this.ks_wx-16,this.co_j.vx<0&&(this.co_j.vx=0),(this.maps.getBGCode(this.co_j.x+15,this.co_j.y)>=20||this.maps.getBGCode(this.co_j.x+15,this.co_j.y+31)>=20)&&this.co_j.c>=100&&this.co_j.c<200&&(this.co_j.c=210,this.co_j.y=this.maps.wy-64,this.co_j.c1=0,this.j_jet_c=0,this.j_v_c=0)):this.co_j.x>this.ks_wx+496&&(this.co_j.x=this.ks_wx+496,this.co_j.vx=0,this.co_j.vx>0&&(this.co_j.vx=0))),11==this.sl_step&&this.maps.wx>=this.sl_wx&&(this.maps.wx=this.sl_wx,this.sl_wy=this.ks_wy,this.sl_step=3)):1==this.sl_step?this.maps.wx>=this.sl_wx&&(this.maps.wx=this.sl_wx,this.sl_step=2):2==this.sl_step?(this.maps.wx=this.sl_wx,this.co_j.x<this.sl_wx-16?(this.co_j.x=this.sl_wx-16,this.co_j.vx=0):this.co_j.x>this.sl_wx+496&&(this.co_j.x=this.sl_wx+496,this.co_j.vx=0),this.maps.wy>=this.sl_wy&&(this.maps.wy=this.sl_wy,this.sl_step=3)):(this.maps.wx=this.sl_wx,this.maps.wy=this.sl_wy,this.co_j.x<this.sl_wx-16?(this.co_j.x=this.sl_wx-16,this.co_j.vx=0):this.co_j.x>this.sl_wx+496&&(this.co_j.x=this.sl_wx+496,this.co_j.vx=0))),this.jm_kazu>0&&this.jmMove(),this.tMove(),this.co_b.c>0&&this.bMove(),this.m_kazu>0&&this.mMove(),this.time_max>0&&this.stage_cc<=0&&(this.time-=70,this.time<0&&(this.time=0,this.j_left--,this.j_left<0?(this.j_left=0,this.ml_mode=300):this.ml_mode=90)),this.stage_cc>0&&(this.stage_cc++,this.stage_cc>28&&(2==this.stage_select?this.stage>=4?this.ml_mode=400:(this.time_max>0&&this.addScore(rounddown(this.time/1e3)),this.ml_mode=260):this.stage>=this.stage_max?this.ml_mode=400:(this.stage++,this.time_max>0&&this.addScore(rounddown(this.time/1e3)),this.ml_mode=90))),this.drawGamescreen(),this.drawScore(),this.j_jet_fuel>0){var s=this.moji_jet+" "+this.j_jet_fuel;this.j_gr_kazu>0&&(s=1==this.j_gr_kazu?s+"    "+this.moji_grenade:s+"    "+this.moji_grenade+" "+this.j_gr_kazu),this.hg.drawString(s,40,287+this.moji_size)}else this.j_gr_kazu>0&&(1==this.j_gr_kazu?this.hg.drawString(this.moji_grenade,40,287+this.moji_size):this.hg.drawString(this.moji_grenade+" "+this.j_gr_kazu,40,287+this.moji_size));84==this.gk.key_code&&(this.gk.key_code=0,this.ml_mode=50)},MainProgram.prototype.mainLoop=function(){switch(this.ml_mode){default:break;case 50:this.gg.drawListImage(0,0,0),(this.score>0||this.highscore>0)&&this.drawScore(),this.gm.button_f||this.gk.tr1_f||(this.ml_mode=60,this.g_c1=0,this.sendHighscore());break;case 60:if(0==this.g_c1?118==this.gk.key_char&&(this.g_c1=1):1==this.g_c1?101==this.gk.key_char?this.g_c1=2:118!=this.gk.key_char&&(this.g_c1=0):2==this.g_c1&&(114==this.gk.key_char?this.ml_mode=1e3:101!=this.gk.key_char&&(this.g_c1=0)),!this.gm.button_f&&!this.gk.tr1_f)break;if(2==this.stage_select){this.init2(),this.ig.worldInit(),this.gg.os_g.setColor(Color.black),this.gg.os_g.fillRect(0,0,this.gg.di.width,this.gg.di.height),this.ml_mode=200;break}this.init2(),this.init3(),this.gg.drawListImage(0,0,0),(this.score>0||this.highscore>0)&&this.drawScore(),this.j_left<=0?this.ml_mode=100:this.ml_mode=90;break;case 80:this.init2(),this.init3(),this.gg.drawListImage(0,0,0),(this.score>0||this.highscore>0)&&this.drawScore(),this.j_left<=0?this.ml_mode=100:this.ml_mode=90;break;case 90:this.init3(),this.gg.os_g.setColor(this.gamecolor_kaishi),this.gg.os_g.fillRect(0,0,this.gg.di.width,this.gg.di.height),this.stage>=this.stage_max?(this.gg.drawPT(160,144,52,0),this.gg.drawPT(192,144,53,0),this.gg.drawPT(224,144,54,0),this.gg.drawPT(256,144,55,0),this.gg.drawPT(288,144,56,0),this.gg.drawPT(320,144,57,0)):(this.gg.drawPT(192,144,70,0),this.gg.drawPT(224,144,71,0),this.gg.drawPT(256,144,72,0),this.stage>=this.stage_max&&this.gg.drawPT(288,144,75,0),3==this.stage?this.gg.drawPT(288,144,75,0):2==this.stage?this.gg.drawPT(288,144,74,0):this.gg.drawPT(288,144,73,0)),this.drawScore(),this.ml_mode=91,this.ml_mode_c=0;break;case 91:this.ml_mode_c++,this.ml_mode_c>35&&(this.ml_mode=100),84==this.gk.key_code&&(this.gk.key_code=0,this.ml_mode=50);break;case 95:switch(this.stage=this.ig.checkStage(),this.init3(),this.ig.shop_kattaitem){case 7:default:break;case 0:this.j_gr_kazu=3;break;case 1:this.j_jet_fuel=80;break;case 2:this.j_drell_f=!0;break;case 3:this.j_helm_f=!0;break;case 4:this.j_tail_f=!0;break;case 5:this.j_v_c=150,this.j_v_kakudo=0;break;case 6:this.j_fire_f=!0;break;case 8:this.time_max>0&&(this.time+=3e4)}this.gg.os_g.setColor(Color.black),this.gg.os_g.fillRect(0,0,this.gg.di.width,this.gg.di.height),this.drawScore(),this.ml_mode=96,this.ml_mode_c=0;break;case 96:this.ml_mode_c++,this.ml_mode_c>8&&(this.ml_mode=100),84==this.gk.key_code&&(this.gk.key_code=0,this.ml_mode=50);break;case 200:this.ig.drawMap(),this.ig.mainProgram(),this.time=0,this.drawScore2(),110==this.ig.mp_mode&&(this.ig.dokan_khID>=1?this.ml_mode=230:this.ml_mode=95),84==this.gk.key_code&&(this.gk.key_code=0,this.ml_mode=50);break;case 230:this.gg.os_g.setColor(Color.black),this.gg.os_g.fillRect(0,0,this.gg.di.width,this.gg.di.height),this.drawScore2(),this.ml_mode=231,this.ml_mode_c=0;break;case 231:if(this.ml_mode_c++,5==this.ml_mode_c){var s;s=2==this.ig.dokan_khID?this.gg.ap.getParameter("url2"):3==this.ig.dokan_khID?this.gg.ap.getParameter("url3"):4==this.ig.dokan_khID?this.gg.ap.getParameter("url4"):this.gg.ap.getParameter("url1"),location.href=s}else this.ml_mode_c>80&&(this.ml_mode=50);84==this.gk.key_code&&(this.gk.key_code=0,this.ml_mode=50);break;case 250:this.addScore(0),this.ig.worldInit2(),this.ml_mode=251,this.ml_mode_c=0,this.gg.os_g.setColor(Color.black),this.gg.os_g.fillRect(0,0,this.gg.di.width,this.gg.di.height),this.drawScore();break;case 251:this.ml_mode_c++,this.ml_mode_c>8&&(this.ml_mode=200),84==this.gk.key_code&&(this.gk.key_code=0,this.ml_mode=50);break;case 260:this.addScore(0),this.ig.worldInit3(),this.ml_mode=261,this.ml_mode_c=0,this.gg.os_g.setColor(Color.black),this.gg.os_g.fillRect(0,0,this.gg.di.width,this.gg.di.height),this.drawScore();break;case 261:this.ml_mode_c++,this.ml_mode_c>8&&(this.ml_mode=200),84==this.gk.key_code&&(this.gk.key_code=0,this.ml_mode=50);break;case 300:this.gg.setBackcolor(Color.black),this.gg.fill(),this.gg.drawListImage(0,0,2),this.drawScore(),this.sendHighscore(),this.ml_mode=310,this.ml_mode_c=0;break;case 310:this.ml_mode_c++,this.ml_mode_c>45&&(this.ml_mode=50),84==this.gk.key_code&&(this.gk.key_code=0,this.ml_mode=50);break;case 400:this.gg.drawListImage(0,0,1),this.time_max>0&&this.addScore(rounddown(this.time/1e3)),this.drawScore(),this.sendHighscore(),this.ml_mode=410,this.ml_mode_c=0;break;case 410:this.ml_mode_c++,this.ml_mode_c>120&&(this.ml_mode=50),84==this.gk.key_code&&(this.gk.key_code=0,this.ml_mode=50);break;case 500:this.gg.setBackcolor(Color.black),this.gg.fill(),this.gg.drawListImage(0,0,0),(this.score>0||this.highscore>0)&&this.drawScore(),this.ml_mode=50,this.ml_mode=50;break;case 1e3:this.gg.setBackcolor(Color.black),this.gg.fill(),this.hg.setFont(new Font("Dialog",0,46)),this.hg.setColor(Color.white),this.hg.setFont(new Font("Dialog",0,20)),this.hg.drawString("Title        MASAO CONSTRUCTION",50,50),this.hg.drawString("Version      2.8",50,80),this.hg.drawString("Language     Java2  SDK 1.3.1",50,110),this.hg.drawString("OS           WindowsXP",50,140),this.hg.drawString("Browser      InternetExplorer 6.0",50,170),this.hg.drawString("Programing   Fukuda Naoto",50,200),this.hg.drawString("Date         2003/6",50,230),this.ml_mode=1010,this.ml_mode_c=0;break;case 1010:this.ml_mode_c++,this.ml_mode_c>40&&(this.ml_mode=50)}},MainProgram.prototype.init1=function(){this.time_max=this.paraInt("time_max");var k=this.paraInt("score_v");this.score_v=2!=k,k=this.paraInt("backcolor_red");var l=this.paraInt("backcolor_green"),i1=this.paraInt("backcolor_blue");k<0?k=0:k>255&&(k=255),l<0?l=0:l>255&&(l=255),i1<0?i1=0:i1>255&&(i1=255),this.gamecolor_back=new Color(k,l,i1),k=this.paraInt("backcolor_red_s"),l=this.paraInt("backcolor_green_s"),i1=this.paraInt("backcolor_blue_s"),k<0?k=0:k>255&&(k=255),l<0?l=0:l>255&&(l=255),i1<0?i1=0:i1>255&&(i1=255),this.gamecolor_back_s=new Color(k,l,i1),k=this.paraInt("backcolor_red_t"),l=this.paraInt("backcolor_green_t"),i1=this.paraInt("backcolor_blue_t"),k<0?k=0:k>255&&(k=255),l<0?l=0:l>255&&(l=255),i1<0?i1=0:i1>255&&(i1=255),this.gamecolor_back_t=new Color(k,l,i1),k=this.paraInt("backcolor_red_f"),l=this.paraInt("backcolor_green_f"),i1=this.paraInt("backcolor_blue_f"),k<0?k=0:k>255&&(k=255),l<0?l=0:l>255&&(l=255),i1<0?i1=0:i1>255&&(i1=255),this.gamecolor_back_f=new Color(k,l,i1),k=this.paraInt("kaishi_red"),l=this.paraInt("kaishi_green"),i1=this.paraInt("kaishi_blue"),k<0?k=0:k>255&&(k=255),l<0?l=0:l>255&&(l=255),i1<0?i1=0:i1>255&&(i1=255),this.gamecolor_kaishi=new Color(k,l,i1),k=this.paraInt("scorecolor_red"),l=this.paraInt("scorecolor_green"),i1=this.paraInt("scorecolor_blue"),k<0?k=0:k>255&&(k=255),l<0?l=0:l>255&&(l=255),i1<0?i1=0:i1>255&&(i1=255),this.gamecolor_score=new Color(k,l,i1),k=this.paraInt("grenade_red1"),l=this.paraInt("grenade_green1"),i1=this.paraInt("grenade_blue1"),k<0?k=0:k>255&&(k=255),l<0?l=0:l>255&&(l=255),i1<0?i1=0:i1>255&&(i1=255),this.gamecolor_grenade1=new Color(k,l,i1),k=this.paraInt("grenade_red2"),l=this.paraInt("grenade_green2"),i1=this.paraInt("grenade_blue2"),k<0?k=0:k>255&&(k=255),l<0?l=0:l>255&&(l=255),i1<0?i1=0:i1>255&&(i1=255),this.gamecolor_grenade2=new Color(k,l,i1),k=this.paraInt("firebar_red1"),l=this.paraInt("firebar_green1"),i1=this.paraInt("firebar_blue1"),k<0?k=0:k>255&&(k=255),l<0?l=0:l>255&&(l=255),i1<0?i1=0:i1>255&&(i1=255),this.gamecolor_firebar1=new Color(k,l,i1),k=this.paraInt("firebar_red2"),l=this.paraInt("firebar_green2"),i1=this.paraInt("firebar_blue2"),k<0?k=0:k>255&&(k=255),l<0?l=0:l>255&&(l=255),i1<0?i1=0:i1>255&&(i1=255),this.gamecolor_firebar2=new Color(k,l,i1),k=this.paraInt("mizunohadou_red"),l=this.paraInt("mizunohadou_green"),i1=this.paraInt("mizunohadou_blue"),k<0?k=0:k>255&&(k=255),l<0?l=0:l>255&&(l=255),i1<0?i1=0:i1>255&&(i1=255),this.gamecolor_mizunohadou=new Color(k,l,i1),this.moji_score=this.gg.ap.getParameter("moji_score"),this.moji_highscore=this.gg.ap.getParameter("moji_highscore"),this.moji_time=this.gg.ap.getParameter("moji_time"),this.moji_time="    "+this.moji_time+" ",this.moji_jet=this.gg.ap.getParameter("moji_jet"),this.moji_grenade=this.gg.ap.getParameter("moji_grenade"),this.moji_left=this.gg.ap.getParameter("moji_left"),this.moji_left="    "+this.moji_left+" ",this.moji_size=this.paraInt("moji_size"),this.moji_size<10?this.moji_size=10:this.moji_size>30&&(this.moji_size=30),this.j_left_shoki=this.paraInt("jibun_left_shoki"),this.j_left_shoki<1&&(this.j_left_shoki=1),this.j_left_shoki--,this.stage_max=this.paraInt("stage_max"),this.stage_max<1?this.stage_max=1:this.stage_max>4&&(this.stage_max=4),2==this.stage_select&&(this.stage_max=4),this.stage_kaishi=this.paraInt("stage_kaishi"),this.stage_kaishi<1&&(this.stage_kaishi=1),this.stage_kaishi>this.stage_max&&(this.stage_kaishi=this.stage_max),this.score_1up_1_para=this.paraInt("score_1up_1"),(this.score_1up_1_para<0||this.stage_max<=1)&&(this.score_1up_1_para=0),this.score_1up_2_para=this.paraInt("score_1up_2"),(this.score_1up_2_para<0||this.stage_max<=1)&&(this.score_1up_2_para=0),this.j_tail_type=this.paraInt("j_tail_type"),(this.j_tail_type<1||this.j_tail_type>3)&&(this.j_tail_type=1);var i=this.paraInt("j_tail_hf");this.j_tail_hf=2==i,this.grenade_type=this.paraInt("grenade_type"),(this.grenade_type<1||this.grenade_type>6)&&(this.grenade_type=1),this.suberuyuka_hkf=this.paraInt("suberuyuka_hkf"),2==this.suberuyuka_hkf?this.suberuyuka_hkf=2:this.suberuyuka_hkf=1,i=this.paraInt("j_fire_mkf"),this.j_fire_mkf=2==i,i=this.paraInt("dengeki_mkf"),this.dengeki_mkf=2==i,i=this.paraInt("yachamo_kf"),this.yachamo_cf=2==i,i=this.paraInt("airms_kf"),this.airms_kf=2==i,this.ugokuyuka1_type=this.paraInt("ugokuyuka1_type"),(this.ugokuyuka1_type<1||this.ugokuyuka1_type>7)&&(this.ugokuyuka1_type=1),this.ugokuyuka2_type=this.paraInt("ugokuyuka2_type"),(this.ugokuyuka2_type<1||this.ugokuyuka2_type>7)&&(this.ugokuyuka2_type=1),this.ugokuyuka3_type=this.paraInt("ugokuyuka3_type"),(this.ugokuyuka3_type<1||this.ugokuyuka3_type>7)&&(this.ugokuyuka3_type=1),this.boss_type=this.paraInt("boss_type"),(this.boss_type<1||this.boss_type>4)&&(this.boss_type=1),this.boss2_type=this.paraInt("boss2_type"),(this.boss2_type<1||this.boss2_type>2)&&(this.boss2_type=1),this.boss3_type=this.paraInt("boss3_type"),(this.boss3_type<1||this.boss3_type>4)&&(this.boss3_type=1),this.dokan_mode=this.paraInt("dokan_mode"),(this.dokan_mode<1||this.dokan_mode>2)&&(this.dokan_mode=1),this.mes1_name=this.gg.ap.getParameter("mes1_name"),this.mes2_name=this.gg.ap.getParameter("mes2_name"),this.shop_name=this.gg.ap.getParameter("shop_name"),this.setumei_name=this.gg.ap.getParameter("setumei_name"),this.door_score=this.paraInt("door_score"),this.door_score<10&&(this.door_score=10),this.shop_item_name[0]=this.gg.ap.getParameter("shop_item_name1"),this.shop_item_name[1]=this.gg.ap.getParameter("shop_item_name2"),this.shop_item_name[2]=this.gg.ap.getParameter("shop_item_name3"),this.shop_item_name[3]=this.gg.ap.getParameter("shop_item_name4"),this.shop_item_name[4]=this.gg.ap.getParameter("shop_item_name5"),this.shop_item_name[5]=this.gg.ap.getParameter("shop_item_name6"),this.shop_item_name[6]=this.gg.ap.getParameter("shop_item_name7"),this.shop_item_name[7]=this.gg.ap.getParameter("shop_item_name8"),this.shop_item_name[8]=this.gg.ap.getParameter("shop_item_name9");for(var j1=0;j1<=8;j1++){var j=j1+1;(j=this.paraInt("shop_item_teika"+j))<0&&(j=0),this.shop_item_teika[j1]=j}},MainProgram.prototype.init2=function(){this.score>this.highscore&&(this.highscore=this.score),this.j_left=this.j_left_shoki,this.score_1up_1=this.score_1up_1_para,this.score_1up_2=this.score_1up_2_para;for(var i=0;i<=2;i++)this.stage_1up_f[i]=!0;this.gk.key_code=0,this.score=0,this.stage=this.stage_kaishi,this.time_max>0?this.time=1e3*this.time_max+1e3-70:this.time=0},MainProgram.prototype.init3=function(){this.sendHighscore(),this.g_c1=0,this.g_c2=0,this.g_c3=0,this.g_ac=0,this.g_ac2=0,this.stage_cc=0,this.co_j.init(),this.co_j.c=100,this.co_j.x=100,this.co_j.y=100,this.co_j.pt=100,this.co_j.muki=1,this.co_j.jimen_f=!1,this.j_hashiru_f=!1,this.j_jump_level=0,this.j_jump_type=0,this.j_a_id=-1,this.tr1_c=0,this.tr2_c=0,this.gk.left_c=0,this.gk.right_c=0,this.left_dcc=0,this.right_dcc=0,this.ochiru_y=9999,this.j_fire_f=!1,this.j_v_c=0,this.j_v_kakudo=0,this.j_jet_c=0,this.j_jet_kf=!1,this.j_jet_fuel=0,this.j_helm_f=!1,this.j_drell_f=!1,this.j_tail_f=!1,this.j_tail_ac=0,this.j_gr_kazu=0,this.j_mizu_f=!1,this.j_mizu_ac=0,this.j_mizu_awa_c=0,this.j_jdai_f=!1,this.hitokoto_c=0,this.hitokoto_num=1,this.j_tail_hf&&(this.j_tail_f=!0);for(var i=0;i<=5;i++)this.j_zan_x[i]=0,this.j_zan_y[i]=0,this.j_zan_pt[i]=0,this.j_zan_pth[i]=0;this.j_zan_p=0,this.j_zan_c=0,this.j_zan_nagasa=0,this.j_zan_f=!1,this.sl_step=0,this.sl_speed=0,this.sl_wx=0,this.sl_wy=0;var l1;2==(l1=2==this.stage?this.paraInt("scroll_mode_s"):3==this.stage?this.paraInt("scroll_mode_t"):4==this.stage?this.paraInt("scroll_mode_f"):this.paraInt("scroll_mode"))?(this.sl_step=10,this.ks_wx=32,this.ks_wy=960,this.sl_speed=2):3==l1&&(this.sl_step=10,this.ks_wx=32,this.ks_wy=960,this.sl_speed=4);for(var j=0;j<=31;j++){this.co_a[j].init();for(var k1=0;k1<=3;k1++)this.vo_x[j][k1]=0,this.vo_y[j][k1]=0}this.a_kazu=-1,this.a_hf=!1;for(var k=0;k<=129;k++)this.co_t[k].init();this.t_kazu=-1,this.co_b.init(),this.boss_kijyun_y=0;for(var l=0;l<=23;l++)this.co_m[l].init();this.m_kazu=0;for(var i1=0;i1<=1;i1++)this.co_jm[i1].init();this.jm_kazu=0;for(var j1=0;j1<=63;j1++)this.co_h[j1].init();this.time_max>0?this.time=1e3*this.time_max+1e3-70:this.time=0,this.mapsMakeStageData(100+this.stage),10!=this.sl_step&&11!=this.sl_step||(this.ks_wx=this.maps.wx,this.ks_wx<=128&&(this.ks_wx=32)),this.maps.drawMap(this.maps.wx,this.maps.wy)},MainProgram.prototype.mapsMakeStageData=function(i){this.maps.init();var as=this.maps.map_string;this.maps.wx=32,this.maps.wy=32,this.maps.wx_mini=32,this.maps.wy_mini=320,this.maps.wx_max=5856,this.maps.wy_max=6048;switch(this.gg.setBackcolor(Color.blue),i){default:break;case 101:this.maps.setBank(0),this.gg.setBackcolor(this.gamecolor_back),this.maps.wx_max=5280,this.maps.wy_max=960;for(var i1=0;i1<=29;i1++){var s="."+this.gg.ap.getParameter("map0-"+i1);s+=this.gg.ap.getParameter("map1-"+i1),s+=this.gg.ap.getParameter("map2-"+i1),as[i1+10]=s}break;case 102:this.maps.setBank(0),this.gg.setBackcolor(this.gamecolor_back_s),this.maps.wx_max=5280,this.maps.wy_max=960;for(var j1=0;j1<=29;j1++){var s1="."+this.gg.ap.getParameter("map0-"+j1+"-s");s1+=this.gg.ap.getParameter("map1-"+j1+"-s"),s1+=this.gg.ap.getParameter("map2-"+j1+"-s"),as[j1+10]=s1}break;case 103:this.maps.setBank(0),this.gg.setBackcolor(this.gamecolor_back_t),this.maps.wx_max=5280,this.maps.wy_max=960;for(var k1=0;k1<=29;k1++){var s2="."+this.gg.ap.getParameter("map0-"+k1+"-t");s2+=this.gg.ap.getParameter("map1-"+k1+"-t"),s2+=this.gg.ap.getParameter("map2-"+k1+"-t"),as[k1+10]=s2}break;case 104:this.maps.setBank(0),this.gg.setBackcolor(this.gamecolor_back_f),this.maps.wx_max=5280,this.maps.wy_max=960;for(var l1=0;l1<=29;l1++){var s3="."+this.gg.ap.getParameter("map0-"+l1+"-f");s3+=this.gg.ap.getParameter("map1-"+l1+"-f"),s3+=this.gg.ap.getParameter("map2-"+l1+"-f"),as[l1+10]=s3}}for(var i2=0;i2<this.maps.height;i2++)if(as[i2].length<this.maps.width)for(var j=as[i2].length;j<this.maps.width;j++)as[i2]+=".";for(var j2=0;j2<this.maps.height;j2++)for(var k=0;k<this.maps.width;k++){var c=as[j2].charAt(k),word0=-1;"."!=c&&("1"==c?word0=1:"2"==c?word0=2:"3"==c?word0=3:"4"==c?word0=4:"5"==c?word0=5:"6"==c?word0=6:"7"==c?word0=7:"8"==c?word0=8:"9"==c?word0=9:"a"==c?word0=20:"b"==c?word0=21:"c"==c?word0=22:"d"==c?word0=23:"e"==c?word0=24:"f"==c?word0=25:"g"==c?word0=26:"h"==c?word0=27:"i"==c?word0=28:"j"==c?word0=29:"k"==c?(word0=40,this.hSet(k,j2,100)):"l"==c?(word0=40,this.hSet(k,j2,200)):"m"==c?(word0=40,this.hSet(k,j2,300)):"n"==c?(word0=40,this.hSet(k,j2,400)):"o"==c?(word0=40,this.hSet(k,j2,500)):"p"==c?(word0=40,this.hSet(k,j2,600)):"q"==c?(word0=40,this.hSet(k,j2,700)):"r"==c?(word0=40,this.hSet(k,j2,800)):"s"==c?(word0=40,this.hSet(k,j2,900)):"t"==c?(word0=40,this.hSet(k,j2,1e3)):"u"==c?(this.aSet(32*k,32*j2,300,32*k),4==this.maps.map_bg[k-1][j2]&&(word0=4)):"v"==c?(this.aSet(32*k,32*j2,310,32*k),4==this.maps.map_bg[k-1][j2]&&(word0=4)):"w"==c?(this.aSet(32*k,32*j2,320,32*k),4==this.maps.map_bg[k-1][j2]&&(word0=4)):"x"==c?(this.aSet(32*k,32*j2,330,32*k),4==this.maps.map_bg[k-1][j2]&&(word0=4)):"y"==c?this.stage_1up_f[this.stage-1]?(word0=40,this.hSet(k,j2,1100)):word0=41:"z"==c?word0=69:"+"==c?(this.aSet(32*k,32*j2,80,32*k),4==this.maps.map_bg[k-1][j2]&&(word0=4)):"-"==c?(this.aSet(32*k,32*j2,81,32*k),4==this.maps.map_bg[k-1][j2]&&(word0=4)):"*"==c?(this.aSet(32*k,32*j2,82,32*k),4==this.maps.map_bg[k-1][j2]&&(word0=4)):"/"==c?(this.aSet(32*k,32*j2,83,32*k),4==this.maps.map_bg[k-1][j2]&&(word0=4)):"A"==c?(this.co_j.x=32*k,this.co_j.y=32*j2,4==this.maps.map_bg[k-1][j2]&&(word0=4)):"B"==c?(this.tSet(32*k,32*j2,100,32*k-512-32),4==this.maps.map_bg[k-1][j2]&&(word0=4)):"C"==c?(this.tSet(32*k,32*j2,110,32*k-512-32),4==this.maps.map_bg[k-1][j2]&&(word0=4)):"D"==c?(this.tSet(32*k,32*j2,110,32*k-512-32),this.tSet(32*k+75,32*j2,110,32*k-512-32),this.tSet(32*k+150,32*j2,110,32*k-512-32),4==this.maps.map_bg[k-1][j2]&&(word0=4)):"E"==c?(this.tSet(32*k,32*j2,200,32*k-512-32),4==this.maps.map_bg[k-1][j2]&&(word0=4)):"F"==c?(this.tSet(32*k,32*j2,300,32*k-512-32),4==this.maps.map_bg[k-1][j2]&&(word0=4)):"G"==c?(this.tSet(32*k,32*j2,400,32*k-512-32),4==this.maps.map_bg[k-1][j2]&&(word0=4)):"H"==c?(this.tSet(32*k,32*j2,500,32*k-512-32),4==this.maps.map_bg[k-1][j2]&&(word0=4)):"I"==c?(this.tSet(32*k,32*j2,510,32*k-512-32),4==this.maps.map_bg[k-1][j2]&&(word0=4)):"J"==c?(this.tSet(32*k,32*j2,510,32*k-512-32-32),this.tSet(32*k+80,32*j2-40,510,32*k-512-32-32),this.tSet(32*k+140,32*j2+38,510,32*k-512-32-32),4==this.maps.map_bg[k-1][j2]&&(word0=4)):"K"==c?(2==this.ugokuyuka1_type?this.aSet(32*k,32*j2,500,32*k):3==this.ugokuyuka1_type?this.aSet(32*k,32*j2,510,32*k):4==this.ugokuyuka1_type?this.aSet(32*k,32*j2,120,32*k):5==this.ugokuyuka1_type?this.aSet(32*k,32*j2,121,32*k):6==this.ugokuyuka1_type?this.aSet(32*k,32*j2,600,32*k):7==this.ugokuyuka1_type?this.aSet(32*k,32*j2,700,32*k):this.aSet(32*k,32*j2,100,32*k),4==this.maps.map_bg[k-1][j2]&&(word0=4)):"L"==c?(2==this.ugokuyuka2_type?this.aSet(32*k,32*j2,500,32*k):3==this.ugokuyuka2_type?this.aSet(32*k,32*j2,510,32*k):4==this.ugokuyuka2_type?this.aSet(32*k,32*j2,120,32*k):5==this.ugokuyuka2_type?this.aSet(32*k,32*j2,121,32*k):6==this.ugokuyuka2_type?this.aSet(32*k,32*j2,600,32*k):7==this.ugokuyuka2_type?this.aSet(32*k,32*j2,700,32*k):this.aSet(32*k,32*j2+9,110,32*k-16),4==this.maps.map_bg[k-1][j2]&&(word0=4)):"M"==c?(2==this.ugokuyuka3_type?this.aSet(32*k,32*j2,500,32*k):3==this.ugokuyuka3_type?this.aSet(32*k,32*j2,510,32*k):4==this.ugokuyuka3_type?this.aSet(32*k,32*j2,120,32*k):5==this.ugokuyuka3_type?this.aSet(32*k,32*j2,121,32*k):6==this.ugokuyuka3_type?this.aSet(32*k,32*j2,600,32*k):7==this.ugokuyuka3_type?this.aSet(32*k,32*j2,700,32*k):(this.aSet(32*k,32*j2+9,115,32*k-16),this.aSet(32*k,32*j2+9,116,32*k-16)),4==this.maps.map_bg[k-1][j2]&&(word0=4)):"N"==c?(this.aSet(32*k-32,32*j2,400,32*k),4==this.maps.map_bg[k-1][j2]&&(word0=4)):"O"==c?(this.tSet(32*k,32*j2,600,32*k-512-32),4==this.maps.map_bg[k-1][j2]&&(word0=4)):"P"==c?(this.tSet(32*k,32*j2,700,32*k-512-32),4==this.maps.map_bg[k-1][j2]&&(word0=4)):"Q"==c?(this.tSet(32*k,32*j2,800,32*k-512-32),4==this.maps.map_bg[k-1][j2]&&(word0=4)):"R"==c?(this.tSet(32*k,32*j2,900,32*k-512-32),4==this.maps.map_bg[k-1][j2]&&(word0=4)):"S"==c?(this.co_b.c=100,this.co_b.c4=3,this.co_b.x=32*k,this.co_b.y=32*j2-16,4==this.maps.map_bg[k-1][j2]&&(word0=4),this.co_b.x<448?this.co_b.x=448:this.co_b.x>5664&&(this.co_b.x=5664),10==this.sl_step?this.sl_step=11:this.sl_step=1,this.sl_wx=this.co_b.x-384,this.sl_wy=960):"T"==c?(this.co_b.c=200,this.co_b.c4=3,this.co_b.x=32*k,this.co_b.y=32*j2-16,4==this.maps.map_bg[k-1][j2]&&(word0=4),this.co_b.x<448?this.co_b.x=448:this.co_b.x>5664&&(this.co_b.x=5664),10==this.sl_step?this.sl_step=11:this.sl_step=1,this.sl_wx=this.co_b.x-384,this.sl_wy=960):"U"==c?(this.aSet(32*k+16,32*j2+16,70,32*k),word0=50):"V"==c?(this.aSet(32*k+16,32*j2+16,71,32*k),word0=50):"W"==c?(this.tSet(32*k,32*j2-16,1e3,32*k-512-32-32),word0=4):"X"==c?(this.tSet(32*k,32*j2,1100,32*k-512-32),word0=4):"Y"==c?(this.aSet(32*k,32*j2,60,32*k),4==this.maps.map_bg[k-1][j2]&&(word0=4)):"Z"==c&&(this.co_b.c=300,this.co_b.c4=3,this.co_b.x=32*k,this.co_b.y=32*j2-16,this.boss_kijyun_y=this.co_b.y,4==this.maps.map_bg[k-1][j2]&&(word0=4),this.co_b.x<448?this.co_b.x=448:this.co_b.x>5664&&(this.co_b.x=5664),10==this.sl_step?this.sl_step=11:this.sl_step=1,this.sl_wx=this.co_b.x-384,this.sl_wy=960),word0>=0&&(this.maps.map_bg[k][j2]=word0))}for(var l=0;l<=this.maps.width-1;l++)this.maps.map_bg[l][0]=21,this.maps.map_bg[l][this.maps.height-1]=21;for(var k2=0;k2<=this.maps.height-1;k2++)this.maps.map_bg[0][k2]=21,this.maps.map_bg[181][k2]=21,this.maps.map_bg[199][k2]=21;this.ochiru_y=this.maps.wy_max+320,this.maps.wx=this.co_j.x-96,this.maps.wy=this.co_j.y-176,this.maps.wx<this.maps.wx_mini?this.maps.wx=this.maps.wx_mini:this.maps.wx>this.maps.wx_max&&(this.maps.wx=this.maps.wx_max),this.maps.wy<this.maps.wy_mini?this.maps.wy=this.maps.wy_mini:this.maps.wy>this.maps.wy_max&&(this.maps.wy=this.maps.wy_max),this.co_j.wx=this.co_j.x-this.maps.wx,this.co_j.wy=this.co_j.y-this.maps.wy},MainProgram.prototype.drawGamescreen=function(){this.maps.drawMapScroll(this.g_ac2);var i3=this.maps.wx,j3=this.maps.wy;if(this.co_j.wx=this.co_j.x-this.maps.wx,this.co_j.wy=this.co_j.y-this.maps.wy,this.a_hf)for(var i=0;i<=this.a_kazu;i++)if(this.co_a[i].gf){var characterobject=this.co_a[i],j5=characterobject.x-i3,i7=characterobject.y-j3;switch(characterobject.pt){default:break;case 100:this.hg.drawImage(this.hi[190],j5,i7,this.ap),this.hg.drawImage(this.hi[191],j5+32,i7,this.ap),this.hg.drawImage(this.hi[192],j5+64,i7,this.ap);break;case 200:this.hg.drawImage(this.hi[76],j5,i7,this.ap),this.hg.drawImage(this.hi[77],j5+32,i7,this.ap),this.hg.drawImage(this.hi[86],j5,i7+32,this.ap),this.hg.drawImage(this.hi[87],j5+32,i7+32,this.ap);break;case 210:this.hg.drawImage(this.hi[78],j5,i7,this.ap),this.hg.drawImage(this.hi[79],j5+32,i7,this.ap),this.hg.drawImage(this.hi[88],j5,i7+32,this.ap),this.hg.drawImage(this.hi[89],j5+32,i7+32,this.ap);break;case 300:this.hg.drawImage(this.hi[60],j5,i7,this.ap),this.hg.drawImage(this.hi[61],j5+32,i7,this.ap);break;case 310:this.hg.drawImage(this.hi[62],j5,i7,this.ap),this.hg.drawImage(this.hi[63],j5+32,i7,this.ap);break;case 320:this.hg.drawImage(this.hi[64],j5,i7,this.ap),this.hg.drawImage(this.hi[65],j5+32,i7,this.ap);break;case 330:this.hg.drawImage(this.hi[66],j5,i7,this.ap),this.hg.drawImage(this.hi[67],j5+32,i7,this.ap);break;case 400:this.hg.drawImage(this.hi[183],j5,i7,this.ap),this.hg.drawImage(this.hi[184],j5+32,i7,this.ap),this.hg.drawImage(this.hi[185],j5+64,i7,this.ap),this.hg.drawImage(this.hi[193],j5,i7+32,this.ap),this.hg.drawImage(this.hi[194],j5+32,i7+32,this.ap),this.hg.drawImage(this.hi[195],j5+64,i7+32,this.ap);break;case 500:this.hg.drawImage(this.hi[180],j5,i7,this.ap),this.hg.drawImage(this.hi[181],j5+32,i7,this.ap),this.hg.drawImage(this.hi[182],j5+64,i7,this.ap);break;case 600:this.hg.drawImage(this.hi[188],j5,i7,this.ap),this.hg.drawImage(this.hi[189],j5+32,i7,this.ap),this.hg.drawImage(this.hi[198],j5,i7+32,this.ap),this.hg.drawImage(this.hi[199],j5+32,i7+32,this.ap);break;case 605:this.hg.drawImage(this.hih[1][189],j5,i7,this.ap),this.hg.drawImage(this.hih[1][188],j5+32,i7,this.ap),this.hg.drawImage(this.hih[1][199],j5,i7+32,this.ap),this.hg.drawImage(this.hih[1][198],j5+32,i7+32,this.ap);break;case 700:this.hg.drawImage(this.hi[32],j5,i7,this.ap);break;case 710:this.hg.drawImage(this.hi[33],j5,i7,this.ap);break;case 720:this.hg.drawImage(this.hi[34],j5,i7,this.ap);break;case 800:characterobject.x>=this.co_j.x?this.hg.drawImage(this.hi[35+characterobject.c3],j5,i7,this.ap):this.hg.drawImage(this.hih[1][35+characterobject.c3],j5,i7,this.ap);break;case 1100:var k5=Math.floor(16*Math.cos(6.283185307179586*(characterobject.c3+90)/360)),j7=Math.floor(16*Math.sin(6.283185307179586*(characterobject.c3+90)/360));if(this.vo_pa_x[0]=this.vo_x[i][0]-i3+k5,this.vo_pa_y[0]=this.vo_y[i][0]-j3+j7,this.vo_pa_x[1]=this.vo_x[i][0]-i3-k5,this.vo_pa_y[1]=this.vo_y[i][0]-j3-j7,this.vo_pa_x[2]=this.vo_x[i][1]-i3-k5,this.vo_pa_y[2]=this.vo_y[i][1]-j3-j7,this.vo_pa_x[3]=this.vo_x[i][1]-i3+k5,this.vo_pa_y[3]=this.vo_y[i][1]-j3+j7,this.gg.os_g.setColor(this.gamecolor_firebar1),this.gg.os_g.fillPolygon(this.vo_pa_x,this.vo_pa_y,4),this.g_c2>=2){this.gg.os_g.setColor(this.gamecolor_firebar2);var l5=Math.floor(10*Math.cos(6.283185307179586*(characterobject.c3+90)/360)),k7=Math.floor(10*Math.sin(6.283185307179586*(characterobject.c3+90)/360));this.vo_pa_x[0]=this.vo_x[i][2]-i3+l5,this.vo_pa_y[0]=this.vo_y[i][2]-j3+k7,this.vo_pa_x[1]=this.vo_x[i][2]-i3-l5,this.vo_pa_y[1]=this.vo_y[i][2]-j3-k7,this.vo_pa_x[2]=this.vo_x[i][3]-i3-l5,this.vo_pa_y[2]=this.vo_y[i][3]-j3-k7,this.vo_pa_x[3]=this.vo_x[i][3]-i3+l5,this.vo_pa_y[3]=this.vo_y[i][3]-j3+k7,this.gg.os_g.fillPolygon(this.vo_pa_x,this.vo_pa_y,4)}}}if(this.m_kazu>0)for(var j=0;j<=23;j++)if(this.co_m[j].c>=50){var characterobject1=this.co_m[j];if(50==characterobject1.c){this.hg.drawImage(this.hih[characterobject1.pth][characterobject1.pt],characterobject1.x-i3,characterobject1.y-j3,this.ap);var j4=this.maps.getBGCode(characterobject1.x,characterobject1.y);j4>=20&&this.gg.drawPT(32*(characterobject1.x>>5)-i3,32*(characterobject1.y>>5)-j3,j4,0),(j4=this.maps.getBGCode(characterobject1.x+31,characterobject1.y))>=20&&this.gg.drawPT(32*(characterobject1.x+31>>5)-i3,32*(characterobject1.y>>5)-j3,j4,0)}else 1e3==characterobject1.pt?(this.gg.os_g.setColor(this.gamecolor_mizunohadou),this.gg.os_g.fillOval(characterobject1.x-i3+16-characterobject1.c2,characterobject1.y-j3+16-characterobject1.c2,2*characterobject1.c2,2*characterobject1.c2)):1100==characterobject1.pt?(0==this.g_ac?this.gg.os_g.setColor(this.gamecolor_grenade1):this.gg.os_g.setColor(this.gamecolor_grenade2),this.gg.os_g.fillOval(characterobject1.x-i3+16-characterobject1.c2,characterobject1.y-j3+16-characterobject1.c2,2*characterobject1.c2,2*characterobject1.c2)):this.hg.drawImage(this.hih[characterobject1.pth][characterobject1.pt],characterobject1.x-i3,characterobject1.y-j3,this.ap)}if(this.jm_kazu>0)for(var k=0;k<=1;k++)if(this.co_jm[k].c>=50){var characterobject2=this.co_jm[k];characterobject2.pt<1e3?this.hg.drawImage(this.hih[characterobject2.pth][characterobject2.pt],characterobject2.x-i3,characterobject2.y-j3,this.ap):1200==characterobject2.pt?(0==this.g_ac?this.gg.os_g.setColor(this.gamecolor_grenade1):this.gg.os_g.setColor(this.gamecolor_grenade2),this.gg.os_g.fillRect(characterobject2.x-i3,characterobject2.y-j3+12,characterobject2.vx-characterobject2.x+1,8)):1205==characterobject2.pt?(0==this.g_ac?this.gg.os_g.setColor(this.gamecolor_grenade1):this.gg.os_g.setColor(this.gamecolor_grenade2),this.gg.os_g.fillRect(characterobject2.vx-i3,characterobject2.y-j3+12,characterobject2.x-characterobject2.vx+1,8)):(0==this.g_ac?this.gg.os_g.setColor(this.gamecolor_grenade1):this.gg.os_g.setColor(this.gamecolor_grenade2),this.gg.os_g.fillOval(characterobject2.x-i3+16-characterobject2.c2,characterobject2.y-j3+16-characterobject2.c2,2*characterobject2.c2,2*characterobject2.c2))}for(var l=0;l<=this.t_kazu;l++)if(this.co_t[l].c>=50){var i6=this.co_t[l].x-i3,l7=this.co_t[l].y-j3;i6>=-64&&l7<=576&&this.hg.drawImage(this.hih[this.co_t[l].pth][this.co_t[l].pt],i6,l7,this.ap)}if(this.co_b.c>50){var j6=this.co_b.x-i3;if(j6<528){var i8=this.co_b.y-j3;switch(this.co_b.pt){default:break;case 1e3:this.hg.drawImage(this.hih[0][186],j6-16,i8-16,this.ap),this.hg.drawImage(this.hih[0][187],j6+16,i8-16,this.ap),this.hg.drawImage(this.hih[0][196],j6-16,i8+16,this.ap),this.hg.drawImage(this.hih[0][197],j6+16,i8+16,this.ap);break;case 1005:this.hg.drawImage(this.hih[1][187],j6-16,i8-16,this.ap),this.hg.drawImage(this.hih[1][186],j6+16,i8-16,this.ap),this.hg.drawImage(this.hih[1][197],j6-16,i8+16,this.ap),this.hg.drawImage(this.hih[1][196],j6+16,i8+16,this.ap);break;case 1010:this.hg.drawImage(this.hih[0][176],j6-16,i8+16,this.ap),this.hg.drawImage(this.hih[0][177],j6+16,i8+16,this.ap);break;case 1015:this.hg.drawImage(this.hih[1][177],j6-16,i8+16,this.ap),this.hg.drawImage(this.hih[1][176],j6+16,i8+16,this.ap);break;case 1100:this.hg.drawImage(this.hih[0][188],j6-16,i8-16,this.ap),this.hg.drawImage(this.hih[0][189],j6+16,i8-16,this.ap),this.hg.drawImage(this.hih[0][198],j6-16,i8+16,this.ap),this.hg.drawImage(this.hih[0][199],j6+16,i8+16,this.ap);break;case 1105:this.hg.drawImage(this.hih[1][189],j6-16,i8-16,this.ap),this.hg.drawImage(this.hih[1][188],j6+16,i8-16,this.ap),this.hg.drawImage(this.hih[1][199],j6-16,i8+16,this.ap),this.hg.drawImage(this.hih[1][198],j6+16,i8+16,this.ap);break;case 1110:this.hg.drawImage(this.hih[0][178],j6-16,i8+16,this.ap),this.hg.drawImage(this.hih[0][179],j6+16,i8+16,this.ap);break;case 1115:this.hg.drawImage(this.hih[1][179],j6-16,i8+16,this.ap),this.hg.drawImage(this.hih[1][178],j6+16,i8+16,this.ap);break;case 1200:this.hg.drawImage(this.hih[0][238],j6-16,i8-16,this.ap),this.hg.drawImage(this.hih[0][239],j6+16,i8-16,this.ap),this.hg.drawImage(this.hih[0][248],j6-16,i8+16,this.ap),this.hg.drawImage(this.hih[0][249],j6+16,i8+16,this.ap);break;case 1205:this.hg.drawImage(this.hih[1][239],j6-16,i8-16,this.ap),this.hg.drawImage(this.hih[1][238],j6+16,i8-16,this.ap),this.hg.drawImage(this.hih[1][249],j6-16,i8+16,this.ap),this.hg.drawImage(this.hih[1][248],j6+16,i8+16,this.ap);break;case 1210:this.hg.drawImage(this.hih[0][228],j6-16,i8+16,this.ap),this.hg.drawImage(this.hih[0][229],j6+16,i8+16,this.ap);break;case 1215:this.hg.drawImage(this.hih[1][229],j6-16,i8+16,this.ap),this.hg.drawImage(this.hih[1][228],j6+16,i8+16,this.ap);break;case 1250:this.hg.drawImage(this.hih[0][238],j6-16,i8-16,this.ap),this.hg.drawImage(this.hih[0][239],j6+16,i8-16,this.ap),this.hg.drawImage(this.hih[0][248],j6-16,i8+16,this.ap),this.hg.drawImage(this.hih[0][249],j6+16,i8+16,this.ap),this.j_v_c<=0&&(this.j_v_kakudo+=2,this.j_v_kakudo>360&&(this.j_v_kakudo-=360)),j6=this.co_b.x-i3+16,i8=this.co_b.y-j3+16,this.gg.os_g.setColor(Color.white);for(var d6=.017453292519943295,i1=0;i1<=5;i1++){var d=(this.j_v_kakudo+60*i1)*d6;this.vo_pa_x[i1]=j6+Math.floor(50*Math.cos(d)),this.vo_pa_y[i1]=i8+Math.floor(50*Math.sin(d))}this.gg.os_g.drawPolygon(this.vo_pa_x,this.vo_pa_y,6);for(var j1=0;j1<=5;j1++){var d1=(360-this.j_v_kakudo+60*j1)*d6;this.vo_pa_x[j1]=j6+Math.floor(50*Math.cos(d1)),this.vo_pa_y[j1]=i8+Math.floor(50*Math.sin(d1))}this.gg.os_g.drawPolygon(this.vo_pa_x,this.vo_pa_y,6);break;case 1255:this.hg.drawImage(this.hih[1][239],j6-16,i8-16,this.ap),this.hg.drawImage(this.hih[1][238],j6+16,i8-16,this.ap),this.hg.drawImage(this.hih[1][249],j6-16,i8+16,this.ap),this.hg.drawImage(this.hih[1][248],j6+16,i8+16,this.ap),this.j_v_c<=0&&(this.j_v_kakudo+=2,this.j_v_kakudo>360&&(this.j_v_kakudo-=360)),j6=this.co_b.x-i3+16,i8=this.co_b.y-j3+16,this.gg.os_g.setColor(Color.white);for(var d7=.017453292519943295,k1=0;k1<=5;k1++){var d2=(this.j_v_kakudo+60*k1)*d7;this.vo_pa_x[k1]=j6+Math.floor(50*Math.cos(d2)),this.vo_pa_y[k1]=i8+Math.floor(50*Math.sin(d2))}this.gg.os_g.drawPolygon(this.vo_pa_x,this.vo_pa_y,6);for(var l1=0;l1<=5;l1++){var d3=(360-this.j_v_kakudo+60*l1)*d7;this.vo_pa_x[l1]=j6+Math.floor(50*Math.cos(d3)),this.vo_pa_y[l1]=i8+Math.floor(50*Math.sin(d3))}this.gg.os_g.drawPolygon(this.vo_pa_x,this.vo_pa_y,6)}}}if(this.j_jet_c>=96&&(0==this.g_c1?this.hg.drawImage(this.hi[134],this.co_j.x-i3,this.co_j.y-j3+36,this.ap):this.hg.drawImage(this.hi[135],this.co_j.x-i3,this.co_j.y-j3+36,this.ap)),this.j_v_c>0&&(this.j_v_c--,this.j_v_kakudo+=2,this.j_v_kakudo>360&&(this.j_v_kakudo-=360),this.j_v_c>50||1==this.g_ac)){var k6=this.co_j.x-i3+16,j8=this.co_j.y-j3+16;this.gg.os_g.setColor(Color.white);for(var d8=.017453292519943295,i2=0;i2<=5;i2++){var d4=(this.j_v_kakudo+60*i2)*d8;this.vo_pa_x[i2]=k6+Math.floor(38*Math.cos(d4)),this.vo_pa_y[i2]=j8+Math.floor(38*Math.sin(d4))}this.gg.os_g.drawPolygon(this.vo_pa_x,this.vo_pa_y,6);for(var j2=0;j2<=5;j2++){var d5=(360-this.j_v_kakudo+60*j2)*d8;this.vo_pa_x[j2]=k6+Math.floor(38*Math.cos(d5)),this.vo_pa_y[j2]=j8+Math.floor(38*Math.sin(d5))}this.gg.os_g.drawPolygon(this.vo_pa_x,this.vo_pa_y,6)}if(this.j_zan_f){var k3=this.j_zan_p+(6-this.j_zan_nagasa);k3>5&&(k3-=6);var l3=this.j_zan_p+1;l3>5&&(l3-=6);do{var l6=this.j_zan_x[k3]-i3,k8=this.j_zan_y[k3]-j3,i4=this.j_zan_pth[k3];this.hg.drawImage(this.hih[i4][this.j_zan_pt[k3]],l6,k8,this.ap),++k3>5&&(k3=0)}while(k3!=l3);this.j_zan_p++,this.j_zan_p>5&&(this.j_zan_p=0),this.j_zan_x[this.j_zan_p]=this.co_j.x,this.j_zan_y[this.j_zan_p]=this.co_j.y,this.j_zan_pt[this.j_zan_p]=this.co_j.pt,this.j_zan_pth[this.j_zan_p]=this.co_j.muki,this.j_zan_c<9?(this.j_zan_c++,this.co_j.vy>=0&&(this.j_zan_c=9)):(this.j_zan_nagasa--,this.j_zan_nagasa<0&&(this.j_zan_f=!1))}if(this.co_j.pt<1e3?this.gg.drawPT(this.co_j.wx,this.co_j.wy,this.co_j.pt,this.co_j.muki):1e3==this.co_j.pt?0==this.co_j.muki?(this.gg.drawPT(this.co_j.wx,this.co_j.wy,118,this.co_j.muki),this.gg.drawPT(this.co_j.wx-32,this.co_j.wy,117,this.co_j.muki)):(this.gg.drawPT(this.co_j.wx,this.co_j.wy,118,1),this.gg.drawPT(this.co_j.wx+32,this.co_j.wy,117,1)):1100==this.co_j.pt?(this.co_j.c1<=0?this.gg.drawPT(this.co_j.wx,this.co_j.wy,100,this.co_j.muki):this.co_j.c1>=32?this.gg.drawPT(this.co_j.wx,this.co_j.wy+32,100,this.co_j.muki):this.gg.drawPT(this.co_j.wx,this.co_j.wy+this.co_j.c1,100,this.co_j.muki),this.gg.drawPT(this.co_j.wx-16,this.co_j.wy+32,60+2*this.co_j.c2,0),this.gg.drawPT(this.co_j.wx+16,this.co_j.wy+32,61+2*this.co_j.c2,0)):this.co_j.pt,this.hitokoto_c>0){this.hitokoto_c--;for(var i5=0,k2=0;k2<=2;k2++){var k4=k2+1,s="hitokoto"+this.hitokoto_num+"-"+k4;s=this.gg.ap.getParameter(s),k4=parseInt(s),isNaN(k4)&&(k4=-1),0!=k4&&i5++}this.km.drawWindowbox(208,56,224,30+14*i5),this.hg.setFont(new Font("Dialog",0,12)),this.hg.setColor(Color.cyan);var s1="hitokoto"+this.hitokoto_num+"_name";this.hg.drawString(this.gg.ap.getParameter(s1),214,74),this.hg.setColor(Color.white),i5=0;for(var l2=0;l2<=2;l2++){var l4=l2+1,s2="hitokoto"+this.hitokoto_num+"-"+l4;s2=this.gg.ap.getParameter(s2),l4=parseInt(s2),isNaN(l4)&&(l4=-1),0!=l4&&(this.hg.drawString(s2,214,80+14*i5+12),i5++)}}},MainProgram.prototype.jM100=function(){var flag=!1,flag1=!1;this.j_mizu_f=!1;var i9=this.maps.getBGCode(this.co_j.x+15,this.co_j.y+15);4==i9?(this.j_mizu_f=!0,this.j_jet_c=0,this.j_mizu_awa_c++,44==this.j_mizu_awa_c||54==this.j_mizu_awa_c?this.mSet(this.co_j.x,this.co_j.y+4,60):this.j_mizu_awa_c>54&&(this.j_mizu_awa_c=0)):8!=i9&&9!=i9||4!=this.maps.map_bg[(this.co_j.x+15>>5)-1][this.co_j.y+15>>5]||(this.j_mizu_f=!0,this.j_jet_c=0,this.j_mizu_awa_c++,44==this.j_mizu_awa_c||54==this.j_mizu_awa_c?this.mSet(this.co_j.x,this.co_j.y+4,60):this.j_mizu_awa_c>54&&(this.j_mizu_awa_c=0)),this.gk.tr1_f?this.tr1_c<6&&this.tr1_c++:this.tr1_c=0,this.gk.tr2_f?this.tr2_c<2&&this.tr2_c++:this.tr2_c=0,this.gk.left_f?this.gk.left_c<2&&this.gk.left_c++:this.gk.left_c=0,this.gk.right_f?this.gk.right_c<2&&this.gk.right_c++:this.gk.right_c=0,1==this.gk.left_c?(this.left_dcc>0?this.j_hashiru_f=!0:this.j_hashiru_f=!1,this.left_dcc=8):this.left_dcc>0&&this.left_dcc--,1==this.gk.right_c?(this.right_dcc>0?this.j_hashiru_f=!0:this.j_hashiru_f=!1,this.right_dcc=8):this.right_dcc>0&&this.right_dcc--;var j3=this.co_j.x,k3=this.co_j.y;this.co_j.pt=100;var i=j3+15>>5,j1=k3+31>>5,l1=(this.maps.map_bg[i][j1],k3+32>>5),word2=this.maps.map_bg[i][l1];if(word2>=20||this.j_a_id>=0?(this.co_j.jimen_f=!0,this.j_jump_type=2,69==word2&&(flag1=!0)):this.co_j.jimen_f=!1,this.co_j.jimen_f?(this.j_zan_f=!1,this.j_jet_c=0,this.gk.left_f?(this.co_j.vx-=flag1?4:15,this.j_hashiru_f?(this.j_mizu_f?this.co_j.vx<-60&&(this.co_j.vx=-60):this.co_j.vx<-120&&(this.co_j.vx=-120),this.co_j.vx>0&&!flag1?(this.co_j.pt=108,this.co_j.ac=0):(this.co_j.pt=105+(this.co_j.ac>>1),this.co_j.ac++,this.co_j.ac>3&&(this.co_j.ac=0))):(this.j_mizu_f?this.co_j.vx<-40&&(this.co_j.vx=-40):this.co_j.vx<-60&&(this.co_j.vx=-60),this.co_j.vx>0&&!flag1?(this.co_j.pt=108,this.co_j.ac=0):(this.co_j.pt=103+(this.co_j.ac>>1),this.co_j.ac++,this.co_j.ac>3&&(this.co_j.ac=0))),this.co_j.muki=0):this.gk.right_f?(this.co_j.vx+=flag1?4:15,this.j_hashiru_f?(this.j_mizu_f?this.co_j.vx>60&&(this.co_j.vx=60):this.co_j.vx>120&&(this.co_j.vx=120),this.co_j.vx<0&&!flag1?(this.co_j.pt=108,this.co_j.ac=0):(this.co_j.pt=105+(this.co_j.ac>>1),this.co_j.ac++,this.co_j.ac>3&&(this.co_j.ac=0))):(this.j_mizu_f?this.co_j.vx>40&&(this.co_j.vx=40):this.co_j.vx>60&&(this.co_j.vx=60),this.co_j.vx<0&&!flag1?(this.co_j.pt=108,this.co_j.ac=0):(this.co_j.pt=103+(this.co_j.ac>>1),this.co_j.ac++,this.co_j.ac>3&&(this.co_j.ac=0))),this.co_j.muki=1):this.co_j.vx<0?(flag1?this.co_j.vx++:this.co_j.vx+=5,this.co_j.vx>0&&(this.co_j.vx=0),this.j_hashiru_f||flag1?(this.co_j.pt=107,this.co_j.ac=0):(this.co_j.pt=103+(this.co_j.ac>>1),this.co_j.ac++,this.co_j.ac>3&&(this.co_j.ac=0)),this.co_j.muki=0):this.co_j.vx>0?(flag1?this.co_j.vx--:this.co_j.vx-=5,this.co_j.vx<0&&(this.co_j.vx=0),this.j_hashiru_f||flag1?(this.co_j.pt=107,this.co_j.ac=0):(this.co_j.pt=103+(this.co_j.ac>>1),this.co_j.ac++,this.co_j.ac>3&&(this.co_j.ac=0)),this.co_j.muki=1):this.co_j.ac=0):(this.gk.left_f?!this.j_mizu_f&&this.co_j.vx>-60&&(this.co_j.vx-=10,this.co_j.vx<-60&&(this.co_j.vx=-60)):this.gk.right_f&&!this.j_mizu_f&&this.co_j.vx<60&&(this.co_j.vx+=10,this.co_j.vx>60&&(this.co_j.vx=60)),this.j_mizu_f?this.j_mizu_ac>1?this.co_j.pt=84:this.co_j.pt=83:0==this.j_jump_type?this.co_j.vy<20?this.co_j.pt=101:this.co_j.pt=102:2==this.j_jump_type?Math.abs(this.co_j.vx)<=60?this.co_j.pt=103:this.co_j.pt=105:3==this.j_jump_type?this.co_j.pt=119:4==this.j_jump_type?this.co_j.pt=100:this.co_j.pt=109,this.co_j.ac=2),this.j_jdai_f&&(this.co_j.vx=0,this.co_j.pt=100,this.co_j.ac=0),this.co_j.vx<0){if(this.co_j.x+=rounddown(this.co_j.vx/10),this.a_hf)for(var i4=0;i4<=this.a_kazu;i4++)if(this.co_a[i4].gf){var characterobject=this.co_a[i4];characterobject.c>=100&&characterobject.c<200?this.co_j.x+15>=characterobject.x&&this.co_j.x<=characterobject.x+64&&this.co_j.y+31>=characterobject.y&&this.co_j.y<=characterobject.y+13&&(this.co_j.x=characterobject.x+65,this.co_j.vx=0):300==characterobject.c?this.co_j.x+15>=characterobject.x&&this.co_j.x<=characterobject.x+48&&this.co_j.y+31>=characterobject.y&&this.co_j.y<=characterobject.y+31&&(this.co_j.x=characterobject.x+49,this.co_j.vx=0):400==characterobject.c?this.co_j.x+15>=characterobject.x&&this.co_j.x<=characterobject.x+80&&this.co_j.y+31>=characterobject.y&&this.co_j.y<=characterobject.y+63&&(this.co_j.x=characterobject.x+81,this.co_j.vx=0):500==characterobject.c?this.co_j.x+15>=characterobject.x&&this.co_j.x<=characterobject.x+80&&this.co_j.y+31>=characterobject.y&&this.co_j.y<=characterobject.y+13&&(this.co_j.x=characterobject.x+81,this.co_j.vx=0):600==characterobject.c?this.co_j.x+15>=characterobject.x&&this.co_j.x<=characterobject.x+48&&this.co_j.y+31>=characterobject.y+16&&this.co_j.y<=characterobject.y+47&&(this.co_j.x=characterobject.x+49,this.co_j.vx=0):700==characterobject.c&&this.co_j.x+15>=characterobject.x&&this.co_j.x<=characterobject.x+16&&this.co_j.y+31>=characterobject.y&&this.co_j.y<=characterobject.y+31&&(this.co_j.x=characterobject.x+17,this.co_j.vx=0)}var k=this.co_j.x+15>>5,word8=this.maps.map_bg[k][this.co_j.y>>5],j2=this.co_j.y+31>>5,word4=this.maps.map_bg[k][j2];(word8>=20||word4>=20)&&(this.co_j.x=32*k+17,this.co_j.vx=0)}else if(this.co_j.vx>0){if(this.co_j.x+=rounddown(this.co_j.vx/10),this.a_hf)for(var j4=0;j4<=this.a_kazu;j4++)if(this.co_a[j4].gf){var characterobject1=this.co_a[j4];characterobject1.c>=100&&characterobject1.c<200?this.co_j.x+15>=characterobject1.x&&this.co_j.x<=characterobject1.x+64&&this.co_j.y+31>=characterobject1.y&&this.co_j.y<=characterobject1.y+13&&(this.co_j.x=characterobject1.x-16,this.co_j.vx=0):300==characterobject1.c?this.co_j.x+15>=characterobject1.x&&this.co_j.x<=characterobject1.x+48&&this.co_j.y+31>=characterobject1.y&&this.co_j.y<=characterobject1.y+31&&(this.co_j.x=characterobject1.x-16,this.co_j.vx=0):400==characterobject1.c?this.co_j.x+15>=characterobject1.x&&this.co_j.x<=characterobject1.x+80&&this.co_j.y+31>=characterobject1.y&&this.co_j.y<=characterobject1.y+63&&(this.co_j.x=characterobject1.x-16,this.co_j.vx=0):500==characterobject1.c?this.co_j.x+15>=characterobject1.x&&this.co_j.x<=characterobject1.x+80&&this.co_j.y+31>=characterobject1.y&&this.co_j.y<=characterobject1.y+13&&(this.co_j.x=characterobject1.x-16,this.co_j.vx=0):600==characterobject1.c?this.co_j.x+15>=characterobject1.x&&this.co_j.x<=characterobject1.x+48&&this.co_j.y+31>=characterobject1.y+16&&this.co_j.y<=characterobject1.y+47&&(this.co_j.x=characterobject1.x-16,this.co_j.vx=0):700==characterobject1.c&&this.co_j.x+15>=characterobject1.x&&this.co_j.x<=characterobject1.x+16&&this.co_j.y+31>=characterobject1.y&&this.co_j.y<=characterobject1.y+31&&(this.co_j.x=characterobject1.x-16,this.co_j.vx=0)}var l=this.co_j.x+15>>5,word9=this.maps.map_bg[l][this.co_j.y>>5],k2=this.co_j.y+31>>5,word5=this.maps.map_bg[l][k2];(word9>=20||word5>=20)&&(this.co_j.x=32*l-16,this.co_j.vx=0)}if(this.co_j.jimen_f)if(this.tr1_c>=1&&this.tr1_c<=5)if(this.maps.getBGCode(this.co_j.x+15,this.co_j.y-1)>=20){if(1==this.tr1_c&&40==this.maps.getBGCode(this.co_j.x+15,this.co_j.y-1)){var i5=this.co_j.x+15>>5,k6=this.co_j.y-1>>5;this.hAttack(i5,k6)}if(i9=this.maps.getBGCode(this.co_j.x+15,this.co_j.y-1),this.j_helm_f&&(20==i9||69==i9&&1==this.suberuyuka_hkf)){this.tr1_c=6;var j5=this.co_j.x+15>>5,l6=this.co_j.y-1>>5;4==this.maps.map_bg[this.co_j.x+15>>5][1+(this.co_j.y-1>>5)]?this.maps.putBGCode(j5,l6,4):this.maps.putBGCode(j5,l6,0),this.mSet2(32*j5,32*l6,80,12,-24),this.mSet2(32*j5,32*l6,80,-12,-24),this.jZutuki(32*j5,32*l6-32,0)}}else if(this.j_mizu_f)this.j_jump_type=0,this.co_j.pt=83,this.co_j.ac=0,this.j_mizu_ac=0,this.j_jet_kf=!1,this.j_jdai_f?(this.co_j.y=32*(this.co_j.y>>5),this.co_j.vy=-120,this.j_jump_level=0):Math.abs(this.co_j.vx)>50?(this.co_j.vy=-90,this.j_jump_level=0):(this.co_j.vy=-70,this.j_jump_level=0);else{this.j_jump_type=0,this.co_j.pt=101,this.co_j.ac=0,this.j_fire_f&&(0==this.co_j.muki?this.jmSet(this.co_j.x,this.co_j.y,100):this.jmSet(this.co_j.x,this.co_j.y,105)),this.j_jet_kf=!1;var k8=Math.abs(this.co_j.vx);if(this.j_jdai_f)this.co_j.y=32*(this.co_j.y>>5),this.co_j.vy=-410,this.j_jump_level=5,this.co_a[this.j_a_id].c3<=1&&(this.co_j.vy=-230);else if(0==k8)this.co_j.vy=-150,this.j_jump_level=1;else if(k8<60)this.co_j.vy=-230,this.j_jump_level=2;else if(60==k8)this.co_j.vy=-260,this.j_jump_level=3;else if(k8<120)this.co_j.vy=-290,this.j_jump_level=4;else if(this.co_j.vy=-340,this.j_jump_level=5,(i9=this.maps.map_bg[this.co_j.x+15>>5][this.co_j.y-1>>5])<=9){for(var l3=0;l3<=5;l3++)this.j_zan_x[l3]=j3,this.j_zan_y[l3]=k3,this.j_zan_pt[l3]=101,this.j_zan_pth[l3]=this.co_j.muki;this.j_zan_p=0,this.j_zan_c=0,this.j_zan_nagasa=5,this.j_zan_f=!0}}else this.co_j.vy=0;else if(this.j_mizu_f)if(this.gk.left_f?this.co_j.muki=0:this.gk.right_f&&(this.co_j.muki=1),1==this.tr1_c){var flag2=!1;(i9=this.maps.map_bg[this.co_j.x+15>>5][(this.co_j.y+15>>5)-1])<=9&&4!=i9&&(flag2=!0),8!=i9&&9!=i9||4!=this.maps.map_bg[(this.co_j.x+15>>5)-1][(this.co_j.y+15>>5)-1]||(flag2=!1),flag2&&(this.co_j.y+15)%32<=8?(this.j_jump_type=0,this.co_j.pt=101,this.co_j.ac=0,this.co_j.vy=-180,this.j_jump_level=1,this.co_j.y=32*(this.co_j.y+15>>5)-14,this.j_jet_kf=!1,flag=!0,this.mSet(this.co_j.x,32*(this.co_j.y+15>>5)-32,50)):(this.j_jump_type=0,this.co_j.ac=0,this.j_mizu_ac<=0&&(this.j_mizu_ac=4,this.co_j.pt=84),this.co_j.vy=-40,this.j_jump_level=0,0==this.co_j.muki?(this.co_j.vx-=30,this.co_j.vx<-60&&(this.co_j.vx=-60)):(this.co_j.vx+=30,this.co_j.vx>60&&(this.co_j.vx=60)))}else this.co_j.vx<0?(0==this.co_j.muki?this.co_j.vx++:this.co_j.vx+=2,this.co_j.vx>0&&(this.co_j.vx=0)):this.co_j.vx>0&&(1==this.co_j.muki?this.co_j.vx--:this.co_j.vx-=2,this.co_j.vx<0&&(this.co_j.vx=0)),this.co_j.vy<40?(this.co_j.vy+=5,this.co_j.vy>40&&(this.co_j.vy=40)):this.co_j.vy>40&&(this.co_j.vy-=20,this.co_j.vy<40&&(this.co_j.vy=40)),this.j_mizu_ac>0?(this.j_mizu_ac--,this.j_mizu_ac>1?this.co_j.pt=84:this.co_j.pt=83):this.co_j.pt=83;else this.co_j.vy+=25,this.co_j.vy>160&&(this.co_j.vy=160),1==this.tr1_c&&this.j_fire_f&&(0==this.co_j.muki?this.jmSet(this.co_j.x,this.co_j.y,100):this.jmSet(this.co_j.x,this.co_j.y,105)),0==this.tr1_c&&(this.j_jet_kf=!0),this.j_jet_kf&&this.tr1_c>0&&this.j_jet_fuel>0&&!this.j_mizu_f?(this.j_jet_c=100,2==this.j_jump_type&&(this.j_jump_type=0)):this.j_jet_c>96?this.j_jet_c--:this.j_jet_c=0,this.j_jet_c>=96&&(this.j_jet_fuel--,this.j_jet_fuel<0&&(this.j_jet_fuel=0,this.j_jet_c=0),this.gk.left_f?this.co_j.muki=0:this.gk.right_f&&(this.co_j.muki=1),this.co_j.vy>-150&&(this.co_j.vy-=50,this.co_j.vy<-150&&(this.co_j.vy=-150)));if(this.co_j.vy<0){var i1=this.co_j.x+15>>5,i2=this.co_j.y>>5,l8=(this.maps.map_bg[i1][i2],this.co_j.vy);if(l8<-320&&(l8=-320),this.co_j.y+=rounddown(l8/10),this.j_mizu_f&&!flag){var i8=this.maps.getBGCode(this.co_j.x+15,this.co_j.y+15),flag3=!1;i8<=9&&4!=i8&&(flag3=!0),8!=i8&&9!=i8||4!=this.maps.map_bg[(this.co_j.x+15>>5)-1][this.co_j.y+15>>5]||(flag3=!1),flag3&&(this.co_j.y=32*(this.co_j.y+15>>5)+17,this.co_j.vy=-10)}if(this.a_hf)for(var k4=0;k4<=this.a_kazu;k4++)if(this.co_a[k4].gf){var characterobject2=this.co_a[k4];characterobject2.c>=100&&characterobject2.c<200?this.co_j.x+15>=characterobject2.x&&this.co_j.x<=characterobject2.x+64&&this.co_j.y+31>=characterobject2.y&&this.co_j.y<=characterobject2.y+13&&(this.co_j.y=characterobject2.y+14,this.co_j.vy=0):300==characterobject2.c?this.co_j.x+15>=characterobject2.x&&this.co_j.x<=characterobject2.x+48&&this.co_j.y+31>=characterobject2.y&&this.co_j.y<=characterobject2.y+31&&(this.co_j.y=characterobject2.y+32,this.co_j.vy=0):400==characterobject2.c?this.co_j.x+15>=characterobject2.x&&this.co_j.x<=characterobject2.x+80&&this.co_j.y+31>=characterobject2.y&&this.co_j.y<=characterobject2.y+63&&(this.co_j.y=characterobject2.y+64,this.co_j.vy=0):500==characterobject2.c?this.co_j.x+15>=characterobject2.x&&this.co_j.x<=characterobject2.x+80&&this.co_j.y+31>=characterobject2.y&&this.co_j.y<=characterobject2.y+13&&(this.co_j.y=characterobject2.y+14,this.co_j.vy=0):600==characterobject2.c?this.co_j.x+15>=characterobject2.x&&this.co_j.x<=characterobject2.x+48&&this.co_j.y+31>=characterobject2.y+16&&this.co_j.y<=characterobject2.y+47&&(this.co_j.y=characterobject2.y+48,this.co_j.vy=0):700==characterobject2.c&&this.co_j.x+15>=characterobject2.x&&this.co_j.x<=characterobject2.x+16&&this.co_j.y+31>=characterobject2.y&&this.co_j.y<=characterobject2.y+31&&(this.co_j.y=characterobject2.y+32,this.co_j.vy=0)}var i3=this.co_j.y>>5,word10=this.maps.map_bg[this.co_j.x+15>>5][i3];if(word10>=20){if(this.co_j.y=32*i3+32,this.co_j.vy=0,40==word10){var k5=this.co_j.x+15>>5,i7=this.co_j.y-1>>5;this.hAttack(k5,i7)}if(this.j_helm_f&&(20==word10||69==word10&&1==this.suberuyuka_hkf)){var l5=this.co_j.x+15>>5,j7=i3;4==this.maps.map_bg[l5][j7+1]?this.maps.putBGCode(l5,j7,4):this.maps.putBGCode(l5,j7,0),this.mSet2(32*l5,32*j7,80,12,-24),this.mSet2(32*l5,32*j7,80,-12,-24),this.jZutuki(32*l5,32*j7-32,0)}}if(i2>i3){if(this.gk.right_f){var word11=this.maps.map_bg[this.co_j.x+16>>5][i2],word15=this.maps.map_bg[this.co_j.x+16>>5][i3];word11<=9&&word15>=20&&(this.co_j.y=32*i3+32,this.co_j.vy=0)}if(this.gk.left_f){var word12=this.maps.map_bg[this.co_j.x+14>>5][i2],word16=this.maps.map_bg[this.co_j.x+14>>5][i3];word12<=9&&word16>=20&&(this.co_j.y=32*i3+32,this.co_j.vy=0)}}}else if(this.co_j.vy>0){var j=this.co_j.x+15>>5,k1=this.co_j.y+31>>5;this.maps.map_bg[j][k1];if(this.co_j.y+=rounddown(this.co_j.vy/10),this.a_hf)for(var l4=0;l4<=this.a_kazu;l4++)if(this.co_a[l4].gf){var characterobject3=this.co_a[l4];characterobject3.c>=100&&characterobject3.c<200?this.co_j.x+15>=characterobject3.x&&this.co_j.x<=characterobject3.x+64&&this.co_j.y+31>=characterobject3.y&&this.co_j.y<=characterobject3.y+13&&(this.co_j.y=characterobject3.y-32,this.co_j.vy=0):300==characterobject3.c?this.co_j.x+15>=characterobject3.x&&this.co_j.x<=characterobject3.x+48&&this.co_j.y+31>=characterobject3.y&&this.co_j.y<=characterobject3.y+31&&(this.co_j.y=characterobject3.y-32,this.co_j.vy=0):400==characterobject3.c?this.co_j.x+15>=characterobject3.x&&this.co_j.x<=characterobject3.x+80&&this.co_j.y+31>=characterobject3.y&&this.co_j.y<=characterobject3.y+63&&(this.co_j.y=characterobject3.y-32,this.co_j.vy=0):500==characterobject3.c?this.co_j.x+15>=characterobject3.x&&this.co_j.x<=characterobject3.x+80&&this.co_j.y+31>=characterobject3.y&&this.co_j.y<=characterobject3.y+13&&(this.co_j.y=characterobject3.y-32,this.co_j.vy=0):600==characterobject3.c?this.co_j.x+15>=characterobject3.x&&this.co_j.x<=characterobject3.x+48&&this.co_j.y+31>=characterobject3.y+16&&this.co_j.y<=characterobject3.y+47&&(this.co_j.y=characterobject3.y+16-32,this.co_j.vy=0):700==characterobject3.c&&this.co_j.x+15>=characterobject3.x&&this.co_j.x<=characterobject3.x+16&&this.co_j.y+31>=characterobject3.y&&this.co_j.y<=characterobject3.y+31&&(this.co_j.y=characterobject3.y-32,this.co_j.vy=0)}var l2=this.co_j.y+31>>5;if(this.maps.map_bg[j][l2]>=20){this.co_j.y=32*l2-32,this.co_j.vy=0,l2=this.co_j.y+31>>5;this.maps.map_bg[j][l2]}if(k1<l2){if(this.gk.right_f){var word13=this.maps.map_bg[this.co_j.x+16>>5][k1],word17=this.maps.map_bg[this.co_j.x+16>>5][l2];word13<=9&&word17>=20&&(this.co_j.y=32*l2-32,this.co_j.vy=0,this.co_j.pt=103,this.co_j.ac=1,this.co_j.x++)}if(this.gk.left_f){var word14=this.maps.map_bg[this.co_j.x+14>>5][k1],word18=this.maps.map_bg[this.co_j.x+14>>5][l2];word14<=9&&word18>=20&&(this.co_j.y=32*l2-32,this.co_j.vy=0,this.co_j.pt=103,this.co_j.ac=1,this.co_j.x--)}}if(!this.j_mizu_f){var j8=this.maps.getBGCode(this.co_j.x+15,this.co_j.y+15);4==j8?(this.mSet(this.co_j.x,32*(this.co_j.y+15>>5)-32,50),this.j_mizu_awa_c=38,this.co_j.vx<-60?this.co_j.vx=-60:this.co_j.vx>60&&(this.co_j.vx=60)):8!=j8&&9!=j8||4!=this.maps.map_bg[(this.co_j.x+15>>5)-1][this.co_j.y+15>>5]||(this.mSet(this.co_j.x,32*(this.co_j.y+15>>5)-32,50),this.j_mizu_awa_c=38,this.co_j.vx<-60?this.co_j.vx=-60:this.co_j.vx>60&&(this.co_j.vx=60))}}if(1==this.tr2_c)if(this.j_gr_kazu>0?3==this.grenade_type||4==this.grenade_type?0==this.co_j.muki?this.jmSet(this.co_j.x,this.co_j.y,60):this.jmSet(this.co_j.x,this.co_j.y,65):0==this.co_j.muki?this.jmSet(this.co_j.x,this.co_j.y,200):this.jmSet(this.co_j.x,this.co_j.y,205):!this.j_fire_f||this.j_mizu_f&&!this.j_fire_mkf||(0==this.co_j.muki?this.jmSet(this.co_j.x,this.co_j.y,100):this.jmSet(this.co_j.x,this.co_j.y,105)),i9=this.maps.getBGCode(this.co_j.x+15,this.co_j.y+32),this.j_drell_f&&(20==i9||69==i9&&1==this.suberuyuka_hkf)){var i6=this.co_j.x+15>>5,k7=this.co_j.y+32>>5;4==this.maps.map_bg[this.co_j.x+15>>5][(this.co_j.y+32>>5)-1]?this.maps.putBGCode(i6,k7,4):this.maps.putBGCode(i6,k7,0),this.mSet2(32*i6,32*k7,80,12,-24),this.mSet2(32*i6,32*k7,80,-12,-24),this.jZutuki(32*i6,32*k7-32,0),this.co_j.x=32*i6,this.co_j.vx=0,this.co_j.vy=0,this.j_jump_type=3,this.co_j.c=120,this.co_j.c1=0,this.co_j.pt=119}else this.j_tail_f&&(this.j_tail_ac<=0||this.j_tail_ac>=8)&&(this.j_tail_ac=1,this.co_j.pt=116,this.j_zan_f=!1);if(this.j_tail_ac>=1)if(this.j_zan_f=!1,this.j_tail_ac++,this.j_tail_ac<=4)this.co_j.pt=116,1!=this.j_tail_type&&3!=this.j_tail_type||(0==this.co_j.muki?this.jZutuki(this.co_j.x-32,this.co_j.y,1):this.jZutuki(this.co_j.x+32,this.co_j.y,1));else if(this.j_tail_ac<=5){if(this.co_j.pt=1e3,1!=this.j_tail_type&&3!=this.j_tail_type||(0==this.co_j.muki?this.jZutuki(this.co_j.x-32,this.co_j.y,1):this.jZutuki(this.co_j.x+32,this.co_j.y,1)),2==this.j_tail_type||3==this.j_tail_type){var j6;j6=1==this.co_j.muki?this.co_j.x+40>>5:this.co_j.x-8>>5;var l7=this.co_j.y+15>>5;(20==this.maps.map_bg[j6][l7]||69==this.maps.map_bg[j6][l7]&&1==this.suberuyuka_hkf)&&(4==this.maps.map_bg[j6-1][l7]?this.maps.putBGCode(j6,l7,4):this.maps.putBGCode(j6,l7,0),this.mSet2(32*j6,32*l7,80,12,-24),this.mSet2(32*j6,32*l7,80,-12,-24),this.jZutuki(32*j6,32*l7-32,0))}}else this.j_tail_ac<=7?this.co_j.pt=1e3:this.j_tail_ac<=9?this.co_j.pt=116:(this.co_j.pt=116,this.j_tail_ac=0);switch(i9=this.maps.map_bg[this.co_j.x+15>>5][this.co_j.y+15>>5]){case 9:4==this.maps.map_bg[(this.co_j.x+15>>5)-1][this.co_j.y+15>>5]?(this.maps.putBGCode(this.co_j.x+15>>5,this.co_j.y+15>>5,4),this.j_mizu_f=!0):this.maps.putBGCode(this.co_j.x+15>>5,this.co_j.y+15>>5,0),this.addScore(5);break;case 8:4==this.maps.map_bg[(this.co_j.x+15>>5)-1][this.co_j.y+15>>5]?(this.maps.putBGCode(this.co_j.x+15>>5,this.co_j.y+15>>5,4),this.j_mizu_f=!0):this.maps.putBGCode(this.co_j.x+15>>5,this.co_j.y+15>>5,0),this.stage_cc=1,this.stage_max>=2&&this.stage>=this.stage_max?this.addScore(1e3):this.addScore(100);break;case 5:case 6:this.co_j.y=32*(this.co_j.y+15>>5),this.jShinu(1)}(this.co_j.y>=this.ochiru_y||this.j_mizu_f&&this.co_j.y>=this.ochiru_y-16)&&(this.co_j.c=210,this.co_j.c1=0,this.co_j.y=this.ochiru_y+64,this.j_jet_c=0,this.j_v_c=0),this.co_j.wx=this.co_j.x-this.maps.wx,this.co_j.wy=this.co_j.y-this.maps.wy,this.co_j.wx<96?this.maps.wx=this.co_j.x-96:this.co_j.wx>224&&(this.maps.wx=this.co_j.x-224),this.co_j.wy<78?this.maps.wy=this.co_j.y-78:this.co_j.wy>176&&(this.maps.wy=this.co_j.y-176),this.maps.wx<this.maps.wx_mini?this.maps.wx=this.maps.wx_mini:this.maps.wx>this.maps.wx_max&&(this.maps.wx=this.maps.wx_max),this.maps.wy<this.maps.wy_mini?this.maps.wy=this.maps.wy_mini:this.maps.wy>this.maps.wy_max&&(this.maps.wy=this.maps.wy_max)},MainProgram.prototype.jMove=function(){this.j_mizu_f=!1;var k=this.maps.getBGCode(this.co_j.x+15,this.co_j.y+15);if(4==k?(this.j_mizu_f=!0,this.j_jet_c=0,this.j_mizu_awa_c++,44==this.j_mizu_awa_c||54==this.j_mizu_awa_c?this.mSet(this.co_j.x,this.co_j.y+4,60):this.j_mizu_awa_c>54&&(this.j_mizu_awa_c=0)):8!=k&&9!=k||4!=this.maps.map_bg[(this.co_j.x+15>>5)-1][this.co_j.y+15>>5]||(this.j_mizu_f=!0,this.j_jet_c=0,this.j_mizu_awa_c++,44==this.j_mizu_awa_c||54==this.j_mizu_awa_c?this.mSet(this.co_j.x,this.co_j.y+4,60):this.j_mizu_awa_c>54&&(this.j_mizu_awa_c=0)),this.gk.tr1_f?this.tr1_c<6&&this.tr1_c++:this.tr1_c=0,this.gk.tr2_f?this.tr2_c<2&&this.tr2_c++:this.tr2_c=0,this.gk.left_f?this.gk.left_c<2&&this.gk.left_c++:this.gk.left_c=0,this.gk.right_f?this.gk.right_c<2&&this.gk.right_c++:this.gk.right_c=0,1==this.gk.left_c?(this.left_dcc>0?this.j_hashiru_f=!0:this.j_hashiru_f=!1,this.left_dcc=8):this.left_dcc>0&&this.left_dcc--,1==this.gk.right_c?(this.right_dcc>0?this.j_hashiru_f=!0:this.j_hashiru_f=!1,this.right_dcc=8):this.right_dcc>0&&this.right_dcc--,110==this.co_j.c)this.gk.left_f?(this.co_j.vx-=10,this.co_j.vx<-60&&(this.co_j.vx=-60)):this.gk.right_f&&(this.co_j.vx+=10,this.co_j.vx>60&&(this.co_j.vx=60)),this.co_j.c1++,this.co_j.c1>2&&(this.co_j.c=100),this.co_j.pt=109;else if(120==this.co_j.c)this.co_j.c1++,this.co_j.c1>6&&(this.co_j.c=100),this.co_j.pt=119;else if(200==this.co_j.c)this.co_j.vy+=25,this.co_j.vy>100&&(this.co_j.vy=100),this.co_j.y+=rounddown(this.co_j.vy/10),this.co_j.wx=this.co_j.x-this.maps.wx,this.co_j.wy=this.co_j.y-this.maps.wy,this.co_j.c2<100?(this.co_j.c1<=0?(this.co_j.pt=110,this.co_j.muki=0):this.co_j.c1<=1?(this.co_j.pt=111,this.co_j.muki=0,this.co_j.c2++,this.co_j.c2>4&&(this.co_j.c2=100)):this.co_j.c1<=2?(this.co_j.pt=112,this.co_j.muki=0):(this.co_j.pt=113,this.co_j.muki=0),this.co_j.c1++,this.co_j.c1>3&&(this.co_j.c1=0)):(this.co_j.pt=112,this.co_j.muki=0),this.co_j.wy>=320&&(this.co_j.c=210,this.co_j.c1=0,this.co_j.y=this.maps.wy+320+32,this.co_j.pt=0);else if(210==this.co_j.c)this.stage_cc<=0&&(this.co_j.c1++,this.co_j.c1>16&&(this.j_left--,this.j_left<0?(this.j_left=0,this.ml_mode=300):2==this.stage_select?this.ml_mode=250:this.ml_mode=90));else if(220==this.co_j.c)this.co_j.pt=114,this.co_j.c1++,this.co_j.c1>=25&&(this.co_j.c=210,this.co_j.c1=0);else if(230==this.co_j.c)this.co_j.pt=115,this.co_j.c1++,this.co_j.c1>=25&&(this.co_j.c=210,this.co_j.c1=0);else if(240==this.co_j.c)this.co_j.c2>=100&&(this.co_j.y+=10),this.co_j.wx=this.co_j.x-this.maps.wx,this.co_j.wy=this.co_j.y-this.maps.wy,this.co_j.c2<100?(this.co_j.c1<=0?(this.co_j.pt=110,this.co_j.muki=0):this.co_j.c1<=1?(this.co_j.pt=111,this.co_j.muki=0,this.co_j.c2++,this.co_j.c2>4&&(this.co_j.c2=100)):this.co_j.c1<=2?(this.co_j.pt=112,this.co_j.muki=0):(this.co_j.pt=113,this.co_j.muki=0),this.co_j.c1++,this.co_j.c1>3&&(this.co_j.c1=0)):(this.co_j.pt=112,this.co_j.muki=0),this.co_j.wy>=320&&(this.co_j.c=210,this.co_j.c1=0,this.co_j.y=this.maps.wy+320+32,this.co_j.pt=0);else if(300==this.co_j.c)this.co_j.pt=1100,this.co_j.c1++,this.co_j.c1>=32&&(this.co_j.c=310,this.co_j.c1=0,this.co_j.pt=1110),this.co_j.wx=this.co_j.x-this.maps.wx,this.co_j.wy=this.co_j.y-this.maps.wy,this.co_j.wx<96?this.maps.wx=this.co_j.x-96:this.co_j.wx>224&&(this.maps.wx=this.co_j.x-224),this.co_j.wy<78?this.maps.wy=this.co_j.y-78:this.co_j.wy>176&&(this.maps.wy=this.co_j.y-176),this.maps.wx<this.maps.wx_mini?this.maps.wx=this.maps.wx_mini:this.maps.wx>this.maps.wx_max&&(this.maps.wx=this.maps.wx_max),this.maps.wy<this.maps.wy_mini?this.maps.wy=this.maps.wy_mini:this.maps.wy>this.maps.wy_max&&(this.maps.wy=this.maps.wy_max);else if(310==this.co_j.c){if(this.co_j.pt=1110,this.stage_cc<=0)if(this.co_j.c1++,2==this.dokan_mode){if(this.co_j.c1>=10){this.co_j.c=320,this.co_j.c1=42;var i;for(i=0;i<=this.a_kazu;i++)if(300==this.co_a[i].c&&1!=this.co_a[i].c4&&this.co_j.c2==this.co_a[i].c3&&(0==this.sl_step||1==this.sl_step||10==this.sl_step||11==this.sl_step)){this.co_j.x=this.co_a[i].x+16,this.co_j.y=this.co_a[i].y-32,this.co_a[i].c4=1;break}this.a_kazu;for(var j=0;j<=this.a_kazu;j++)(this.co_a[j].c>=100||60==this.co_a[j].c)&&(this.co_a[j].gf=!0,300!=this.co_a[j].c||this.co_j.x==this.co_a[j].x+16&&this.co_j.y==this.co_a[j].y-32||(this.co_a[j].c4=0));10!=this.sl_step&&11!=this.sl_step||(this.maps.wx=this.co_j.x-192,this.ks_wx=this.maps.wx),this.co_j.wx=this.co_j.x-this.maps.wx,this.co_j.wy=this.co_j.y-this.maps.wy,this.co_j.wx<96?this.maps.wx=this.co_j.x-96:this.co_j.wx>224&&(this.maps.wx=this.co_j.x-224),this.co_j.wy<78?this.maps.wy=this.co_j.y-78:this.co_j.wy>176&&(this.maps.wy=this.co_j.y-176),this.maps.wx<this.maps.wx_mini?this.maps.wx=this.maps.wx_mini:this.maps.wx>this.maps.wx_max&&(this.maps.wx=this.maps.wx_max),this.maps.wy<this.maps.wy_mini?this.maps.wy=this.maps.wy_mini:this.maps.wy>this.maps.wy_max&&(this.maps.wy=this.maps.wy_max)}}else if(10==this.co_j.c1){var s;s=1==this.co_j.c2?this.gg.ap.getParameter("url2"):2==this.co_j.c2?this.gg.ap.getParameter("url3"):3==this.co_j.c2?this.gg.ap.getParameter("url4"):this.gg.ap.getParameter("url1"),location.href=s}else this.co_j.c1>80&&(this.ml_mode=50)}else 320==this.co_j.c&&(this.co_j.pt=1100,this.co_j.c1--,this.co_j.c1<=0&&(this.co_j.c=100,this.co_j.c1=0,this.co_j.pt=100))},MainProgram.prototype.jShinu=function(i){this.co_j.c1=0,this.co_j.c2=0,this.j_zan_f=!1,this.j_jet_c=0,this.j_v_c=0,1==i?this.co_j.c=240:2==i?(this.co_j.c=200,this.co_j.vy=-280):3==i&&(this.co_j.c=220)},MainProgram.prototype.jZutuki=function(i,j,k){for(var l=0;l<=this.t_kazu;l++)if(this.co_t[l].c>=100){var characterobject=this.co_t[l],flag=!1;1==k?Math.abs(i-characterobject.x)<25&&Math.abs(j-characterobject.y)<23&&(flag=!0):Math.abs(i-characterobject.x)<34&&j==characterobject.y&&(flag=!0),flag&&(i>characterobject.x?(characterobject.pth=1,characterobject.vx=-7):(characterobject.pth=0,characterobject.vx=7),characterobject.c=52,characterobject.vy=-32)}},MainProgram.prototype.tSet=function(i,j,k,l){for(var i1=0;i1<=119;i1++)if(!(this.co_t[i1].c>0)){var characterobject=this.co_t[i1];switch(characterobject.c=10,characterobject.c1=l,characterobject.c2=k,characterobject.c3=i,characterobject.c4=j,characterobject.x=i,characterobject.y=j,this.t_kazu++,k){case 500:characterobject.y=j-12,characterobject.c3=j-52,characterobject.c4=j-12,characterobject.vy=-4;break;case 600:characterobject.c3=0;break;case 900:this.airms_kf&&(characterobject.c2=950)}break}},MainProgram.prototype.tSetBoss=function(i,j,k,l){this.t_kazu=129;for(var i1=120;i1<=129;i1++)if(!(this.co_t[i1].c>0)){var characterobject=this.co_t[i1];switch(characterobject.c=k,characterobject.c1=0,characterobject.c2=0,characterobject.c3=i,characterobject.c4=j,characterobject.x=i,characterobject.y=j,characterobject.vx=l,k){case 150:characterobject.vx=l,characterobject.vy=-28,characterobject.vx<=0?characterobject.muki=0:characterobject.muki=1;break;case 450:characterobject.vx=l,characterobject.vy=-22,characterobject.vx<=0?characterobject.muki=0:characterobject.muki=1;break;case 650:characterobject.vx=l,characterobject.vy=-28,characterobject.vx<=0?characterobject.muki=0:characterobject.muki=1}break}},MainProgram.prototype.tMove=function(){for(var flag=!1,i=0;i<=this.t_kazu;i++)if(0!=this.co_t[i].c&&this.co_t[i].x>=this.maps.wx-512){var characterobject=this.co_t[i],j=characterobject.x,k=characterobject.y;switch(characterobject.c){case 10:this.maps.wx>=characterobject.c1&&(characterobject.c=characterobject.c2,characterobject.c1=0,characterobject.c2=0);break;case 50:characterobject.c1++,characterobject.c1>14&&(characterobject.c=0,this.addScore(10));break;case 52:j+=characterobject.vx,characterobject.vy+=5,characterobject.vy>25&&(characterobject.vy=25),(k+=characterobject.vy)>this.maps.wy+320&&(characterobject.c=0,this.addScore(10));break;case 100:if(j+15>>5>j+12>>5){var word0=this.maps.map_bg[j+15>>5][k+31>>5];11==word0||14==word0?k=32*(k+31>>5)-32:10!=word0&&12!=word0||(k=32*(k+31>>5))}j-=3;var word34=this.maps.map_bg[j+15>>5][k+31>>5];if(word34>=10&&word34<=15)k=32*(k+31>>5),k=this.sakamichiY(j,k);else{var word1=this.maps.map_bg[j>>5][k+32>>5];word1<=9&&(j=32*(j>>5)+32,(word1=this.maps.map_bg[j+15>>5][k+31>>5])>=10&&word1<=15&&(j-=15),characterobject.c=105),(word1=this.maps.map_bg[j>>5][k+31>>5])>=20&&(j=32*(j>>5)+32,characterobject.c=105),(word1=this.maps.map_bg[j+15>>5][k+32>>5])>=10&&word1<=15&&(k=32*(k+32>>5),k=this.sakamichiY(j,k))}characterobject.pt=140+this.g_ac,characterobject.pth=0;break;case 105:if(j+15>>5<j+18>>5){var word2=this.maps.map_bg[j+15>>5][k+31>>5];10==word2||13==word2?k=32*(k+31>>5)-32:11!=word2&&15!=word2||(k=32*(k+31>>5))}j+=3;var word35=this.maps.map_bg[j+15>>5][k+31>>5];if(word35>=10&&word35<=15)k=32*(k+31>>5),k=this.sakamichiY(j,k);else{var word3=this.maps.map_bg[j+31>>5][k+32>>5];word3<=9&&(j=32*(j+31>>5)-32,(word3=this.maps.map_bg[j+15>>5][k+31>>5])>=10&&word3<=15&&(j+=16),characterobject.c=100),(word3=this.maps.map_bg[j+31>>5][k+31>>5])>=20&&(j=32*(j+31>>5)-32,characterobject.c=100),(word3=this.maps.map_bg[j+15>>5][k+32>>5])>=10&&word3<=15&&(k=32*(k+32>>5),k=this.sakamichiY(j,k))}characterobject.pt=140+this.g_ac,characterobject.pth=1;break;case 110:if(j+15>>5>j+12>>5){var word4=this.maps.map_bg[j+15>>5][k+31>>5];11==word4||14==word4?k=32*(k+31>>5)-32:10!=word4&&12!=word4||(k=32*(k+31>>5))}j-=3;var word36=this.maps.map_bg[j+15>>5][k+31>>5];if(word36>=10&&word36<=15)k=32*(k+31>>5),k=this.sakamichiY(j,k);else{var l=k+32>>5;if(this.maps.map_bg[j+31>>5][l]<=9){j=32*(j+31>>5);var word5=this.maps.map_bg[j+15>>5][k+31>>5];word5>=10&&word5<=15&&(j-=15),characterobject.c=120}if(j<32)j<=3&&(characterobject.c=0);else{this.maps.map_bg[j>>5][k+31>>5]>=20&&(j=32*(j>>5)+32,characterobject.c=115,this.maps.map_bg[j+15>>5][k+32>>5]<=9&&(characterobject.c=120))}i>=120&&j<this.maps.wx-32&&(characterobject.c=0);var word7=this.maps.map_bg[j+15>>5][l];word7>=10&&word7<=15&&(k=32*(k+32>>5),k=this.sakamichiY(j,k))}characterobject.pt=140+this.g_ac,characterobject.pth=0;break;case 115:if(j+15>>5<j+18>>5){var word8=this.maps.map_bg[j+15>>5][k+31>>5];10==word8||13==word8?k=32*(k+31>>5)-32:11!=word8&&15!=word8||(k=32*(k+31>>5))}j+=3;var word37=this.maps.map_bg[j+15>>5][k+31>>5];if(word37>=10&&word37<=15)k=32*(k+31>>5),k=this.sakamichiY(j,k);else{var i1=k+32>>5;if(this.maps.map_bg[j>>5][i1]<=9){j=32*(j>>5);var word9=this.maps.map_bg[j+15>>5][k+31>>5];word9>=10&&word9<=15&&(j+=16),characterobject.c=125}var word10=this.maps.map_bg[j+31>>5][k+31>>5];word10>=20&&(j=32*(j+31>>5)-32,characterobject.c=110,this.maps.map_bg[j+15>>5][k+32>>5]<=9&&(characterobject.c=125)),i>=120&&j>this.maps.wx+512&&(characterobject.c=0),(word10=this.maps.map_bg[j+15>>5][i1])>=10&&word10<=15&&(k=32*(k+32>>5),k=this.sakamichiY(j,k))}characterobject.pt=140+this.g_ac,characterobject.pth=1;break;case 120:k+=5;var word38=this.maps.map_bg[j+15>>5][k+31>>5];if(word38>=10&&word38<=15){var j1=this.sakamichiY(j,32*(k+31>>5));j1<=k&&(k=j1,characterobject.c=110)}var k1=k+31>>5,word17=this.maps.map_bg[j>>5][k1],word26=this.maps.map_bg[j+31>>5][k1];(word17>=20||word26>=20)&&(k=32*k1-32,characterobject.c=110),k>=this.ochiru_y&&(characterobject.c=0),characterobject.pt=140,characterobject.pth=0;break;case 125:k+=5;var word39=this.maps.map_bg[j+15>>5][k+31>>5];if(word39>=10&&word39<=15){var l1=this.sakamichiY(j,32*(k+31>>5));l1<=k&&(k=l1,characterobject.c=115)}var i2=k+31>>5,word18=this.maps.map_bg[j>>5][i2],word27=this.maps.map_bg[j+31>>5][i2];(word18>=20||word27>=20)&&(k=32*i2-32,characterobject.c=115),k>=this.ochiru_y&&(characterobject.c=0),characterobject.pt=140,characterobject.pth=1;break;case 150:characterobject.vx<0&&(this.maps.getBGCode(j,k)>=20||this.maps.getBGCode(j,k+31)>=20)&&(j=32*(j>>5)+32,characterobject.vx=0),characterobject.vx>0&&(this.maps.getBGCode(j+31,k)>=20||this.maps.getBGCode(j+31,k+31)>=20)&&(j=32*(j+31>>5)-32,characterobject.vx=0),j+=characterobject.vx,characterobject.vy+=2,characterobject.vy>18&&(characterobject.vy=18);var j2=(k+=characterobject.vy)+31>>5,word19=this.maps.map_bg[j>>5][j2],word28=this.maps.map_bg[j+31>>5][j2];(word19>=20||word28>=20)&&(k=32*j2-32,1==characterobject.muki?characterobject.c=115:characterobject.c=110),k>=this.ochiru_y&&(characterobject.c=0),characterobject.pt=140,characterobject.pth=characterobject.muki;break;case 200:characterobject.c1<=0?this.co_j.x>=j-240&&this.co_j.x<=j+240&&(characterobject.c=210,characterobject.vy=-14):characterobject.c1--,characterobject.pt=143,j+8>=this.co_j.x?characterobject.pth=0:characterobject.pth=1;break;case 210:characterobject.vy++,characterobject.vy>14&&(characterobject.vy=14),k+=characterobject.vy,this.maps.getBGCode(j+15,k+31)>=20&&(k=32*(k+31>>5)-32,characterobject.c=200,characterobject.c1=30),k>=this.ochiru_y&&(characterobject.c=0),0==characterobject.vy&&(Math.abs(this.co_j.x-j)>32||k<=this.co_j.y)&&this.mSet(j,k,100),characterobject.vy<=-1?characterobject.pt=144:characterobject.pt=145,j+8>=this.co_j.x?characterobject.pth=0:characterobject.pth=1;break;case 300:characterobject.c1>0?(characterobject.c1++,2==characterobject.c1||10==characterobject.c1||18==characterobject.c1||26==characterobject.c1?j+8>=this.co_j.x?this.mSet(j,k,200):this.mSet(j,k,205):characterobject.c1>86&&(characterobject.c1=0)):this.co_j.x>=j-256&&this.co_j.x<=j+256&&(characterobject.c1=1),characterobject.pt=150,j+8>=this.co_j.x?characterobject.pth=0:characterobject.pth=1;break;case 400:j-=4,this.maps.getBGCode(j,k+32)<=9&&(j=32*(j>>5)+32,characterobject.c=405),this.maps.getBGCode(j,k+31)>=20&&(j=32*(j>>5)+32,characterobject.c=405),characterobject.pt=152+this.g_ac,characterobject.pth=0;break;case 405:j+=4,this.maps.getBGCode(j+31,k+32)<=9&&(j=32*(j+31>>5)-32,characterobject.c=400),this.maps.getBGCode(j+31,k+31)>=20&&(j=32*(j+31>>5)-32,characterobject.c=400),characterobject.pt=152+this.g_ac,characterobject.pth=1;break;case 410:j-=4;var word40=this.maps.map_bg[j+15>>5][k+31>>5];if(word40>=10&&word40<=15)k=32*(k+31>>5),k=this.sakamichiY(j,k);else{var k2=k+32>>5;if(this.maps.map_bg[j+31>>5][k2]<=9){j=32*(j+31>>5);var word11=this.maps.map_bg[j+15>>5][k+31>>5];word11>=10&&word11<=15&&(j-=15),characterobject.c=420}if(j<32)j<=4&&(characterobject.c=0);else{this.maps.map_bg[j>>5][k+31>>5]>=20&&(j=32*(j>>5)+32,characterobject.c=415,this.maps.map_bg[j+15>>5][k+32>>5]<=9&&(characterobject.c=420))}i>=120&&j<this.maps.wx-32&&(characterobject.c=0);var word13=this.maps.map_bg[j+15>>5][k2];word13>=10&&word13<=15&&(k=32*(k+32>>5),k=this.sakamichiY(j,k))}characterobject.pt=152+this.g_ac,characterobject.pth=0;break;case 415:j+=4;var word41=this.maps.map_bg[j+15>>5][k+31>>5];if(word41>=10&&word41<=15)k=32*(k+31>>5),k=this.sakamichiY(j,k);else{var l2=k+32>>5;if(this.maps.map_bg[j>>5][l2]<=9){j=32*(j>>5);var word14=this.maps.map_bg[j+15>>5][k+31>>5];word14>=10&&word14<=15&&(j+=16),characterobject.c=425}var word15=this.maps.map_bg[j+31>>5][k+31>>5];word15>=20&&(j=32*(j+31>>5)-32,characterobject.c=410,this.maps.map_bg[j+15>>5][k+32>>5]<=9&&(characterobject.c=425)),i>=120&&j>this.maps.wx+512&&(characterobject.c=0),(word15=this.maps.map_bg[j+15>>5][l2])>=10&&word15<=15&&(k=32*(k+32>>5),k=this.sakamichiY(j,k))}characterobject.pt=152+this.g_ac,characterobject.pth=1;break;case 420:var i3=(k+=5)+31>>5,word21=this.maps.map_bg[j>>5][i3],word30=this.maps.map_bg[j+31>>5][i3];(word21>=20||word30>=20)&&(k=32*i3-32,characterobject.c=410),k>=this.ochiru_y&&(characterobject.c=0),characterobject.pt=152,characterobject.pth=0;break;case 425:var j3=(k+=5)+31>>5,word22=this.maps.map_bg[j>>5][j3],word31=this.maps.map_bg[j+31>>5][j3];(word22>=20||word31>=20)&&(k=32*j3-32,characterobject.c=415),k>=this.ochiru_y&&(characterobject.c=0),characterobject.pt=152,characterobject.pth=1;break;case 450:characterobject.vx<0&&(this.maps.getBGCode(j,k)>=20||this.maps.getBGCode(j,k+31)>=20)&&(j=32*(j>>5)+32,characterobject.vx=0),characterobject.vx>0&&(this.maps.getBGCode(j+31,k)>=20||this.maps.getBGCode(j+31,k+31)>=20)&&(j=32*(j+31>>5)-32,characterobject.vx=0),j+=characterobject.vx,characterobject.vy+=2,characterobject.vy>18&&(characterobject.vy=18);var k3=(k+=characterobject.vy)+31>>5,word23=this.maps.map_bg[j>>5][k3],word32=this.maps.map_bg[j+31>>5][k3];(word23>=20||word32>=20)&&(k=32*k3-32,1==characterobject.muki?characterobject.c=415:characterobject.c=410),k>=this.ochiru_y&&(characterobject.c=0),characterobject.pt=152,characterobject.pth=characterobject.muki;break;case 500:k<=characterobject.c3?(characterobject.vy++,characterobject.vy>4&&(characterobject.vy=4)):k>=characterobject.c4&&(characterobject.vy--,characterobject.vy<-4&&(characterobject.vy=-4)),k+=characterobject.vy,characterobject.pt=147+this.g_ac,this.co_j.x<=j+8?characterobject.pth=0:characterobject.pth=1;break;case 510:(j-=3)<48?j<=3&&(characterobject.c=0):this.maps.getBGCode(j-16,k+31)>=20&&(j=32*(j-16>>5)+32+16,characterobject.c=515),characterobject.pt=147+this.g_ac,characterobject.pth=0;break;case 515:j+=3,this.maps.getBGCode(j+31+16,k+31)>=20&&(j=32*(j+31+16>>5)-32-16,characterobject.c=510),characterobject.pt=147+this.g_ac,characterobject.pth=1;break;case 600:characterobject.c1<25?(characterobject.c1++,characterobject.vy=-17,characterobject.c3=0,characterobject.pt=154,characterobject.pth=0):(0==characterobject.c3?(characterobject.vy++,characterobject.c3=1):(characterobject.vy+=2,characterobject.c3=0),characterobject.vy>17&&(characterobject.vy=17),k+=characterobject.vy,characterobject.vy<4?(characterobject.pt=155,characterobject.pth=0):(characterobject.pt=156,characterobject.pth=0),(j-=5)<32?j<=3&&(characterobject.c=0):(this.maps.getBGCode(j+15,k+6)>=20&&(k=32*(k+6>>5)+32-6,characterobject.vy=0),this.maps.getBGCode(j+15,k+31)>=20&&(k=32*(k+31>>5)-32,characterobject.c1=15,characterobject.pt=154,characterobject.pth=0),(this.maps.getBGCode(j,k+31)>=20||this.maps.getBGCode(j,k+8)>=20)&&(j=32*(j>>5)+32,characterobject.c=605),i>=120&&j<this.maps.wx-32&&(characterobject.c=0))),k>=this.ochiru_y&&(characterobject.c=0);break;case 605:characterobject.c1<25?(characterobject.c1++,characterobject.vy=-17,characterobject.c3=0,characterobject.pt=154,characterobject.pth=1):(0==characterobject.c3?(characterobject.vy++,characterobject.c3=1):(characterobject.vy+=2,characterobject.c3=0),characterobject.vy>17&&(characterobject.vy=17),k+=characterobject.vy,characterobject.vy<4?(characterobject.pt=155,characterobject.pth=1):(characterobject.pt=156,characterobject.pth=1),j+=5,this.maps.getBGCode(j+15,k+6)>=20&&(k=32*(k+6>>5)+32-6,characterobject.vy=0),this.maps.getBGCode(j+15,k+31)>=20&&(k=32*(k+31>>5)-32,characterobject.c1=15,characterobject.pt=154,characterobject.pth=1),(this.maps.getBGCode(j+31,k+31)>=20||this.maps.getBGCode(j+31,k+8)>=20)&&(j=32*(j+31>>5)-32,characterobject.c=600),i>=120&&j>this.maps.wx+512&&(characterobject.c=0)),k>=this.ochiru_y&&(characterobject.c=0);break;case 650:characterobject.vx<0&&(this.maps.getBGCode(j,k)>=20||this.maps.getBGCode(j,k+31)>=20)&&(j=32*(j>>5)+32,characterobject.vx=0),characterobject.vx>0&&(this.maps.getBGCode(j+31,k)>=20||this.maps.getBGCode(j+31,k+31)>=20)&&(j=32*(j+31>>5)-32,characterobject.vx=0),j+=characterobject.vx,characterobject.vy+=2,characterobject.vy>18&&(characterobject.vy=18);var l3=(k+=characterobject.vy)+31>>5,word24=this.maps.map_bg[j>>5][l3],word33=this.maps.map_bg[j+31>>5][l3];(word24>=20||word33>=20)&&(k=32*l3-32,1==characterobject.muki?characterobject.c=605:characterobject.c=600,characterobject.c1=15),k>=this.ochiru_y&&(characterobject.c=0),characterobject.vy<4?characterobject.pt=155:characterobject.pt=156,characterobject.pth=characterobject.muki;break;case 700:this.yachamo_cf||(characterobject.c1>0?(characterobject.c1++,2==characterobject.c1?j+8>=this.co_j.x?this.mSet(j,k,300):this.mSet(j,k,305):characterobject.c1>40&&(characterobject.c1=0)):this.co_j.x>=j-256&&this.co_j.x<=j+192&&Math.abs(this.co_j.x-j)>=96&&(characterobject.c1=1)),characterobject.pt=158,j+8>=this.co_j.x?characterobject.pth=0:characterobject.pth=1;break;case 800:characterobject.c1>0?(characterobject.c1++,2==characterobject.c1?j+8>=this.co_j.x?this.mSet(j,k,400):this.mSet(j,k,405):characterobject.c1>20&&(characterobject.c=810,characterobject.c1=0)):characterobject.c1<0?characterobject.c1++:this.co_j.x>=j-240&&this.co_j.x<=j+240&&(characterobject.c1=1),characterobject.pt=160,j+8>=this.co_j.x?characterobject.pth=0:characterobject.pth=1;break;case 810:characterobject.c1<=0?((j+=3)>=characterobject.c3+96&&(j=characterobject.c3+96,characterobject.c1=10),this.maps.getBGCode(j+31,k+32)<=9&&(j=32*(j+31>>5)-32,characterobject.c1=10),characterobject.pt=161+this.g_ac,characterobject.pth=1):characterobject.c1<=35?(characterobject.c1++,15==characterobject.c1&&(j+8>=this.co_j.x?this.mSet(j,k,400):this.mSet(j,k,405)),characterobject.pt=160,j+8>=this.co_j.x?characterobject.pth=0:characterobject.pth=1):((j-=3)<=characterobject.c3&&(j=characterobject.c3,characterobject.c=800,characterobject.c1=-20),this.maps.getBGCode(j,k+32)<=9&&(j=32*(j>>5)+32,characterobject.c=800,characterobject.c1=-20),characterobject.pt=161+this.g_ac,characterobject.pth=0);break;case 900:(j-=4)<48?j<=4&&(characterobject.c=0):(characterobject.c1++,1==characterobject.c1?this.mSet(j,k+19,600):characterobject.c1>26&&(characterobject.c1=0),this.maps.getBGCode(j,k+31)>=20&&(j=32*(j>>5)+32,characterobject.c=910)),characterobject.pt=164,characterobject.pth=0;break;case 910:characterobject.pt=164,characterobject.pth=0;break;case 950:(j-=4)<48?j<=4&&(characterobject.c=0):(characterobject.c1++,1==characterobject.c1?this.mSet(j,k+19,600):characterobject.c1>26&&(characterobject.c1=0),this.maps.getBGCode(j-16,k+31)>=20&&(j=32*(j-16>>5)+32+16,characterobject.c=960,characterobject.c1=16)),characterobject.pt=164,characterobject.pth=0;break;case 960:j+=4,characterobject.c1++,1==characterobject.c1?this.mSet(j,k+19,605):characterobject.c1>26&&(characterobject.c1=0),this.maps.getBGCode(j+31+16,k+31)>=20&&(j=32*(j+31+16>>5)-32-16,characterobject.c=950,characterobject.c1=16),characterobject.pt=164,characterobject.pth=1;break;case 1e3:(j-=3)<=characterobject.c3-256+16&&(characterobject.c=1005),(this.maps.getBGCode(j-16,k)>=20||this.maps.getBGCode(j-16,k+31)>=20)&&(j=32*(j-16>>5)+32+16,characterobject.c=1005),characterobject.pt=166,characterobject.pth=0;break;case 1005:(j+=3)>=characterobject.c3+16&&(characterobject.c=1e3),(this.maps.getBGCode(j+31+16,k)>=20||this.maps.getBGCode(j+31+16,k+31)>=20)&&(j=32*(j+31+16>>5)-32-16,characterobject.c=1e3),characterobject.pt=166,characterobject.pth=1;break;case 1100:characterobject.c1>0?(characterobject.c1++,characterobject.c1>77&&(characterobject.c1=0)):Math.abs(this.co_j.x-j)<=144&&Math.abs(this.co_j.y-k)<=144&&(characterobject.c1=1,this.mSet2(j,k,700,-3,-3),this.mSet2(j,k,700,3,-3),this.mSet2(j,k,700,-3,3),this.mSet2(j,k,700,3,3),this.mSet2(j,k,700,-4,0),this.mSet2(j,k,700,4,0),this.mSet2(j,k,700,0,-4),this.mSet2(j,k,700,0,4)),characterobject.pt=167,j+8>=this.co_j.x?characterobject.pth=0:characterobject.pth=1}if(characterobject.c<100)characterobject.x=j,characterobject.y=k;else{var i4=Math.abs(j-this.co_j.x);i4>=48?(characterobject.x=j,characterobject.y=k):(this.co_j.c>=100&&this.co_j.c<200&&i4<30&&Math.abs(k-this.co_j.y)<23&&(this.j_v_c>0?(1==this.co_j.muki?(characterobject.pth=0,characterobject.vx=3):(characterobject.pth=1,characterobject.vx=-3),characterobject.c=52,characterobject.vy=-30):characterobject.c>=400&&characterobject.c<500||characterobject.c>=1e3&&characterobject.c<1200?this.jShinu(2):i4<27&&this.co_j.vy>0&&!this.j_mizu_f||flag?(characterobject.c<200?characterobject.pt=142:characterobject.c<300?characterobject.pt=146:characterobject.c<400?characterobject.pt=151:characterobject.c<600?characterobject.pt=149:characterobject.c<700?characterobject.pt=157:characterobject.c<800?characterobject.pt=159:characterobject.c<900?characterobject.pt=163:characterobject.c<1e3&&(characterobject.pt=165),characterobject.c=50,characterobject.c1=0,this.co_j.y=k-12,this.co_j.vy=-160,this.j_jump_type=1,this.co_j.c=110,this.co_j.c1=0,this.co_j.pt=109,149!=characterobject.pt&&165!=characterobject.pt||(this.co_j.vy=-220,characterobject.c1=-2),flag=!0):this.jShinu(2)),characterobject.x=j,characterobject.y=k)}}},MainProgram.prototype.sakamichiY=function(i,j){var k=i+15>>5,l=j+31>>5,k2=j;switch(this.maps.map_bg[k][l]){default:break;case 10:var i1=32*l-(i+15)%32;i1<j&&(k2=i1);break;case 11:var j1=32*l+(i+15)%32-31;j1<j&&(k2=j1);break;case 12:var k1=32*l-((i+15)%32>>1);k1<j&&(k2=k1);break;case 13:var l1=32*l-((i+15)%32>>1)-16;l1<j&&(k2=l1);break;case 14:var i2=32*l+((i+15)%32>>1)-31;i2<j&&(k2=i2);break;case 15:var j2=32*l+((i+15)%32>>1)-15;j2<j&&(k2=j2)}return k2},MainProgram.prototype.mSet=function(i,j,k){for(var l=0;l<=23;l++)if(!(this.co_m[l].c>0)){var characterobject=this.co_m[l];switch(characterobject.c=k,characterobject.x=i,characterobject.y=j,characterobject.c1=0,this.m_kazu++,k){case 90:characterobject.c2=4,characterobject.vx=0,characterobject.vy=0;break;case 100:var j1=this.co_j.x-i,k1=this.co_j.y-j,i1=Math.floor(Math.sqrt(j1*j1+k1*k1));i1<48?(this.m_kazu--,characterobject.c=0):(characterobject.vx=rounddown(14*j1/i1),characterobject.vy=rounddown(14*k1/i1),characterobject.x+=rounddown(16*characterobject.vx/14),characterobject.y+=rounddown(16*characterobject.vy/14)),!this.dengeki_mkf&&characterobject.c>0&&4==this.maps.getBGCode(characterobject.x+15,characterobject.y+15)&&(this.m_kazu--,characterobject.c=0);break;case 200:characterobject.vx=-4-this.ranInt(6),characterobject.vy=-22,characterobject.x+=characterobject.vx,characterobject.y+=characterobject.vy;break;case 205:characterobject.c=200,characterobject.vx=4+this.ranInt(6),characterobject.vy=-22,characterobject.x+=characterobject.vx,characterobject.y+=characterobject.vy;break;case 300:characterobject.vx=-12,characterobject.x+=characterobject.vx;break;case 305:characterobject.c=300,characterobject.vx=12,characterobject.x+=characterobject.vx;break;case 400:characterobject.vx=-80,characterobject.vy=-225;break;case 405:characterobject.c=400,characterobject.vx=80,characterobject.vy=-225;break;case 500:characterobject.vx=-4,characterobject.vy=-22;break;case 600:characterobject.vx=-40,characterobject.vy=0;break;case 605:characterobject.c=600,characterobject.vx=40,characterobject.vy=0;break;case 2e3:characterobject.c3=j,characterobject.vy=-210;break;case 2010:characterobject.c=2e3,characterobject.c3=j-64,characterobject.vy=-280;break;case 2020:characterobject.c=2e3,characterobject.c3=j-32,characterobject.vy=-250;break;case 2100:characterobject.c2=0;break;case 2110:characterobject.c=2100,characterobject.c2=1;break;case 2120:characterobject.c=2100,characterobject.c2=2;break;case 2130:characterobject.c=2100,characterobject.c2=3;break;case 2140:characterobject.c=2100,characterobject.c2=4;break;case 2150:characterobject.c=2100,characterobject.c2=5;break;case 2160:characterobject.c=2100,characterobject.c2=6;break;case 2170:characterobject.c=2100,characterobject.c2=7;break;case 2180:characterobject.c=2100,characterobject.c2=8}break}},MainProgram.prototype.mSet2=function(i,j,k,l,i1){for(var j1=0;j1<=23;j1++)if(!(this.co_m[j1].c>0)){var characterobject=this.co_m[j1];switch(characterobject.c=k,characterobject.x=i,characterobject.y=j,characterobject.vx=l,characterobject.vy=i1,characterobject.c1=0,this.m_kazu++,k){case 500:characterobject.x+=characterobject.vx;break;case 700:characterobject.c2=0;break;case 710:characterobject.c=700,characterobject.c2=1}break}},MainProgram.prototype.mMove=function(){for(var i=0;i<=23;i++)if(0!=this.co_m[i].c){var characterobject=this.co_m[i];switch(characterobject.c){case 50:characterobject.c1++,characterobject.c1<=5?characterobject.pt=80:characterobject.c1<=10?characterobject.pt=81:characterobject.c1<=16?characterobject.pt=82:characterobject.c=0,characterobject.pth=0;break;case 60:characterobject.y-=5;var j2=characterobject.y>>5,word0=this.maps.map_bg[characterobject.x+11>>5][j2];(word0<=3||word0>=20)&&(characterobject.c=0),((word0=this.maps.map_bg[characterobject.x+20>>5][j2])<=3||word0>=20)&&(characterobject.c=0),8!=(word0=this.maps.map_bg[characterobject.x+15>>5][j2])&&9!=word0||4==this.maps.map_bg[(characterobject.x+15>>5)-1][j2]||(characterobject.c=0),(characterobject.x<=this.maps.wx-32||characterobject.x>=this.maps.wx+512)&&(characterobject.c=0),(characterobject.y<=this.maps.wy-32||characterobject.y>=this.maps.wy+320)&&(characterobject.c=0),characterobject.pt=85,characterobject.pth=0;break;case 70:switch(characterobject.c1++,characterobject.c1){case 1:characterobject.c2=20;break;case 2:characterobject.c2=34;break;case 3:characterobject.c2=46;break;case 4:characterobject.c2=56;break;case 5:characterobject.c2=64;break;case 6:characterobject.c2=70;break;case 7:characterobject.c2=74;break;case 8:characterobject.c2=77;break;case 9:characterobject.c2=79;break;case 10:characterobject.c2=80}if(characterobject.c1>10&&(characterobject.c2=10,characterobject.c=0),this.co_j.c>=100&&this.co_j.c<200){var i1=this.co_j.x-characterobject.x,k2=this.co_j.y-characterobject.y;Math.floor(Math.sqrt(i1*i1+k2*k2))<=characterobject.c2+4&&this.j_v_c<=0&&this.jShinu(1)}characterobject.pt=1100,characterobject.pth=0;break;case 80:characterobject.vy>=5&&(characterobject.vx>2?characterobject.vx--:characterobject.vx<-2&&characterobject.vx++),characterobject.x+=characterobject.vx,characterobject.vy+=4,characterobject.vy>30&&(characterobject.vy=30),characterobject.y+=characterobject.vy,characterobject.y>=this.maps.wy+320&&(characterobject.c=0),characterobject.pt=136,characterobject.vx<0?characterobject.pth=0:characterobject.pth=1;break;case 90:if(characterobject.c2<48){if(characterobject.c2+=4,characterobject.c2>=48){characterobject.c2=48;var j1=this.co_j.x-characterobject.x,l2=this.co_j.y-characterobject.y,l3=Math.floor(Math.sqrt(j1*j1+l2*l2));l3<32||this.co_j.c<100||this.co_j.c>=200?(characterobject.x<this.maps.wx+256?characterobject.vx=14:characterobject.vx=-14,characterobject.vy=0):(characterobject.vx=rounddown(14*j1/l3),characterobject.vy=rounddown(14*l2/l3))}}else characterobject.x+=characterobject.vx,characterobject.y+=characterobject.vy,characterobject.x<=this.maps.wx-32-32||characterobject.x>=this.maps.wx+512+128+32?characterobject.c=0:(characterobject.y<=this.maps.wy-32-200-32||characterobject.y>=this.maps.wy+320+32)&&(characterobject.c=0);if(this.co_j.c>=100&&this.co_j.c<200){var k1=this.co_j.x-characterobject.x,i3=this.co_j.y-characterobject.y;Math.floor(Math.sqrt(k1*k1+i3*i3))+4<=characterobject.c2&&(this.j_v_c>0?characterobject.c=0:this.jShinu(1))}characterobject.pt=1e3;break;case 100:characterobject.x+=characterobject.vx,characterobject.y+=characterobject.vy;var l1=characterobject.x+15>>5;(this.maps.map_bg[l1][characterobject.y+12>>5]>=20||this.maps.map_bg[l1][characterobject.y+18>>5]>=20)&&(characterobject.c=0),this.dengeki_mkf||4!=this.maps.getBGCode(characterobject.x+15,characterobject.y+15)||(characterobject.c=0),characterobject.x<=this.maps.wx-32||characterobject.x>=this.maps.wx+512+128?characterobject.c=0:(characterobject.y<=this.maps.wy-32-200||characterobject.y>=this.maps.wy+320)&&(characterobject.c=0),0==this.g_c1?(characterobject.pt=120,characterobject.pth=0):(characterobject.pt=121,characterobject.pth=0);break;case 200:characterobject.x+=characterobject.vx,characterobject.vy+=2,characterobject.vy>12&&(characterobject.vy=12);var j=characterobject.vy;switch(j<-18&&(j=-18),characterobject.y+=j,characterobject.y>=this.maps.wy+320&&(characterobject.c=0),this.g_c2){case 0:characterobject.pt=122;break;case 1:characterobject.pt=123;break;case 2:characterobject.pt=124;break;case 3:characterobject.pt=125}characterobject.pth=0;break;case 300:characterobject.x+=characterobject.vx;var j3=characterobject.y+15>>5;(this.maps.map_bg[characterobject.x+8>>5][j3]>=20||this.maps.map_bg[characterobject.x+23>>5][j3]>=20)&&(characterobject.c=0),(characterobject.x<=this.maps.wx-32||characterobject.x>=this.maps.wx+512+128)&&(characterobject.c=0),0==this.g_c1?characterobject.pt=126:characterobject.pt=127,characterobject.vx<=0?characterobject.pth=0:characterobject.pth=1;break;case 400:characterobject.x+=rounddown(characterobject.vx/10),characterobject.vy+=25,characterobject.vy>180&&(characterobject.vy=180),characterobject.y+=rounddown(characterobject.vy/10),characterobject.y>=this.maps.wy+320&&(characterobject.c=0);var i2=characterobject.x+15>>5;this.maps.map_bg[i2][characterobject.y+15>>5]>=20&&(characterobject.c=0),0==this.g_c1?characterobject.pt=128:characterobject.pt=129,characterobject.vx<=0?characterobject.pth=0:characterobject.pth=1;break;case 500:characterobject.vy>=5&&(characterobject.vx>2?characterobject.vx--:characterobject.vx<-2&&characterobject.vx++),characterobject.x+=characterobject.vx,characterobject.vy+=2,characterobject.vy>12&&(characterobject.vy=12);var k=characterobject.vy;k<-16&&(k=-16),characterobject.y+=k,characterobject.y>=this.maps.wy+320&&(characterobject.c=0),characterobject.pt=139,characterobject.pth=0;break;case 600:characterobject.vx>0?characterobject.vx-=2:characterobject.vx<0&&(characterobject.vx+=2),characterobject.x+=rounddown(characterobject.vx/10),characterobject.vy+=8,characterobject.vy>200&&(characterobject.vy=200),characterobject.y+=rounddown(characterobject.vy/10),this.maps.map_bg[characterobject.x+15>>5][characterobject.y+15>>5]>=20&&(characterobject.c=610,characterobject.c1=0,characterobject.y=32*(characterobject.y+15>>5)-16),characterobject.x<=this.maps.wx-32-64||characterobject.x>=this.maps.wx+512+64?characterobject.c=0:(characterobject.y<=this.maps.wy-32-200||characterobject.y>=this.maps.wy+320)&&(characterobject.c=0),characterobject.vx>28?(characterobject.pt=171,characterobject.pth=1):characterobject.vx<-28?(characterobject.pt=171,characterobject.pth=0):(characterobject.pt=170,characterobject.pth=0);break;case 610:characterobject.c1++,characterobject.c1<=3?characterobject.pt=172:characterobject.c1<=6?characterobject.pt=173:characterobject.c1<=9?characterobject.pt=174:(characterobject.c=0,characterobject.pt=198),characterobject.pth=0;break;case 700:characterobject.x+=characterobject.vx,characterobject.y+=characterobject.vy,characterobject.x<=this.maps.wx-32||characterobject.x>=this.maps.wx+512+32?characterobject.c=0:(characterobject.y<=this.maps.wy-64||characterobject.y>=this.maps.wy+320+64)&&(characterobject.c=0);var l=this.maps.getBGCode(characterobject.x+15,characterobject.y+15);0==characterobject.c2&&l>=20&&(characterobject.c=0),0==characterobject.c2&&l<=3&&(characterobject.c=0),characterobject.pt=168+this.g_c1,characterobject.pth=0;break;case 800:characterobject.vy>=5&&(characterobject.vx>2?characterobject.vx--:characterobject.vx<-2&&characterobject.vx++),characterobject.x+=characterobject.vx,characterobject.vy+=4,characterobject.vy>28&&(characterobject.vy=28),characterobject.y+=characterobject.vy,characterobject.y>=this.maps.wy+320&&(characterobject.c=0),this.maps.getBGCode(characterobject.x+15,characterobject.y+31)>=20&&(characterobject.c=70,characterobject.y=32*(characterobject.y+31>>5)-16,characterobject.c1=1,characterobject.c2=20),characterobject.pt=137+this.g_c1,characterobject.vx<0?characterobject.pth=0:characterobject.pth=1;break;case 2e3:characterobject.vy+=30,characterobject.vy>180&&(characterobject.vy=180),characterobject.y+=rounddown(characterobject.vy/10),characterobject.vy>=0&&characterobject.y>=characterobject.c3&&(characterobject.y=characterobject.c3,characterobject.vy=0),(characterobject.x<=this.maps.wx-32||characterobject.x>=this.maps.wx+512)&&(characterobject.c=0),characterobject.pt=90+this.g_ac2,characterobject.pth=0;break;case 2100:(characterobject.x<=this.maps.wx-32||characterobject.x>=this.maps.wx+512)&&(characterobject.c=0),characterobject.pt=42+characterobject.c2,8==characterobject.c2&&(characterobject.pt=59),characterobject.pth=0;break;case 2200:characterobject.x<this.maps.wx?characterobject.x=this.maps.wx:characterobject.x>this.maps.wx+512-32&&(characterobject.x=this.maps.wx+512-32),characterobject.y<this.maps.wy+64?characterobject.y=this.maps.wy+64:characterobject.y>this.maps.wy+224&&(characterobject.y=this.maps.wy+224),this.stage_max>=2&&this.stage>=this.stage_max?0==this.g_ac2?characterobject.pt=99:characterobject.pt=98:0==this.g_ac2?characterobject.pt=95:characterobject.pt=94,characterobject.pth=0}0==characterobject.c?this.m_kazu--:this.co_j.c>=100&&this.co_j.c<200&&(characterobject.c>=2e3?Math.abs(characterobject.x-this.co_j.x)<=14&&characterobject.y<=this.co_j.y+26&&characterobject.y+15>=this.co_j.y&&(this.addScore(5),2100==characterobject.c?0==characterobject.c2?this.j_fire_f=!0:1==characterobject.c2?(this.j_v_c=150,this.j_v_kakudo=0):2==characterobject.c2?this.time_max>0&&(this.time+=3e4):3==characterobject.c2?this.j_jet_fuel+=80:4==characterobject.c2?this.j_helm_f=!0:5==characterobject.c2?this.j_tail_f=!0:6==characterobject.c2?this.j_drell_f=!0:7==characterobject.c2?this.j_gr_kazu++:8==characterobject.c2&&this.j_left++:2200==characterobject.c&&(this.stage_cc=1,this.stage_max>=2&&this.stage>=this.stage_max?this.addScore(995):this.addScore(95)),characterobject.c=0,this.m_kazu--):characterobject.c>=100&&Math.abs(characterobject.x-this.co_j.x)<=23&&Math.abs(characterobject.y-this.co_j.y)<=28&&(this.j_v_c>0?(characterobject.c=0,this.m_kazu--):(this.jShinu(1),800==characterobject.c&&(characterobject.c=70,characterobject.c1=1,characterobject.c2=20))))}},MainProgram.prototype.jmSet=function(i,j,k){for(var l=0;l<=1;l++)if(!(this.co_jm[l].c>0)){var characterobject=this.co_jm[l];switch(characterobject.c=k,characterobject.x=i,characterobject.y=j+8,characterobject.c1=0,this.jm_kazu++,k){case 60:case 65:characterobject.x=i+16,characterobject.y=j,characterobject.vx=i+16,characterobject.c4=8,this.j_gr_kazu--;break;case 100:characterobject.vx=rounddown(this.co_j.vx/10)-10,characterobject.vy=-28,Math.abs(characterobject.vx)<2&&(characterobject.vx=-2);break;case 105:characterobject.vx=rounddown(this.co_j.vx/10)+10,characterobject.vy=-28,Math.abs(characterobject.vx)<2&&(characterobject.vx=2);break;case 200:characterobject.vx=rounddown(this.co_j.vx/10)-10,characterobject.vy=-32,Math.abs(characterobject.vx)<2&&(characterobject.vx=-2),5!=this.grenade_type&&6!=this.grenade_type||(characterobject.y=j,characterobject.vx=-20,characterobject.vy=0),this.j_gr_kazu--;break;case 205:characterobject.c=200,characterobject.vx=rounddown(this.co_j.vx/10)+10,characterobject.vy=-35,Math.abs(characterobject.vx)<2&&(characterobject.vx=2),5!=this.grenade_type&&6!=this.grenade_type||(characterobject.y=j,characterobject.vx=20,characterobject.vy=0),this.j_gr_kazu--}break}},MainProgram.prototype.jmMove=function(){for(var i=0;i<=1;i++)if(0!=this.co_jm[i].c){var characterobject=this.co_jm[i];switch(characterobject.c){case 50:switch(characterobject.c1++,characterobject.c1){case 1:characterobject.c2=20;break;case 2:characterobject.c2=34;break;case 3:characterobject.c2=46;break;case 4:characterobject.c2=56;break;case 5:characterobject.c2=64;break;case 6:characterobject.c2=70;break;case 7:characterobject.c2=74;break;case 8:characterobject.c2=77;break;case 9:characterobject.c2=79;break;case 10:characterobject.c2=80}characterobject.c1>10&&(characterobject.c2=10,characterobject.c=0);for(var j=0;j<=this.t_kazu;j++)if(this.co_t[j].c>=100){var characterobject1=this.co_t[j],j1=characterobject1.x-characterobject.x,l1=characterobject1.y-characterobject.y;Math.floor(Math.sqrt(j1*j1+l1*l1))<=characterobject.c2+8&&(characterobject.x>characterobject1.x?(characterobject1.pth=1,characterobject1.vx=-3):(characterobject1.pth=0,characterobject1.vx=3),characterobject1.c=52,characterobject1.vy=-25)}if((1==this.grenade_type||5==this.grenade_type)&&this.co_b.c>=100){var k1=this.co_b.x-characterobject.x,i2=this.co_b.y-characterobject.y;Math.floor(Math.sqrt(k1*k1+i2*i2))<=characterobject.c2+20&&(this.co_b.c<200?(this.co_b.c=67,this.co_b.vy=-24,this.co_b.c1=0,characterobject.x>this.co_b.x?(this.co_b.muki=1,this.co_b.pt=1005,this.co_b.vx=-4):(this.co_b.muki=0,this.co_b.pt=1e3,this.co_b.vx=4)):this.co_b.c<300?(this.co_b.c=77,this.co_b.vy=-24,this.co_b.c1=0,characterobject.x>this.co_b.x?(this.co_b.muki=1,this.co_b.pt=1105,this.co_b.vx=-4):(this.co_b.muki=0,this.co_b.pt=1100,this.co_b.vx=4)):(this.co_b.c=87,this.co_b.vy=-24,this.co_b.c1=0,characterobject.x>this.co_b.x?(this.co_b.muki=1,this.co_b.pt=1205,this.co_b.vx=-4):(this.co_b.muki=0,this.co_b.pt=1200,this.co_b.vx=4)))}characterobject.pt=1e3,characterobject.pth=0;break;case 60:characterobject.y=this.co_j.y,characterobject.x-=28,characterobject.x<=this.maps.wx-32&&(characterobject.x=this.maps.wx-32),characterobject.c4>0?(characterobject.c4--,characterobject.vx=this.co_j.x+16):(characterobject.vx-=28,characterobject.vx<=characterobject.x&&(characterobject.c=0));for(var k=0;k<=this.t_kazu;k++)if(this.co_t[k].c>=100){var characterobject2=this.co_t[k];characterobject2.x>characterobject.x-12&&characterobject2.x<characterobject.vx+12&&Math.abs(characterobject2.y-characterobject.y)<24&&(characterobject2.pth=0,characterobject2.vx=-3,characterobject2.c=52,characterobject2.vy=-25)}3==this.grenade_type&&this.co_b.c>=100&&this.co_b.x>characterobject.x-24&&this.co_b.x<characterobject.vx+24&&Math.abs(this.co_b.y-characterobject.y)<36&&(this.co_b.c<200?(this.co_b.c=67,this.co_b.vy=-24,this.co_b.c1=0,this.co_b.muki=1,this.co_b.pt=1005,this.co_b.vx=-4):this.co_b.c<300?(this.co_b.c=77,this.co_b.vy=-24,this.co_b.c1=0,this.co_b.muki=1,this.co_b.pt=1105,this.co_b.vx=-4):(this.co_b.c=87,this.co_b.vy=-24,this.co_b.c1=0,this.co_b.muki=1,this.co_b.pt=1205,this.co_b.vx=-4)),(this.co_j.c<100||this.co_j.c>=200)&&(characterobject.c=0),characterobject.pt=1200;break;case 65:characterobject.y=this.co_j.y,characterobject.x+=28,characterobject.x>=this.maps.wx+512+32&&(characterobject.x=this.maps.wx+512+32),characterobject.c4>0?(characterobject.c4--,characterobject.vx=this.co_j.x+16):(characterobject.vx+=28,characterobject.vx>=characterobject.x&&(characterobject.c=0));for(var l=0;l<=this.t_kazu;l++)if(this.co_t[l].c>=100){var characterobject3=this.co_t[l];characterobject3.x>characterobject.vx-12&&characterobject3.x<characterobject.x+12&&Math.abs(characterobject3.y-characterobject.y)<24&&(characterobject3.pth=0,characterobject3.vx=3,characterobject3.c=52,characterobject3.vy=-25)}3==this.grenade_type&&this.co_b.c>=100&&this.co_b.x>characterobject.vx-24&&this.co_b.x<characterobject.x+24&&Math.abs(this.co_b.y-characterobject.y)<36&&(this.co_b.c<200?(this.co_b.c=67,this.co_b.vy=-24,this.co_b.c1=0,this.co_b.muki=0,this.co_b.pt=1e3,this.co_b.vx=4):this.co_b.c<300?(this.co_b.c=77,this.co_b.vy=-24,this.co_b.c1=0,this.co_b.muki=0,this.co_b.pt=1100,this.co_b.vx=4):(this.co_b.c=87,this.co_b.vy=-24,this.co_b.c1=0,this.co_b.muki=0,this.co_b.pt=1200,this.co_b.vx=4)),(this.co_j.c<100||this.co_j.c>=200)&&(characterobject.c=0),characterobject.pt=1205;break;case 100:characterobject.x+=characterobject.vx,this.maps.getBGCode(characterobject.x+7,characterobject.y+15)>=20&&(characterobject.c=0),characterobject.vy+=5,characterobject.vy>30&&(characterobject.vy=30),characterobject.y+=characterobject.vy,characterobject.vy<0&&this.maps.getBGCode(characterobject.x+15,characterobject.y+8)>=20&&(characterobject.c=0),this.maps.getBGCode(characterobject.x+15,characterobject.y+23)>=20&&(characterobject.y=32*(characterobject.y+23>>5)-24,characterobject.vy=-28),this.j_fire_mkf||4!=this.maps.getBGCode(characterobject.x+15,characterobject.y+15)||(characterobject.c=0),(characterobject.x<=this.maps.wx-24||characterobject.x>=this.maps.wx+512-8||characterobject.y<=this.maps.wy-128||characterobject.y>=this.maps.wy+384)&&(characterobject.c=0),characterobject.pt=130+this.g_c2,characterobject.pth=0;break;case 105:characterobject.x+=characterobject.vx,this.maps.getBGCode(characterobject.x+23,characterobject.y+15)>=20&&(characterobject.c=0),characterobject.vy+=5,characterobject.vy>30&&(characterobject.vy=30),characterobject.y+=characterobject.vy,characterobject.vy<0&&this.maps.getBGCode(characterobject.x+15,characterobject.y+8)>=20&&(characterobject.c=0),this.maps.getBGCode(characterobject.x+15,characterobject.y+23)>=20&&(characterobject.y=32*(characterobject.y+23>>5)-24,characterobject.vy=-28),this.j_fire_mkf||4!=this.maps.getBGCode(characterobject.x+15,characterobject.y+15)||(characterobject.c=0),(characterobject.x<=this.maps.wx-24||characterobject.x>=this.maps.wx+512-8||characterobject.y<=this.maps.wy-128||characterobject.y>=this.maps.wy+384)&&(characterobject.c=0),characterobject.pt=130+this.g_c2,characterobject.pth=1;break;case 200:characterobject.x+=characterobject.vx,5!=this.grenade_type&&6!=this.grenade_type&&(characterobject.vy+=5,characterobject.vy>30&&(characterobject.vy=30),characterobject.y+=characterobject.vy,characterobject.vy>0&&this.maps.getBGCode(characterobject.x+15,characterobject.y+31)>=20&&(characterobject.c=50,characterobject.y=32*(characterobject.y+31>>5)-16,characterobject.c1=1,characterobject.c2=20)),this.maps.getBGCode(characterobject.x+15,characterobject.y+15)>=20&&(characterobject.c=50,characterobject.c1=1,characterobject.c2=20),(characterobject.x<=this.maps.wx-64||characterobject.x>=this.maps.wx+512+64||characterobject.y<=this.maps.wy-128||characterobject.y>=this.maps.wy+384)&&(characterobject.c=0),characterobject.pt=137+this.g_c1,characterobject.vx<0?characterobject.pth=0:characterobject.pth=1}if(0==characterobject.c)this.jm_kazu--;else if(characterobject.c>=100)for(var i1=0;i1<=this.t_kazu;i1++)if(!(this.co_t[i1].c<100)){var characterobject4=this.co_t[i1];if(!(Math.abs(characterobject.x-characterobject4.x)>=22||Math.abs(characterobject.y-characterobject4.y)>=22)){characterobject.vx<0?(characterobject4.pth=1,characterobject4.vx=-3):(characterobject4.pth=0,characterobject4.vx=3),characterobject4.c=52,characterobject4.vy=-25,200==characterobject.c?(characterobject.c=50,characterobject.c1=1,characterobject.c2=20):(characterobject.c=0,this.jm_kazu--);break}}}},MainProgram.prototype.aSet=function(i,j,k,l){for(var i1=0;i1<=31;i1++)if(!(this.co_a[i1].c>0)){var characterobject=this.co_a[i1];switch(characterobject.c=k,characterobject.c1=l-512-32,characterobject.c2=l+128,characterobject.x=i,characterobject.y=j,this.a_kazu++,k){case 60:characterobject.pt=200;break;case 70:characterobject.vx=-3,characterobject.c3=0,characterobject.c1=i-512-150,characterobject.c2=i+150;break;case 71:characterobject.c=70,characterobject.vx=3,characterobject.c3=0,characterobject.c1=i-512-150,characterobject.c2=i+150;break;case 80:characterobject.pt=800,characterobject.c3=1;break;case 81:characterobject.c=80,characterobject.pt=800,characterobject.c3=2;break;case 82:characterobject.c=80,characterobject.pt=800,characterobject.c3=3;break;case 83:characterobject.c=80,characterobject.pt=800,characterobject.c3=4;break;case 100:characterobject.vy=5,characterobject.x=i+8,characterobject.y=j-212,characterobject.c3=j-212,characterobject.c4=j+2,characterobject.pt=100;break;case 110:characterobject.vx=-3,characterobject.x=i+208,characterobject.c3=i,characterobject.c4=i+208,characterobject.pt=100,characterobject.c2=l+208+128+32;break;case 115:characterobject.c=110,characterobject.vx=-3,characterobject.x=i+208,characterobject.c3=i,characterobject.c4=i+208,characterobject.pt=100,characterobject.c2=l+208+128+342+32;break;case 116:characterobject.c=110,characterobject.vx=3,characterobject.x=i+320,characterobject.c3=i+320,characterobject.c4=i+208+320,characterobject.pt=100,characterobject.c2=l+208+128+320+32;break;case 120:characterobject.vx=i+160,characterobject.vy=j,characterobject.x=i+8,characterobject.y=j,characterobject.c3=0,characterobject.muki=1,characterobject.c1=characterobject.vx-512-32-130,characterobject.c2=characterobject.vx+128+130,characterobject.pt=100;break;case 121:characterobject.c=120,characterobject.vx=i+160,characterobject.vy=j,characterobject.x=i+8,characterobject.y=j,characterobject.c3=0,characterobject.muki=0,characterobject.c1=characterobject.vx-512-32-130,characterobject.c2=characterobject.vx+128+130,characterobject.pt=100;break;case 300:characterobject.pt=300,characterobject.c3=0,characterobject.c4=0;break;case 310:characterobject.c=300,characterobject.pt=310,characterobject.c3=1,characterobject.c4=0;break;case 320:characterobject.c=300,characterobject.pt=320,characterobject.c3=2,characterobject.c4=0;break;case 330:characterobject.c=300,characterobject.pt=330,characterobject.c3=3,characterobject.c4=0;break;case 400:characterobject.pt=400,characterobject.c3=0,characterobject.vy=j;break;case 500:characterobject.vy=0,characterobject.x=i,characterobject.y=j,characterobject.c3=0,characterobject.c4=0,characterobject.pt=500;break;case 510:characterobject.c=500,characterobject.vy=0,characterobject.x=i,characterobject.y=j,characterobject.c3=0,characterobject.c4=1,characterobject.pt=500;break;case 600:characterobject.pt=600,characterobject.c3=0,characterobject.c4=0,characterobject.vx=0,characterobject.vy=j;break;case 700:characterobject.pt=700,characterobject.c3=0}break}},MainProgram.prototype.aMove=function(){this.j_a_id=-1,this.j_jdai_f=!1,this.a_hf=!1;for(var i=0;i<=this.a_kazu;i++){var characterobject=this.co_a[i];if(0!=characterobject.c)if(this.maps.wx<=characterobject.c1||this.maps.wx>=characterobject.c2)characterobject.gf=!1;else{var k=characterobject.x,l=characterobject.y;switch(characterobject.c){case 60:k>this.maps.wx-80&&k<this.maps.wx+512&&l>this.maps.wy-96&&l<this.maps.wy+320?(characterobject.gf=!0,this.a_hf=!0,this.g_c3<=3?characterobject.pt=200:characterobject.pt=210):characterobject.gf=!1;break;case 70:if(characterobject.c3+=characterobject.vx,characterobject.c3<0?characterobject.c3+=360:characterobject.c3>=360&&(characterobject.c3-=360),k>this.maps.wx-150&&k<this.maps.wx+512+150&&l>this.maps.wy-150&&l<this.maps.wy+320+150){characterobject.gf=!0,this.a_hf=!0,characterobject.pt=1100;var d=.017453292519943295,l11=k+Math.floor(25*Math.cos(characterobject.c3*d)),j12=l+Math.floor(25*Math.sin(characterobject.c3*d));this.vo_x[i][0]=l11,this.vo_y[i][0]=j12;var l12=k+Math.floor(140*Math.cos(characterobject.c3*d)),i13=l+Math.floor(140*Math.sin(characterobject.c3*d));if(this.vo_x[i][1]=l12,this.vo_y[i][1]=i13,this.vo_x[i][2]=k+Math.floor(31*Math.cos(characterobject.c3*d)),this.vo_y[i][2]=l+Math.floor(31*Math.sin(characterobject.c3*d)),this.vo_x[i][3]=k+Math.floor(134*Math.cos(characterobject.c3*d)),this.vo_y[i][3]=l+Math.floor(134*Math.sin(characterobject.c3*d)),this.co_j.c>=100&&this.co_j.c<200&&this.j_v_c<=0)if(Math.abs(l11-l12)>=Math.abs(j12-i13)){if(this.co_j.x+15>l11&&this.co_j.x+15<l12){var i1=l12-l11,l10=rounddown((this.co_j.x+15-l11)*(i13-j12)/i1)+j12;l10>this.co_j.y-12&&l10<this.co_j.y+44&&this.jShinu(1)}else if(this.co_j.x+15>l12&&this.co_j.x+15<l11){var j1=l11-l12,i11=rounddown((this.co_j.x+15-l12)*(j12-i13)/j1)+i13;i11>this.co_j.y-12&&i11<this.co_j.y+44&&this.jShinu(1)}}else if(this.co_j.y+15>j12&&this.co_j.y+15<i13){var k1=i13-j12,j11=rounddown((this.co_j.y+15-j12)*(l12-l11)/k1)+l11;j11>this.co_j.x-12&&j11<this.co_j.x+44&&this.jShinu(1)}else if(this.co_j.y+15>i13&&this.co_j.y+15<j12){var l1=j12-i13,k11=rounddown((this.co_j.y+15-i13)*(l11-l12)/l1)+l12;k11>this.co_j.x-12&&k11<this.co_j.x+44&&this.jShinu(1)}}else characterobject.gf=!1;break;case 80:k>this.maps.wx-32&&k<this.maps.wx+512&&l>this.maps.wy-32&&l<this.maps.wy+320?(characterobject.gf=!0,this.a_hf=!0,this.co_j.x>=k-80&&this.co_j.x<=k+64&&Math.abs(l-this.co_j.y)<32&&(this.hitokoto_c=10,this.hitokoto_num=characterobject.c3)):characterobject.gf=!1;break;case 100:k>this.maps.wx-80-32&&k<this.maps.wx+512+32&&l>this.maps.wy-16&&l<this.maps.wy+320+32?(characterobject.gf=!0,this.a_hf=!0,100==this.co_j.c&&this.co_j.x+15>=k&&this.co_j.x<=k+64&&this.co_j.y==l-32&&(this.j_a_id=i)):characterobject.gf=!1,l<=characterobject.c3?(characterobject.vy++,characterobject.vy>5&&(characterobject.vy=5)):l>=characterobject.c4&&(characterobject.vy--,characterobject.vy<-5&&(characterobject.vy=-5)),l+=characterobject.vy,100==this.co_j.c&&(this.j_a_id==i&&(this.co_j.y=l-32),characterobject.vy<0&&this.maps.getBGCode(this.co_j.x+15,this.co_j.y)>=20&&(this.co_j.y=32*(this.co_j.y>>5)+16,this.jShinu(3)),this.co_j.x+15>=k&&this.co_j.x<=k+64&&this.co_j.y+31>=l&&this.co_j.y<=l+13&&(characterobject.vy>0?(this.co_j.y=l+14,this.maps.getBGCode(this.co_j.x+15,this.co_j.y+31)>=18&&(this.co_j.y=32*(this.co_j.y+31>>5)-32,this.jShinu(3))):(this.co_j.y=l-32,this.j_a_id=i)));break;case 110:if(k>this.maps.wx-80-32&&k<this.maps.wx+512+32&&l>this.maps.wy-16&&l<this.maps.wy+320+32?(characterobject.gf=!0,this.a_hf=!0,100==this.co_j.c&&this.co_j.x+15>=k&&this.co_j.x<=k+64&&this.co_j.y==l-32&&(this.j_a_id=i)):characterobject.gf=!1,k<=characterobject.c3?(characterobject.vx++,characterobject.vx>3&&(characterobject.vx=3)):k>=characterobject.c4&&(characterobject.vx--,characterobject.vx<-3&&(characterobject.vx=-3)),k+=characterobject.vx,100==this.co_j.c){if(this.j_a_id==i)if(this.co_j.x+=characterobject.vx,characterobject.vx>0){var i2=this.co_j.x+15>>5,j5=this.co_j.y>>5,k8=this.co_j.y+31>>5;(this.maps.map_bg[i2][j5]>=20||this.maps.map_bg[i2][k8]>=20)&&(this.co_j.x=32*i2-16)}else if(characterobject.vx<0){var j2=this.co_j.x+15>>5,k5=this.co_j.y>>5,l8=this.co_j.y+31>>5;(this.maps.map_bg[j2][k5]>=20||this.maps.map_bg[j2][l8]>=20)&&(this.co_j.x=32*j2+32-14)}if(this.co_j.x+15>=k&&this.co_j.x<=k+64&&this.co_j.y+31>=l&&this.co_j.y<=l+13)if(characterobject.vx>0){this.co_j.x=k+65;var k2=this.co_j.x+15>>5,l5=this.co_j.y>>5,i9=this.co_j.y+31>>5;(this.maps.map_bg[k2][l5]>=20||this.maps.map_bg[k2][i9]>=20)&&(this.co_j.c=230,this.co_j.x=32*k2-32+11,this.co_j.c1=0,this.j_zan_f=!1,this.j_jet_c=0,this.j_v_c=0)}else{this.co_j.x=k-16;var l2=this.co_j.x+15>>5,i6=this.co_j.y>>5;this.co_j.y;(this.maps.map_bg[l2][i6]>=20||this.maps.map_bg[l2][i6]>=20)&&(this.co_j.c=230,this.co_j.x=32*l2+32-11,this.co_j.c1=0,this.j_zan_f=!1,this.j_jet_c=0,this.j_v_c=0)}}break;case 120:k>this.maps.wx-80-32&&k<this.maps.wx+512+32&&l>this.maps.wy-16&&l<this.maps.wy+320+32?(characterobject.gf=!0,this.a_hf=!0,100==this.co_j.c&&this.co_j.x+15>=k&&this.co_j.x<=k+64&&this.co_j.y==l-32&&(this.j_a_id=i)):characterobject.gf=!1,1==characterobject.muki?(characterobject.c3+=2,characterobject.c3>=360&&(characterobject.c3-=360)):(characterobject.c3-=2,characterobject.c3<0&&(characterobject.c3+=360));var d1=3.14*characterobject.c3/180,j13=characterobject.vx+Math.floor(126*Math.cos(d1))+16-40-k,k13=characterobject.vy+Math.floor(-126*Math.sin(d1))+16-7-l;if(l+=k13,100==this.co_j.c&&(this.j_a_id==i&&(this.co_j.y+=k13),k13<0&&this.maps.getBGCode(this.co_j.x+15,this.co_j.y)>=20&&(this.co_j.y=32*(this.co_j.y>>5)+16,this.jShinu(3)),this.co_j.x+15>=k&&this.co_j.x<=k+64&&this.co_j.y+31>=l&&this.co_j.y<=l+13&&(k13>0?(this.co_j.y=l+14,this.maps.getBGCode(this.co_j.x+15,this.co_j.y+31)>=18&&(this.co_j.y=32*(this.co_j.y+31>>5)-32,this.jShinu(3))):(this.co_j.y=l-32,this.j_a_id=i))),k+=j13,100==this.co_j.c){if(this.j_a_id==i)if(this.co_j.x+=j13,j13>0){var i3=this.co_j.x+15>>5,j6=this.co_j.y>>5,k9=this.co_j.y+31>>5;(this.maps.map_bg[i3][j6]>=20||this.maps.map_bg[i3][k9]>=20)&&(this.co_j.x=32*i3-16)}else if(j13<0){var j3=this.co_j.x+15>>5,k6=this.co_j.y>>5,l9=this.co_j.y+31>>5;(this.maps.map_bg[j3][k6]>=20||this.maps.map_bg[j3][l9]>=20)&&(this.co_j.x=32*j3+32-14)}if(this.co_j.x+15>=k&&this.co_j.x<=k+64&&this.co_j.y+31>=l&&this.co_j.y<=l+13)if(j13>0){this.co_j.x=k+65;var k3=this.co_j.x+15>>5,l6=this.co_j.y>>5,i10=this.co_j.y+31>>5;(this.maps.map_bg[k3][l6]>=20||this.maps.map_bg[k3][i10]>=20)&&(this.co_j.c=230,this.co_j.x=32*k3-32+11,this.co_j.c1=0,this.j_zan_f=!1,this.j_jet_c=0,this.j_v_c=0)}else{this.co_j.x=k-16;var l3=this.co_j.x+15>>5,i7=this.co_j.y>>5,j10=this.co_j.y+31>>5;(this.maps.map_bg[l3][i7]>=20||this.maps.map_bg[l3][j10]>=20)&&(this.co_j.c=230,this.co_j.x=32*l3+32-11,this.co_j.c1=0,this.j_zan_f=!1,this.j_jet_c=0,this.j_v_c=0)}}break;case 300:k>this.maps.wx-96&&k<this.maps.wx+512&&l>this.maps.wy-64&&l<this.maps.wy+320?(characterobject.gf=!0,this.a_hf=!0,100==this.co_j.c&&this.co_j.x+15>=k&&this.co_j.x<=k+48&&this.co_j.y==l-32&&(this.j_a_id=i,this.co_j.x+15>=k+24&&this.co_j.x<=k+48-24&&this.co_j.y==l-32&&1!=characterobject.c4&&(0==this.sl_step||1==this.sl_step||10==this.sl_step||11==this.sl_step||2!=this.dokan_mode)&&(this.co_j.c1=-10,this.co_j.c2=characterobject.c3,this.j_zan_f=!1,this.j_jet_c=0,this.j_v_c=0,this.co_j.c=300,this.co_j.x=k+16,this.co_j.y=l-32,this.co_j.vx=0,this.co_j.vy=0,characterobject.c4=1)),100==this.co_j.c&&this.j_a_id!=i&&(characterobject.c4=0)):characterobject.gf=!1;break;case 400:k>this.maps.wx-96&&k<this.maps.wx+512&&l>this.maps.wy-64&&l<this.maps.wy+320?(characterobject.gf=!0,this.a_hf=!0,100==this.co_j.c&&this.co_j.x+15>=k&&this.co_j.x<=k+80&&this.co_j.y==l-32&&(this.j_a_id=i)):characterobject.gf=!1,0==characterobject.c3?k-64<this.co_j.x+15&&k+96+64>this.co_j.x+15&&(characterobject.c3=1):characterobject.c3<100?(characterobject.c3++,characterobject.c3>8&&(characterobject.c3=100)):100==characterobject.c3?(l+=12)>=characterobject.vy+128&&(l=characterobject.vy+128,characterobject.c3=200):200==characterobject.c3&&(l-=3)<=characterobject.vy&&(l=characterobject.vy,characterobject.c3=0,k<=this.co_j.x+15&&k+96>this.co_j.x+15&&(characterobject.c3=100)),100==this.co_j.c&&(this.j_a_id==i&&(this.co_j.y=l-32,200==characterobject.c3&&this.maps.getBGCode(this.co_j.x+15,this.co_j.y)>=20&&(this.co_j.y=32*(this.co_j.y>>5)+16,this.jShinu(3))),this.co_j.x+15>=k&&this.co_j.x<=k+80&&this.co_j.y+31>=l&&this.co_j.y<=l+63&&(100==characterobject.c3?(this.co_j.y=l+64,this.maps.getBGCode(this.co_j.x+15,this.co_j.y+31)>=18&&(this.co_j.y=32*(this.co_j.y+31>>5)-32,this.jShinu(3))):200==characterobject.c3&&(this.co_j.y=l-32,this.j_a_id=i,this.maps.getBGCode(this.co_j.x+15,this.co_j.y)>=20&&(this.co_j.y=32*(this.co_j.y>>5)+16,this.jShinu(3)))));break;case 500:k>this.maps.wx-96-32&&k<this.maps.wx+512+32&&l>this.maps.wy-32&&l<=this.maps.wy+368?(characterobject.gf=!0,this.a_hf=!0,100==this.co_j.c&&this.co_j.x+15>=k&&this.co_j.x<=k+80&&this.co_j.y==l-32?(this.j_a_id=i,1==characterobject.c4?characterobject.c3<50&&(characterobject.c3<=0?characterobject.c3=1:characterobject.c3<=30?characterobject.c3++:(characterobject.c3=55,characterobject.vy=0)):characterobject.c3<=0&&(characterobject.c3=51,characterobject.vy=0)):1==characterobject.c4&&characterobject.c3<50&&(characterobject.c3=0)):characterobject.gf=!1,characterobject.c3>0&&(characterobject.c3>=51&&characterobject.c3<=54?characterobject.c3++:characterobject.c3>=55&&characterobject.c3<100&&(characterobject.vy<16&&characterobject.vy++,l+=characterobject.vy,this.maps.getBGCode(k+32,l+13)>=20&&(l=32*(l+13>>5)-14,characterobject.c3=100),l>=this.ochiru_y+48&&(characterobject.c=0,characterobject.gf=!1))),100==this.co_j.c&&this.j_a_id==i&&(this.co_j.y=l-32);break;case 600:if(k>this.maps.wx-96&&k<this.maps.wx+512&&l>this.maps.wy-64&&l<this.maps.wy+320?(characterobject.gf=!0,this.a_hf=!0,100==this.co_j.c&&this.co_j.x+15>=k&&this.co_j.x<=k+48&&this.co_j.y==l+16-32&&(this.j_a_id=i)):characterobject.gf=!1,characterobject.pt=600,characterobject.c3<=0?(characterobject.vx=0,this.j_a_id==i&&(characterobject.c3=100,characterobject.c4=0,characterobject.vx=2),this.co_j.x>=k-144&&(characterobject.pt=605)):100==characterobject.c3?(characterobject.c1=k-512-32,characterobject.c2=k+128,this.j_a_id!=i?(characterobject.c4++,characterobject.c4>50&&(characterobject.c3=0)):characterobject.c4=0,characterobject.pt=605):200==characterobject.c3&&(characterobject.pt=605,characterobject.vx=0),k+=characterobject.vx,(this.maps.getBGCode(k+63+16,l)>=20||this.maps.getBGCode(k+63+16,l+32)>=20)&&(k=32*(k+63+16>>5)-64-16,characterobject.vx=k-characterobject.x,characterobject.c3=200),100==this.co_j.c){if(this.j_a_id==i&&(this.co_j.x+=characterobject.vx,characterobject.vx>0)){var i4=this.co_j.x+15>>5,j7=this.co_j.y>>5,k10=this.co_j.y+31>>5;(this.maps.map_bg[i4][j7]>=20||this.maps.map_bg[i4][k10]>=20)&&(this.co_j.x=32*i4-16)}this.co_j.x+15>=k&&this.co_j.x<=k+48&&this.co_j.y+31>=l+16&&this.co_j.y<=l+47&&(this.co_j.x=k+49)}break;case 700:k>this.maps.wx-96&&k<this.maps.wx+512&&l>this.maps.wy-64&&l<this.maps.wy+320?(characterobject.gf=!0,this.a_hf=!0,100==this.co_j.c&&this.co_j.x+15>=k&&this.co_j.x<=k+16&&(characterobject.c3>=1&&characterobject.c3<=2&&this.co_j.y==l-32+10?this.j_a_id=i:characterobject.c3>=3&&characterobject.c3<=4&&this.co_j.y==l-32+16?this.j_a_id=i:characterobject.c3>=5&&characterobject.c3<=6&&this.co_j.y==l-32+10?this.j_a_id=i:this.co_j.y==l-32&&(this.j_a_id=i))):characterobject.gf=!1,this.j_a_id==i?(this.co_j.vx=0,this.co_j.vy=0,this.co_j.x=k,this.j_jdai_f=!0,characterobject.c3++,characterobject.c3<=2?(characterobject.pt=710,this.co_j.y=l-32+10):characterobject.c3<=4?(characterobject.pt=720,this.co_j.y=l-32+16):characterobject.c3<=6?(characterobject.pt=710,this.co_j.y=l-32+10):characterobject.c3>=7&&(characterobject.pt=700,this.co_j.y=l-32,characterobject.c3=0,this.j_a_id=-1,this.j_jump_type=4,this.co_j.pt=101,this.co_j.ac=0,this.co_j.vy=-255,this.j_jump_level=1,4==this.maps.getBGCode(k,l)&&(this.co_j.vy=-75))):(characterobject.c3=0,characterobject.pt=700)}if(this.jm_kazu>0)for(var j=0;j<=1;j++)if(this.co_jm[j].c>=100){var characterobject1=this.co_jm[j];characterobject.c<200?characterobject1.x+15>=k&&characterobject1.x<=k+64&&characterobject1.y+29>=l&&characterobject1.y+2<=l+13&&(200==characterobject1.c?(characterobject1.c=50,characterobject1.y=l-8,characterobject1.c1=1,characterobject1.c2=20):(characterobject1.c=0,this.jm_kazu--)):300==characterobject.c?characterobject1.x+15>=k&&characterobject1.x<=k+48&&characterobject1.y+29>=l&&characterobject1.y+2<=l+31&&(200==characterobject1.c?(characterobject1.c=50,characterobject1.c1=1,characterobject1.c2=20):(characterobject1.c=0,this.jm_kazu--)):400==characterobject.c?characterobject1.x+15>=k&&characterobject1.x<=k+80&&characterobject1.y+29>=l&&characterobject1.y+2<=l+63&&(200==characterobject1.c?(characterobject1.c=50,characterobject1.c1=1,characterobject1.c2=20):(characterobject1.c=0,this.jm_kazu--)):500==characterobject.c&&characterobject1.x+15>=k&&characterobject1.x<=k+80&&characterobject1.y+29>=l&&characterobject1.y+2<=l+13&&(200==characterobject1.c?(characterobject1.c=50,characterobject1.y=l-8,characterobject1.c1=1,characterobject1.c2=20):(characterobject1.c=0,this.jm_kazu--))}characterobject.x=k,characterobject.y=l}}},MainProgram.prototype.bMove=function(){if(!(this.co_b.x>=this.maps.wx+1024)){switch(this.co_b.c){case 40:this.co_b.c1<20&&this.co_b.c1++,15==this.co_b.c1&&this.mSet(this.maps.wx+256,this.maps.wy+128,2200),this.co_b.pt=0;break;case 60:this.co_b.c1++,this.co_b.c4<=0?this.co_b.c1>=26&&(this.co_b.c=40,this.co_b.c1=0,this.addScore(10)):this.co_b.c1>=11&&(this.co_b.c=150),this.co_b.pt=1010;break;case 65:this.co_b.c1++,this.co_b.c1>=11&&(this.co_b.c=155),this.co_b.pt=1015;break;case 67:this.co_b.vy+=4,this.co_b.vy>28&&(this.co_b.vy=28),this.co_b.x+=this.co_b.vx,this.co_b.y+=this.co_b.vy,this.co_b.y>=this.maps.wy+320+16&&(this.co_b.c=40,this.co_b.c1=0,this.addScore(10)),1==this.co_b.muki?this.co_b.pt=1005:this.co_b.pt=1e3;break;case 70:this.co_b.c1++,this.co_b.c4<=0?this.co_b.c1>=26&&(this.co_b.c=40,this.co_b.c1=0,this.addScore(10)):this.co_b.c1>=11&&(this.co_b.c=250),this.co_b.pt=1110;break;case 75:this.co_b.c1++,this.co_b.c1>=11&&(this.co_b.c=255),this.co_b.pt=1115;break;case 77:this.co_b.vy+=4,this.co_b.vy>28&&(this.co_b.vy=28),this.co_b.x+=this.co_b.vx,this.co_b.y+=this.co_b.vy,this.co_b.y>=this.maps.wy+320+16&&(this.co_b.c=40,this.co_b.c1=0,this.addScore(10)),1==this.co_b.muki?this.co_b.pt=1105:this.co_b.pt=1100;break;case 80:this.co_b.c1++,this.co_b.c4<=0?this.co_b.c1>=26&&(this.co_b.c=40,this.co_b.c1=0,this.addScore(10)):this.co_b.c1>=11&&(this.co_b.c=350),this.co_b.pt=1210;break;case 85:this.co_b.c1++,this.co_b.c1>=11&&(this.co_b.c=355),this.co_b.pt=1215;break;case 87:this.co_b.vy+=4,this.co_b.vy>28&&(this.co_b.vy=28),this.co_b.x+=this.co_b.vx,this.co_b.y+=this.co_b.vy,this.co_b.y>=this.maps.wy+320+16&&(this.co_b.c=40,this.co_b.c1=0,this.addScore(10)),1==this.co_b.muki?this.co_b.pt=1205:this.co_b.pt=1200;break;case 100:2!=this.sl_step&&3!=this.sl_step||(this.co_b.c=110,this.co_b.c1=0),this.co_b.pt=1e3;break;case 110:if(2==this.boss_type){var c=150;this.co_b.c1++,1==this.co_b.c1?this.tSetBoss(this.co_b.x,this.co_b.y,c,-2):5==this.co_b.c1?this.tSetBoss(this.co_b.x,this.co_b.y,c,-4):7==this.co_b.c1?this.tSetBoss(this.co_b.x,this.co_b.y,c,-6):9==this.co_b.c1?this.tSetBoss(this.co_b.x,this.co_b.y,c,-8):21==this.co_b.c1?this.tSetBoss(this.co_b.x,this.co_b.y,c,-2):91==this.co_b.c1?this.tSetBoss(this.co_b.x,this.co_b.y,c,-2):95==this.co_b.c1?this.tSetBoss(this.co_b.x,this.co_b.y,c,-4):97==this.co_b.c1?this.tSetBoss(this.co_b.x,this.co_b.y,c,-6):99==this.co_b.c1?this.tSetBoss(this.co_b.x,this.co_b.y,c,-8):111==this.co_b.c1?this.tSetBoss(this.co_b.x,this.co_b.y,c,-2):170==this.co_b.c1?this.tSetBoss(this.co_b.x,this.co_b.y,c,-4):180==this.co_b.c1?this.tSetBoss(this.co_b.x,this.co_b.y,c,-2):this.co_b.c1>250&&(this.co_b.c1=250)}else if(3==this.boss_type){var c1=450;this.co_b.c1++,5==this.co_b.c1?this.tSetBoss(this.co_b.x,this.co_b.y,c1,-3):20==this.co_b.c1?this.tSetBoss(this.co_b.x,this.co_b.y,c1,-3):35==this.co_b.c1?this.tSetBoss(this.co_b.x,this.co_b.y,c1,-3):50==this.co_b.c1?this.tSetBoss(this.co_b.x,this.co_b.y,c1,-3):65==this.co_b.c1?this.tSetBoss(this.co_b.x,this.co_b.y,c1,-3):80==this.co_b.c1?this.tSetBoss(this.co_b.x,this.co_b.y,c1,-3):95==this.co_b.c1?this.tSetBoss(this.co_b.x,this.co_b.y,c1,-3):110==this.co_b.c1?this.tSetBoss(this.co_b.x,this.co_b.y,c1,-3):this.co_b.c1>250&&(this.co_b.c1=250)}else if(4==this.boss_type){this.co_b.c1++,1==this.co_b.c1?this.tSetBoss(this.co_b.x,this.co_b.y,650,-5):15==this.co_b.c1?this.tSetBoss(this.co_b.x,this.co_b.y,650,-3):29==this.co_b.c1?this.tSetBoss(this.co_b.x,this.co_b.y,650,-2):81==this.co_b.c1?this.tSetBoss(this.co_b.x,this.co_b.y,650,-5):95==this.co_b.c1?this.tSetBoss(this.co_b.x,this.co_b.y,650,-3):109==this.co_b.c1?this.tSetBoss(this.co_b.x,this.co_b.y,650,-2):165==this.co_b.c1?this.tSetBoss(this.co_b.x,this.co_b.y,650,-3):this.co_b.c1>250&&(this.co_b.c1=250)}else if(this.co_b.c1++,3==this.co_b.c1)this.mSet2(this.co_b.x,this.co_b.y,500,-4,-18),this.mSet2(this.co_b.x,this.co_b.y,500,4,-18);else if(14==this.co_b.c1)this.mSet2(this.co_b.x,this.co_b.y,500,-6,-20),this.mSet2(this.co_b.x,this.co_b.y,500,6,-20);else if(20==this.co_b.c1)this.mSet2(this.co_b.x,this.co_b.y,500,-3,-24),this.mSet2(this.co_b.x,this.co_b.y,500,3,-24);else if(this.co_b.c1>=28&&this.co_b.c1<=98)this.co_b.c1%7==0&&this.mSet2(this.co_b.x,this.co_b.y,500,-15+this.ranInt(20),-30);else if(130==this.co_b.c1){var l1=this.ranInt(8)+3;this.mSet2(this.co_b.x,this.co_b.y,500,l1,-30),this.mSet2(this.co_b.x,this.co_b.y,500,-l1,-30)}else this.co_b.c1>=150&&(this.co_b.c1=98);this.co_b.pt=1e3;break;case 115:if(2==this.boss_type){var c3=150;this.co_b.c1++,1==this.co_b.c1?this.tSetBoss(this.co_b.x,this.co_b.y,c3,2):5==this.co_b.c1?this.tSetBoss(this.co_b.x,this.co_b.y,c3,4):7==this.co_b.c1?this.tSetBoss(this.co_b.x,this.co_b.y,c3,6):9==this.co_b.c1&&3!=this.boss_type?this.tSetBoss(this.co_b.x,this.co_b.y,c3,8):21==this.co_b.c1?this.tSetBoss(this.co_b.x,this.co_b.y,c3,2):91==this.co_b.c1?this.tSetBoss(this.co_b.x,this.co_b.y,c3,2):95==this.co_b.c1?this.tSetBoss(this.co_b.x,this.co_b.y,c3,4):97==this.co_b.c1?this.tSetBoss(this.co_b.x,this.co_b.y,c3,6):99==this.co_b.c1&&3!=this.boss_type?this.tSetBoss(this.co_b.x,this.co_b.y,c3,8):111==this.co_b.c1?this.tSetBoss(this.co_b.x,this.co_b.y,c3,2):170==this.co_b.c1?this.tSetBoss(this.co_b.x,this.co_b.y,c3,4):180==this.co_b.c1?this.tSetBoss(this.co_b.x,this.co_b.y,c3,2):this.co_b.c1>250&&(this.co_b.c1=250)}else if(3==this.boss_type){var c4=450;this.co_b.c1++,5==this.co_b.c1?this.tSetBoss(this.co_b.x,this.co_b.y,c4,3):20==this.co_b.c1?this.tSetBoss(this.co_b.x,this.co_b.y,c4,3):35==this.co_b.c1?this.tSetBoss(this.co_b.x,this.co_b.y,c4,3):50==this.co_b.c1?this.tSetBoss(this.co_b.x,this.co_b.y,c4,3):65==this.co_b.c1?this.tSetBoss(this.co_b.x,this.co_b.y,c4,3):80==this.co_b.c1?this.tSetBoss(this.co_b.x,this.co_b.y,c4,3):95==this.co_b.c1?this.tSetBoss(this.co_b.x,this.co_b.y,c4,3):110==this.co_b.c1?this.tSetBoss(this.co_b.x,this.co_b.y,c4,3):this.co_b.c1>250&&(this.co_b.c1=250)}else if(4==this.boss_type){this.co_b.c1++,1==this.co_b.c1?this.tSetBoss(this.co_b.x,this.co_b.y,650,5):15==this.co_b.c1?this.tSetBoss(this.co_b.x,this.co_b.y,650,3):29==this.co_b.c1?this.tSetBoss(this.co_b.x,this.co_b.y,650,2):81==this.co_b.c1?this.tSetBoss(this.co_b.x,this.co_b.y,650,5):95==this.co_b.c1?this.tSetBoss(this.co_b.x,this.co_b.y,650,3):109==this.co_b.c1?this.tSetBoss(this.co_b.x,this.co_b.y,650,2):165==this.co_b.c1?this.tSetBoss(this.co_b.x,this.co_b.y,650,3):this.co_b.c1>250&&(this.co_b.c1=250)}else if(this.co_b.c1++,3==this.co_b.c1)this.mSet2(this.co_b.x,this.co_b.y,500,-4,-18),this.mSet2(this.co_b.x,this.co_b.y,500,4,-18);else if(14==this.co_b.c1)this.mSet2(this.co_b.x,this.co_b.y,500,-6,-20),this.mSet2(this.co_b.x,this.co_b.y,500,6,-20);else if(20==this.co_b.c1)this.mSet2(this.co_b.x,this.co_b.y,500,-3,-24),this.mSet2(this.co_b.x,this.co_b.y,500,3,-24);else if(this.co_b.c1>=28&&this.co_b.c1<=98)this.co_b.c1%7==0&&this.mSet2(this.co_b.x,this.co_b.y,500,15-this.ranInt(20),-30);else if(130==this.co_b.c1){var i2=this.ranInt(8)+3;this.mSet2(this.co_b.x,this.co_b.y,500,i2,-30),this.mSet2(this.co_b.x,this.co_b.y,500,-i2,-30)}else this.co_b.c1>=150&&(this.co_b.c1=98);this.co_b.pt=1005;break;case 150:this.co_b.x-=14,this.co_b.x<=this.sl_wx+96&&(this.co_b.x=this.sl_wx+96,this.co_b.c=115,this.co_b.c1=0),this.co_b.pt=1e3;break;case 155:this.co_b.x+=14,this.co_b.x>=this.sl_wx+512-96-32&&(this.co_b.x=this.sl_wx+512-96-32,this.co_b.c=110,this.co_b.c1=0),this.co_b.pt=1005;break;case 200:2!=this.sl_step&&3!=this.sl_step||(this.co_b.c=210,this.co_b.c1=0),this.co_b.pt=1100;break;case 210:if(this.co_b.c1++,2==this.boss2_type)if(10==this.co_b.c1||85==this.co_b.c1||215==this.co_b.c1)for(var i=0;i<=7;i++){var d=45*i*3.14/180,j2=Math.floor(8*Math.cos(d)),l3=-1*Math.floor(8*Math.sin(d));this.mSet2(this.co_b.x,this.co_b.y-8,710,j2,l3)}else if(35==this.co_b.c1||110==this.co_b.c1||295==this.co_b.c1)for(var j=0;j<=7;j++){var d1=3.14*(45*j+15)/180,k2=Math.floor(8*Math.cos(d1)),i4=-1*Math.floor(8*Math.sin(d1));this.mSet2(this.co_b.x,this.co_b.y-8,710,k2,i4)}else if(60==this.co_b.c1||135==this.co_b.c1||375==this.co_b.c1)for(var k=0;k<=7;k++){var d2=3.14*(45*k+30)/180,l2=Math.floor(8*Math.cos(d2)),j4=-1*Math.floor(8*Math.sin(d2));this.mSet2(this.co_b.x,this.co_b.y-8,710,l2,j4)}else this.co_b.c1>445&&(this.co_b.c1=0);else 5==this.co_b.c1||35==this.co_b.c1||65==this.co_b.c1||110==this.co_b.c1||185==this.co_b.c1?this.mSet(this.co_b.x,this.co_b.y,90):this.co_b.c1>185&&(this.co_b.c1=110);this.co_b.pt=1100;break;case 215:if(this.co_b.c1++,2==this.boss2_type)if(10==this.co_b.c1||85==this.co_b.c1||215==this.co_b.c1)for(var l=0;l<=7;l++){var d3=45*l*3.14/180,i3=Math.floor(8*Math.cos(d3)),k4=-1*Math.floor(8*Math.sin(d3));this.mSet2(this.co_b.x,this.co_b.y-8,710,i3,k4)}else if(35==this.co_b.c1||110==this.co_b.c1||295==this.co_b.c1)for(var i1=0;i1<=7;i1++){var d4=3.14*(45*i1+15)/180,j3=Math.floor(8*Math.cos(d4)),l4=-1*Math.floor(8*Math.sin(d4));this.mSet2(this.co_b.x,this.co_b.y-8,710,j3,l4)}else if(60==this.co_b.c1||135==this.co_b.c1||375==this.co_b.c1)for(var j1=0;j1<=7;j1++){var d5=3.14*(45*j1+30)/180,k3=Math.floor(8*Math.cos(d5)),i5=-1*Math.floor(8*Math.sin(d5));this.mSet2(this.co_b.x,this.co_b.y-8,710,k3,i5)}else this.co_b.c1>445&&(this.co_b.c1=0);else 5==this.co_b.c1||35==this.co_b.c1||65==this.co_b.c1||110==this.co_b.c1||185==this.co_b.c1?this.mSet(this.co_b.x,this.co_b.y,90):this.co_b.c1>185&&(this.co_b.c1=110);this.co_b.pt=1105;break;case 250:this.co_b.x-=14,this.co_b.x<=this.sl_wx+96&&(this.co_b.x=this.sl_wx+96,this.co_b.c=215,this.co_b.c1=0),this.co_b.pt=1100;break;case 255:this.co_b.x+=14,this.co_b.x>=this.sl_wx+512-96-32&&(this.co_b.x=this.sl_wx+512-96-32,this.co_b.c=210,this.co_b.c1=0),this.co_b.pt=1105;break;case 300:2!=this.sl_step&&3!=this.sl_step||(this.boss3_type>=2&&this.boss3_type<=4?(this.co_b.c=360,this.co_b.vy=-24):this.co_b.c=310,this.co_b.c1=0),this.co_b.pt=1200;break;case 310:this.co_b.c1++,1==this.co_b.c1?this.mSet2(this.co_b.x,this.co_b.y,800,-5,-32):15==this.co_b.c1?(this.mSet2(this.co_b.x,this.co_b.y,800,-10,-32),this.co_j.x>this.co_b.x-64&&(this.co_b.c1=500)):29==this.co_b.c1?this.mSet2(this.co_b.x,this.co_b.y,800,-15,-32):65==this.co_b.c1?this.mSet2(this.co_b.x-2,this.co_b.y,800,-20,-32):80==this.co_b.c1?this.mSet2(this.co_b.x,this.co_b.y,800,-5,-32):105==this.co_b.c1?this.mSet2(this.co_b.x,this.co_b.y,800,-15,-32):147==this.co_b.c1?this.mSet2(this.co_b.x,this.co_b.y,800,-10,-32):237==this.co_b.c1?this.co_b.c1=0:520==this.co_b.c1?this.mSet2(this.co_b.x,this.co_b.y,800,4,-32):530==this.co_b.c1?(this.mSet2(this.co_b.x,this.co_b.y,800,-5,-32),this.co_b.c1=1):this.co_b.c1>530&&(this.co_b.c1=1),this.co_b.pt=1200;break;case 315:this.co_b.c1++,1==this.co_b.c1?this.mSet2(this.co_b.x,this.co_b.y,800,5,-32):15==this.co_b.c1?(this.mSet2(this.co_b.x,this.co_b.y,800,10,-32),this.co_j.x<this.co_b.x+64&&(this.co_b.c1=500)):29==this.co_b.c1?this.mSet2(this.co_b.x,this.co_b.y,800,15,-32):65==this.co_b.c1?this.mSet2(this.co_b.x+2,this.co_b.y,800,20,-32):80==this.co_b.c1?this.mSet2(this.co_b.x,this.co_b.y,800,5,-32):105==this.co_b.c1?this.mSet2(this.co_b.x,this.co_b.y,800,15,-32):147==this.co_b.c1?this.mSet2(this.co_b.x,this.co_b.y,800,10,-32):237==this.co_b.c1?this.co_b.c1=0:520==this.co_b.c1?this.mSet2(this.co_b.x,this.co_b.y,800,-4,-32):530==this.co_b.c1?(this.mSet2(this.co_b.x,this.co_b.y,800,5,-32),this.co_b.c1=1):this.co_b.c1>530&&(this.co_b.c1=1),this.co_b.pt=1205;break;case 350:this.co_b.x-=14,this.co_b.x<=this.sl_wx+96&&(this.co_b.x=this.sl_wx+96,this.boss3_type>=2&&this.boss3_type<=4?(this.co_b.c=365,this.co_b.vy=-24):this.co_b.c=315,this.co_b.c1=0),this.co_b.pt=1200;break;case 355:this.co_b.x+=14,this.co_b.x>=this.sl_wx+512-96-32&&(this.co_b.x=this.sl_wx+512-96-32,this.boss3_type>=2&&this.boss3_type<=4?(this.co_b.c=360,this.co_b.vy=-24):this.co_b.c=310,this.co_b.c1=0),this.co_b.pt=1205;break;case 360:this.co_b.pt=1200,this.co_b.c1<5?this.co_b.c1++:this.co_b.c1<25?(this.co_b.c1++,this.co_b.pt=1250):25==this.co_b.c1?(3==this.boss3_type?(this.co_b.x-=18,this.co_b.x<=this.sl_wx+16&&(this.co_b.x=this.sl_wx+16,this.co_b.c1=30)):4==this.boss3_type?(this.co_b.x-=3,this.co_b.vy+=2,this.co_b.vy>24&&(this.co_b.vy=24),this.co_b.y+=this.co_b.vy,this.co_b.y>=this.boss_kijyun_y&&(this.co_b.y=this.boss_kijyun_y,this.co_b.vy=-24,this.co_b.x<=this.sl_wx+16&&(this.co_b.c1=30))):(this.co_b.x-=12,this.co_b.x<=this.sl_wx+16&&(this.co_b.x=this.sl_wx+16,this.co_b.c1=30)),this.co_b.pt=1250):30==this.co_b.c1?(3==this.boss3_type?(this.co_b.x+=18,this.co_b.x>=this.sl_wx+512-48&&(this.co_b.x=this.sl_wx+512-48,this.co_b.c1=40)):4==this.boss3_type?(this.co_b.x+=4,this.co_b.vy+=2,this.co_b.vy>24&&(this.co_b.vy=24),this.co_b.y+=this.co_b.vy,this.co_b.y>=this.boss_kijyun_y&&(this.co_b.y=this.boss_kijyun_y,this.co_b.vy=-24,this.co_b.x>=this.sl_wx+512-48&&(this.co_b.c1=40))):(this.co_b.x+=8,this.co_b.x>=this.sl_wx+512-48&&(this.co_b.x=this.sl_wx+512-48,this.co_b.c1=40)),this.co_b.pt=1255):40==this.co_b.c1&&(this.co_b.x-=2,this.co_b.x<=this.sl_wx+512-96-32&&(this.co_b.x=this.sl_wx+512-96-32,this.co_b.c1=-20));break;case 365:this.co_b.pt=1205,this.co_b.c1<5?this.co_b.c1++:this.co_b.c1<25?(this.co_b.c1++,this.co_b.pt=1255):25==this.co_b.c1?(3==this.boss3_type?(this.co_b.x+=18,this.co_b.x>=this.sl_wx+512-48&&(this.co_b.x=this.sl_wx+512-48,this.co_b.c1=30)):4==this.boss3_type?(this.co_b.x+=3,this.co_b.vy+=2,this.co_b.vy>24&&(this.co_b.vy=24),this.co_b.y+=this.co_b.vy,this.co_b.y>=this.boss_kijyun_y&&(this.co_b.y=this.boss_kijyun_y,this.co_b.vy=-24,this.co_b.x>=this.sl_wx+512-48&&(this.co_b.c1=30))):(this.co_b.x+=12,this.co_b.x>=this.sl_wx+512-48&&(this.co_b.x=this.sl_wx+512-48,this.co_b.c1=30)),this.co_b.pt=1255):30==this.co_b.c1?(3==this.boss3_type?(this.co_b.x-=18,this.co_b.x<=this.sl_wx+16&&(this.co_b.x=this.sl_wx+16,this.co_b.c1=40)):4==this.boss3_type?(this.co_b.x-=4,this.co_b.vy+=2,this.co_b.vy>24&&(this.co_b.vy=24),this.co_b.y+=this.co_b.vy,this.co_b.y>=this.boss_kijyun_y&&(this.co_b.y=this.boss_kijyun_y,this.co_b.vy=-24,this.co_b.x<=this.sl_wx+16&&(this.co_b.c1=40))):(this.co_b.x-=8,this.co_b.x<=this.sl_wx+16&&(this.co_b.x=this.sl_wx+16,this.co_b.c1=40)),this.co_b.pt=1250):40==this.co_b.c1&&(this.co_b.x+=2,this.co_b.x>=this.sl_wx+96&&(this.co_b.x=this.sl_wx+96,this.co_b.c1=-20))}if(this.co_j.c>=100&&this.co_j.c<200&&this.co_b.c>=100&&Math.abs(this.co_b.x-this.co_j.x)<42&&this.co_j.y>this.co_b.y-20&&this.co_j.y<this.co_b.y+40&&(1250==this.co_b.pt||1255==this.co_b.pt?this.jShinu(2):Math.abs(this.co_b.x-this.co_j.x)<34&&this.co_j.vy>0?(this.co_b.c<200?(this.co_b.c4--,1==this.co_b.c4?(this.co_b.c=65,this.co_b.c1=0,this.co_b.pt=1015):(this.co_b.c=60,this.co_b.c1=0,this.co_b.pt=1010)):this.co_b.c<300?(this.co_b.c4--,1==this.co_b.c4?(this.co_b.c=75,this.co_b.c1=0,this.co_b.pt=1115):(this.co_b.c=70,this.co_b.c1=0,this.co_b.pt=1110)):(this.co_b.c4--,1==this.co_b.c4?(this.co_b.c=85,this.co_b.c1=0,this.co_b.pt=1215):(this.co_b.c=80,this.co_b.c1=0,this.co_b.pt=1210)),this.co_j.y=this.co_b.y,this.co_j.vy=-320,this.j_jump_type=1,this.co_j.c=110,this.co_j.c1=-4,this.co_j.pt=109):this.jShinu(2)),this.jm_kazu>0&&this.co_b.c>=100)for(var k1=0;k1<=1;k1++)if(this.co_jm[k1].c>=100){var characterobject=this.co_jm[k1];Math.abs(this.co_b.x-characterobject.x)<34&&Math.abs(this.co_b.y-characterobject.y)<30&&(200==characterobject.c?(characterobject.c=50,characterobject.c1=1,characterobject.c2=20,1!=this.grenade_type&&5!=this.grenade_type||(this.co_b.c<200?(this.co_b.c=67,this.co_b.vy=-24,this.co_b.c1=0,characterobject.vx<0?(this.co_b.muki=1,this.co_b.pt=1005,this.co_b.vx=-4):(this.co_b.muki=0,this.co_b.pt=1e3,this.co_b.vx=4)):this.co_b.c<300?(this.co_b.c=77,this.co_b.vy=-24,this.co_b.c1=0,characterobject.vx<0?(this.co_b.muki=1,this.co_b.pt=1105,this.co_b.vx=-4):(this.co_b.muki=0,this.co_b.pt=1100,this.co_b.vx=4)):(this.co_b.c=87,this.co_b.vy=-24,this.co_b.c1=0,characterobject.vx<0?(this.co_b.muki=1,this.co_b.pt=1205,this.co_b.vx=-4):(this.co_b.muki=0,this.co_b.pt=1200,this.co_b.vx=4)))):(characterobject.c=0,this.jm_kazu--))}}},MainProgram.prototype.hSet=function(i,j,k){for(var l=0;l<=63;l++)if(!(this.co_h[l].c>0)){var characterobject=this.co_h[l];characterobject.c=k,characterobject.x=i,characterobject.y=j;break}},MainProgram.prototype.hAttack=function(i,j){for(var k=0;k<=63;k++){var characterobject=this.co_h[k];if(0!=characterobject.c&&characterobject.x==i&&characterobject.y==j){switch(characterobject.c){case 100:this.mSet(32*i,32*j-32,2e3);break;case 200:this.mSet(32*i,32*j-32,2010),this.mSet(32*i,32*j-32,2020),this.mSet(32*i,32*j-32,2e3);break;case 300:this.mSet(32*i,32*j-32,2100);break;case 400:this.mSet(32*i,32*j-32,2110);break;case 500:this.mSet(32*i,32*j-32,2120);break;case 600:this.mSet(32*i,32*j-32,2130);break;case 700:this.mSet(32*i,32*j-32,2140);break;case 800:this.mSet(32*i,32*j-32,2150);break;case 900:this.mSet(32*i,32*j-32,2160);break;case 1e3:this.mSet(32*i,32*j-32,2170);break;case 1100:this.mSet(32*i,32*j-32,2180),this.stage_1up_f[this.stage-1]=!1}this.maps.putBGCode(i,j,41),characterobject.c=0;break}}};function MapSystem(i,j,gamegraphics,mainprogram){this.width=i,this.height=j,this.gg=gamegraphics,this.mp=mainprogram,this.map_bg=createNDimensionArray(this.width,this.height),this.map_string=new Array(this.height),this.bg_space="";for(var k=0;k<=this.width;k++)this.bg_space=this.bg_space+".";this.init(),this.hi=this.gg.spt_img[0],this.g2=this.gg.os2_g,this.ap=this.gg.ap}MapSystem.prototype.init=function(){this.wx=0,this.wy=0,this.os2_wx=0,this.os2_wy=0;for(var j=0;j<this.height;j++)for(var i=0;i<this.width;i++)this.map_bg[i][j]=0;for(var k=0;k<this.height;k++)this.map_string[k]=this.bg_space},MapSystem.prototype.setBank=function(i){var byte0;byte0=1==i?40:2==i?50:4==i?60:30;for(var j=0;j<=9;j++)this.gg.spt_img[0][10+j]=this.gg.spt_img[0][byte0+j]},MapSystem.prototype.drawMap=function(i,j){this.wx=i,this.wy=j;var i1=this.wx%32,j1=this.wy%32;this.os2_wx=this.wx>>5,this.os2_wy=this.wy>>5,this.gg.fill2();for(var l=0;l<=10;l++)for(var k=0;k<=16;k++){this.map_bg[this.os2_wx+k][this.os2_wy+l]>0&&this.gg.drawPT2(32+32*k,32+32*l,this.map_bg[this.os2_wx+k][this.os2_wy+l])}this.gg.os_g.drawImage(this.gg.os2_img,-32-i1,-32-j1,this.gg.ap)},MapSystem.prototype.drawMapScroll=function(i){var l3=this.wx%32,i4=this.wy%32,j4=this.wx>>5,k4=this.wy>>5;if(j4>this.os2_wx+1||j4<this.os2_wx-1||k4>this.os2_wy+1||k4<this.os2_wy-1)this.drawMap(this.wx,this.wy);else if(k4>this.os2_wy)if(j4>this.os2_wx){this.g2.copyArea(64,64,544,352,-32,-32),this.os2_wx=j4,this.os2_wy=k4;for(var k5=this.os2_wy+10,j=0;j<=16;j++)this.map_bg[this.os2_wx+j][k5]>0&&this.g2.drawImage(this.hi[this.map_bg[this.os2_wx+j][k5]],32+32*j,352,this.ap);for(var l4=this.os2_wx+16,i2=0;i2<=9;i2++)this.map_bg[l4][this.os2_wy+i2]>0&&this.g2.drawImage(this.hi[this.map_bg[l4][this.os2_wy+i2]],544,32+32*i2,this.ap)}else if(j4<this.os2_wx){this.g2.copyArea(0,64,544,352,32,-32),this.os2_wx=j4,this.os2_wy=k4;for(var l5=this.os2_wy+10,k=0;k<=16;k++)this.map_bg[this.os2_wx+k][l5]>0&&this.g2.drawImage(this.hi[this.map_bg[this.os2_wx+k][l5]],32+32*k,352,this.ap);for(var j2=0;j2<=9;j2++)this.map_bg[this.os2_wx][this.os2_wy+j2]>0&&this.g2.drawImage(this.hi[this.map_bg[this.os2_wx][this.os2_wy+j2]],32,32+32*j2,this.ap)}else{this.g2.copyArea(32,64,544,352,0,-32),this.os2_wy=k4;for(var i6=this.os2_wy+10,l=0;l<=16;l++)this.map_bg[this.os2_wx+l][i6]>0&&this.g2.drawImage(this.hi[this.map_bg[this.os2_wx+l][i6]],32+32*l,352,this.ap)}else if(k4<this.os2_wy)if(j4>this.os2_wx){this.g2.copyArea(64,0,544,352,-32,32),this.os2_wx=j4,this.os2_wy=k4;for(var i1=0;i1<=16;i1++)this.map_bg[this.os2_wx+i1][this.os2_wy]>0&&this.g2.drawImage(this.hi[this.map_bg[this.os2_wx+i1][this.os2_wy]],32+32*i1,32,this.ap);for(var i5=this.os2_wx+16,k2=1;k2<=10;k2++)this.map_bg[i5][this.os2_wy+k2]>0&&this.g2.drawImage(this.hi[this.map_bg[i5][this.os2_wy+k2]],544,32+32*k2,this.ap)}else if(j4<this.os2_wx){this.g2.copyArea(0,0,544,352,32,32),this.os2_wx=j4,this.os2_wy=k4;for(var j1=0;j1<=16;j1++)this.map_bg[this.os2_wx+j1][this.os2_wy]>0&&this.g2.drawImage(this.hi[this.map_bg[this.os2_wx+j1][this.os2_wy]],32+32*j1,32,this.ap);for(var l2=1;l2<=10;l2++)this.map_bg[this.os2_wx][this.os2_wy+l2]>0&&this.g2.drawImage(this.hi[this.map_bg[this.os2_wx][this.os2_wy+l2]],32,32+32*l2,this.ap)}else{this.g2.copyArea(32,0,544,352,0,32),this.os2_wy=k4;for(var k1=0;k1<=16;k1++)this.map_bg[this.os2_wx+k1][this.os2_wy]>0&&this.g2.drawImage(this.hi[this.map_bg[this.os2_wx+k1][this.os2_wy]],32+32*k1,32,this.ap)}else if(j4>this.os2_wx){this.g2.copyArea(64,32,544,352,-32,0),this.os2_wx=j4;for(var j5=this.os2_wx+16,i3=0;i3<=10;i3++)this.map_bg[j5][this.os2_wy+i3]>0&&this.g2.drawImage(this.hi[this.map_bg[j5][this.os2_wy+i3]],544,32+32*i3,this.ap)}else if(j4<this.os2_wx){this.g2.copyArea(0,32,544,352,32,0),this.os2_wx=j4;for(var j3=0;j3<=10;j3++)this.map_bg[this.os2_wx][this.os2_wy+j3]>0&&this.g2.drawImage(this.hi[this.map_bg[this.os2_wx][this.os2_wy+j3]],32,32+32*j3,this.ap)}for(var image=this.hi[90+i],k3=0;k3<=10;k3++)for(var j6=this.os2_wy+k3,l1=0;l1<=16;l1++)switch(this.map_bg[this.os2_wx+l1][j6]){default:break;case 5:4==this.map_bg[this.os2_wx+l1][j6-1]&&(this.gg.drawBG2(32+32*l1,32+32*k3,4),this.gg.drawPT2(32+32*l1,32+32*k3,5));break;case 6:4==this.map_bg[this.os2_wx+l1][j6+1]&&(this.gg.drawBG2(32+32*l1,32+32*k3,4),this.gg.drawPT2(32+32*l1,32+32*k3,6));break;case 7:0==i||2==i?this.gg.drawBG2(32+32*l1,32+32*k3,96):this.gg.drawBG2(32+32*l1,32+32*k3,97);break;case 8:if(0==i){if(4==this.map_bg[this.os2_wx+l1-1][j6]){this.gg.drawBG2(32+32*l1,32+32*k3,4),this.mp.stage_max>=2&&this.mp.stage>=this.mp.stage_max?this.gg.drawPT2(32+32*l1,32+32*k3,99):this.gg.drawPT2(32+32*l1,32+32*k3,95);break}this.mp.stage_max>=2&&this.mp.stage>=this.mp.stage_max?this.gg.drawBG2(32+32*l1,32+32*k3,99):this.gg.drawBG2(32+32*l1,32+32*k3,95);break}if(4==this.map_bg[this.os2_wx+l1-1][j6]){this.gg.drawBG2(32+32*l1,32+32*k3,4),this.mp.stage_max>=2&&this.mp.stage>=this.mp.stage_max?this.gg.drawPT2(32+32*l1,32+32*k3,98):this.gg.drawPT2(32+32*l1,32+32*k3,94);break}this.mp.stage_max>=2&&this.mp.stage>=this.mp.stage_max?this.gg.drawBG2(32+32*l1,32+32*k3,98):this.gg.drawBG2(32+32*l1,32+32*k3,94);break;case 9:4==this.map_bg[this.os2_wx+l1-1][j6]?(this.gg.drawBG2(32+32*l1,32+32*k3,4),this.gg.os2_g.drawImage(image,32+32*l1,32+32*k3,this.gg.ap)):(this.g2.setColor(this.gg.backcolor),this.gg.os2_g.fillRect(32+32*l1,32+32*k3,32,32),this.gg.os2_g.drawImage(image,32+32*l1,32+32*k3,this.gg.ap))}this.gg.os_g.drawImage(this.gg.os2_img,-32-l3,-32-i4,this.ap)},MapSystem.prototype.getBGCode=function(i,j){return this.map_bg[i>>5][j>>5]},MapSystem.prototype.putBGCode=function(i,j,k){this.map_bg[i][j]=k,this.os2_wx<=i&&this.os2_wx+16>=i&&this.os2_wy<=j&&this.os2_wy+10>=j&&this.gg.drawBG2(32*(i-this.os2_wx)+32,32*(j-this.os2_wy)+32,k)};function MasaoConstruction(params,__canvas,__game,options){this.th_interval=70,this.th_jm=10,this.params=params,this.__canvas=__canvas,this.__appimg=new ImageBuff(512,320),this.__game=__game,this.options=options}MasaoConstruction.prototype.__repaint=function(){this.update(this.__appimg.getGraphics());this.__canvas.getContext("2d").drawImage(this.__appimg._dat,0,0)},MasaoConstruction.prototype.init=function(){},MasaoConstruction.prototype.start=function(){null==this.th&&(this.th=1);var s=this.getParameter("game_speed");this.th_interval=parseInt(s),isNaN(this.th_interval)&&(this.th_interval=70),this.th_interval<1?this.th_interval=1:this.th_interval>300&&(this.th_interval=300),this.th_jm=10},MasaoConstruction.prototype.stop=function(){null!=this.th&&(this.th=null)},MasaoConstruction.prototype.destroy=function(){},MasaoConstruction.prototype.paint=function(g){g.drawImage(this.gg.os_img,0,0,this)},MasaoConstruction.prototype.update=function(g){this.paint(g)},MasaoConstruction.prototype.run=function(){if(10==this.th_jm)this.init_j(),this.mp.start(),this.th_jm-=1,sleepTime=70;else if(6==this.th_jm){var f1=0;this.gg.apt_img._loaded?f1=1:this.gg.apt_img._error&&(f1=2),0!=f1&&(this.th_jm-=1)}else 2==this.th_jm?(this.gg.cut(),this.th_jm-=1,sleepTime=70):this.th_jm>=2?(this.th_jm-=1,sleepTime=70):(100==this.mp.ml_mode?this.mp.mL100():this.mp.mainLoop(),this.userSub(this.gg.os_g,this.gg.os_img));this.__repaint()},MasaoConstruction.prototype.init_j=function(){this.gg=new GameGraphics(this),this.gg.setBackcolor(Color.black);var s=this.getParameter("filename_title");this.gg.addListImage(0,s),s=this.getParameter("filename_ending"),this.gg.addListImage(1,s),s=this.getParameter("filename_gameover"),this.gg.addListImage(2,s),s=this.getParameter("stage_select");var i;if(i=parseInt(s),isNaN(i)&&(i=-1),2==i){var s1=this.getParameter("filename_chizu");this.gg.addListImage(3,s1)}this.gg.loadImage(),this.gm=new GameMouse;var _gm=this.gm;this.__canvas.addEventListener("mousedown",function(e){e.stopImmediatePropagation(),Game.focus.focus(this),function(obj,e){obj.mousePressed(e)}(_gm,e)}.bind(this)),this.__canvas.addEventListener("mouseup",function(e){!function(obj,e){obj.mouseReleased(e)}(_gm,e)}),this.gk=new GameKey;var _gk=this.gk,_handler=function(e){Game.focus.hasFocus(this)&&function(obj,e){obj.keyPressed(e)}(_gk,e)}.bind(this);document.addEventListener("keydown",_handler),this.__game.__resourceList.push({type:"eventListener",target:document,name:"keydown",value:_handler}),_handler=function(e){Game.focus.hasFocus(this)&&function(obj,e){obj.keyReleased(e)}(_gk,e)}.bind(this),document.addEventListener("keyup",_handler),this.__game.__resourceList.push({type:"eventListener",target:document,name:"keyup",value:_handler}),this.mp=new MainProgram(this.gg,this.gm,this.gk),this.mp.addHighscoreEvent(this.options.highscoreCallback),this.userInit()},MasaoConstruction.prototype.userInit=function(){},MasaoConstruction.prototype.userSub=function(paramGraphics,paramImage){},MasaoConstruction.prototype.getImage=function(url){var img=new ImageBuff;return img.load(url),img},MasaoConstruction.prototype.createImage=function(w,h){return new ImageBuff(w,h)},MasaoConstruction.prototype.getParameter=function(name){var s=(name+"").toLowerCase();return void 0===this.params[s]?null:this.params[s]+""};var CanvasMasao={};return CanvasMasao.CharacterObject=CharacterObject,CanvasMasao.GameGraphics=GameGraphics,CanvasMasao.GameKey=GameKey,CanvasMasao.GameMouse=GameMouse,CanvasMasao.Game=Game,CanvasMasao.IdouGamen=IdouGamen,CanvasMasao.ImageBuff=ImageBuff,CanvasMasao.KeyboardMenu=KeyboardMenu,CanvasMasao.MainProgram=MainProgram,CanvasMasao.MapSystem=MapSystem,CanvasMasao.MasaoConstruction=MasaoConstruction,CanvasMasao}();